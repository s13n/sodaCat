# Created from RP2350.svd (Rev 0.1)

name: SHA256
description: SHA-256 hash function implementation
registers:
  - name: CSR
    addressOffset: 0
    description: Control and status register
    resetValue: 4614
    fields:
      - name: START
        description: "Write 1 to prepare the SHA-256 core for a new checksum.\n\n\
          \                            The SUMx registers are initialised to the proper
          values (fractional bits of square roots of first 8 primes) and internal
          counters are cleared. This immediately forces WDATA_RDY and SUM_VLD high.\n\
          \n                            START must be written before initiating a
          DMA transfer to the SHA-256 core, because the core will always request 16
          transfers at a time (1 512-bit block). Additionally, the DMA channel should
          be configured for a multiple of 16 32-bit transfers."
        access: write-only
        bitOffset: 0
        bitWidth: 1
      - name: WDATA_RDY
        description: "If 1, the SHA-256 core is ready to accept more data through
          the WDATA register.\n\n                            After writing 16 words,
          this flag will go low for 57 cycles whilst the core completes its digest."
        access: read-only
        bitOffset: 1
        bitWidth: 1
      - name: SUM_VLD
        description: "If 1, the SHA-256 checksum presented in registers SUM0 through
          SUM7 is currently valid.\n\n                            Goes low when WDATA
          is first written, then returns high once 16 words have been written and
          the digest of the current 512-bit block has subsequently completed."
        access: read-only
        bitOffset: 2
        bitWidth: 1
      - name: ERR_WDATA_NOT_RDY
        description: Set when a write occurs whilst the SHA-256 core is not 
          ready for data (WDATA_RDY is low). Write one to clear.
        access: read-write
        modifiedWriteValues: oneToClear
        bitOffset: 4
        bitWidth: 1
      - name: DMA_SIZE
        description: "Configure DREQ logic for the correct DMA data size. Must be
          configured before the DMA channel is triggered.\n\n                    \
          \        The SHA-256 core's DREQ logic requests one entire block of data
          at once, since there is no FIFO, and data goes straight into the core's
          message schedule and digest hardware. Therefore, when transferring data
          with DMA, CSR_DMA_SIZE must be configured in advance so that the correct
          number of transfers can be requested per block."
        access: read-write
        enumeratedValues:
          - name: 8bit
            value: 0
          - name: 16bit
            value: 1
          - name: 32bit
            value: 2
        bitOffset: 8
        bitWidth: 2
      - name: BSWAP
        description: "Enable byte swapping of 32-bit values at the point they are
          committed to the SHA message scheduler.\n\n                            This
          block's bus interface assembles byte/halfword data into message words in
          little-endian order, so that DMAing the same buffer with different transfer
          sizes always gives the same result on a little-endian system like RP2350.\n\
          \n                            However, when marshalling bytes into blocks,
          SHA expects that the first byte is the *most significant* in each message
          word. To resolve this, once the bus interface has accumulated 32 bits of
          data (either a word write, two halfword writes in little-endian order, or
          four byte writes in little-endian order) the final value can be byte-swapped
          before passing to the actual SHA core.\n\n                            This
          feature is enabled by default because using the SHA core to checksum byte
          buffers is expected to be more common than having preformatted SHA message
          words lying around."
        access: read-write
        bitOffset: 12
        bitWidth: 1
  - name: WDATA
    addressOffset: 4
    description: Write data register
    resetValue: 0
    fields:
      - name: WDATA
        description: "After pulsing START and writing 16 words of data to this register,
          WDATA_RDY will go low and the SHA-256 core will complete the digest of the
          current 512-bit block.\n\n                            Software is responsible
          for ensuring the data is correctly padded and terminated to a whole number
          of 512-bit blocks.\n\n                            After this, WDATA_RDY
          will return high, and more data can be written (if any).\n\n           \
          \                 This register supports word, halfword and byte writes,
          so that DMA from non-word-aligned buffers can be supported. The total amount
          of data per block remains the same (16 words, 32 halfwords or 64 bytes)
          and byte/halfword transfers must not be mixed within a block."
        access: write-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM0
    addressOffset: 8
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM0
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM1
    addressOffset: 12
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM1
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM2
    addressOffset: 16
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM2
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM3
    addressOffset: 20
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM3
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM4
    addressOffset: 24
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM4
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM5
    addressOffset: 28
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM5
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM6
    addressOffset: 32
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM6
        access: read-only
        bitOffset: 0
        bitWidth: 32
  - name: SUM7
    addressOffset: 36
    description: 256-bit checksum result. Contents are undefined when 
      CSR_SUM_VLD is 0.
    resetValue: 0
    fields:
      - name: SUM7
        access: read-only
        bitOffset: 0
        bitWidth: 32
addressBlocks:
  - offset: 0
    size: 40
    usage: registers
