version: 1.0.0
family: STM32H7
devices:
  - STM32H745
  - STM32H755
  - STM32H747
  - STM32H757
documents:
  - id: RM0399
    title: STM32H745/755 and STM32H747/757 advanced Arm-based 32-bit MCUs
    revision: Rev.4
notes:
  - "Clock sources: HSI, CSI (~4 MHz), HSE (4..48 MHz), LSE (32.768 kHz), LSI (~32 kHz), HSI48 (48 MHz)."
  - "System clock sources: HSE, HSI, CSI, or PLL1_P via RCC_CFGR.SW."
  - "PLL ref (after DIVM) 1..16 MHz; \u03A3\u0394 fractional supported; VCO ranges per VCOSEL."
instance: RCC
signals:
  - name: hsi_osc
    description: High-speed internal RC; oscillator output.
  - name: hsi_ck
    description: High-speed internal RC; can feed SYSCLK and PLL.
  - name: hsi_ker_ck
    description: High-speed internal RC; can feed peripherals.
  - name: csi_osc
    description: Low-power internal RC (~4 MHz); oscillator output.
  - name: csi_ck
    description: Low-power internal RC (~4 MHz); can feed SYSCLK and PLL.
  - name: csi_ker_ck
    description: Low-power internal RC (~4 MHz); can feed peripherals.
  - name: hse_ck
    description: External high-speed crystal/clock (4..48 MHz). For external clock, set RCC_CR.HSEBYP and drive OSC_IN (bypass).
  - name: lse_ck
    description: Low-speed external 32.768 kHz in backup domain. For bypass mode, use RCC_BDCR.LSEBYP.
  - name: lsi_ck
    description: Low-speed internal RC (~32 kHz), for IWDG/RTC as selected.
  - name: hsi48_ck
    description: 48 MHz internal RC (USB and others, device-dependent).
  - name: ref1_ck
    description: PLL1 reference after DIVM1 (must be 1..16 MHz).
  - name: ref2_ck
    description: PLL2 reference after DIVM2.
  - name: ref3_ck
    description: PLL3 reference after DIVM3.
  - name: vco1_ck
    description: "PLL1 VCO (integer/fractional \u03A3\u0394; FRAC update on-the-fly)."
  - name: pll1_p_ck
    description: PLL1 'P' output; can feed SYSCLK.
  - name: pll1_q_ck
    description: PLL1 'Q' output (kernel clocks).
  - name: pll1_r_ck
    description: PLL1 'R' output (e.g., TRACE).
  - name: vco2_ck
    description: PLL2 VCO; same constraints as PLL1.
  - name: pll2_p_ck
    description: PLL2 'P' output.
  - name: pll2_q_ck
    description: PLL2 'Q' output.
  - name: pll2_r_ck
    description: PLL2 'R' output.
  - name: vco3_ck
    description: PLL3 VCO; same constraints as PLL1/2.
  - name: pll3_p_ck
    description: PLL3 'P' output.
  - name: pll3_q_ck
    description: PLL3 'Q' output.
  - name: pll3_r_ck
    description: PLL3 'R' output.
  - name: sys_ck
    description: System clock; switch occurs only when target is ready.
  - name: sys_d1cpre_ck
    description: D1 domain prescaled CPU clock.
  - name: sys_hpre_ck
    description: AXI/AHB bus matrix clock
  - name: mco1_sel_ck
    description: MCO1 source selection.
  - name: mco1_ck
    description: MCO1 output clock after prescaler.
  - name: mco2_sel_ck
    description: MCO2 source selection.
  - name: mco2_ck
    description: MCO2 output clock after prescaler.
  - name: pllsrc_mux_out_ck
    description: Output of PLLSRC_mux feeding DIVM1/2/3.
  - name: rcc_c1_ck
    description: CPU1 clock (i.e. Cortex-M7)
  - name: rcc_c2_ck
    description: CPU2 clock (i.e. Cortex-M4)
  - name: rcc_fclk_c1
    description: CPU1 function clock for systick timer
  - name: rcc_fclk_c2
    description: CPU2 function clock for systick timer
  - name: rcc_aclk
    description: AXI peripheral clock
  - name: rcc_hclk1
    description: AHB1 peripheral clock (domain D2)
  - name: rcc_hclk2
    description: AHB2 peripheral clock (domain D2) 
  - name: rcc_hclk3
    description: AHB3 peripheral clock (domain D1) 
  - name: rcc_hclk4
    description: AHB4 peripheral clock (domain D3)
  - name: rcc_pclk1
    description: APB1 peripheral clock (domain D2)
  - name: rcc_pclk2
    description: APB2 peripheral clock (domain D2)
  - name: rcc_pclk3
    description: APB3 peripheral clock (domain D1)
  - name: rcc_pclk4
    description: APB4 peripheral clock (domain D3)
  - name: hse_1M_ck
    description: Prescaled external clock
  - name: rtc_sel_ck
    description: RTC/AWU selected clock
  - name: rcc_rtc_ck
    description: RTC/AWU kernel clock
  - name: per_ck
    description: global peripheral clock
  - name: i2s_ckin
    description: audio master clock input (I2S_CKIN pin function)
  - name: dsi_phy_ck
    description: DSI PHY clock input (max. 62 MHz)
  - name: dma1_hclk
    description: Host clock for DMA1
  - name: adc12_bus_ck
    description: Bus clock for ADC1 and ADC2
  - name: usb1otg_bus_ck
    description: Bus clock for USB1OTG
  - name: eth1mac_bus_ck
    description: Bus clock for ETH1MAC
  - name: eth1tx_ck
    description: Transmit clock for ETH1MAC
  - name: eth1rx_ck
    description: Receive clock for ETH1MAC
  - name: sai4_a_sel_ck
    description: SAI4a selected clock
  - name: sai4_a_ker_ck
    description: SAI4a kernel clock (max. 150 MHz)
  - name: sai4_b_sel_ck
    description: SAI4b selected clock
  - name: sai4_b_ker_ck
    description: SAI4b kernel clock (max. 150 MHz)
  - name: sai23_sel_ck
    description: SAI2,3 selected clock
  - name: sai3_ker_ck
    description: SAI3 kernel clock (max. 150 MHz)
  - name: sai2_ker_ck
    description: SAI2 kernel clock (max. 150 MHz)
  - name: sai1_sel_ck
    description: SAI1 selected Clock
  - name: sai1_ker_ck
    description: SAI1 kernel clock (max. 150 MHz)
  - name: dfsdm_sel_ck
    description: DFSDM selected clock
  - name: dfsdm_ck
    description: DFSDM kernel clock (max. 250 MHz)
  - name: dfsdm_ack
    description: DFSDM kernel clock (max. 250 MHz)
  - name: spdif_sel_ck
    description: SPDIF receiver selected clock
  - name: spdifrx_ker_ck
    description: SPDIF receiver kernel clock (max. 250 MHz)
  - name: spi123_sel_ck
    description: SPI1,2,3 selected clock
  - name: spi1_ker_ck
    description: SPI1 kernel clock (max. 200 MHz)
  - name: spi2_ker_ck
    description: SPI2 kernel clock (max. 200 MHz)
  - name: spi3_ker_ck
    description: SPI3 kernel clock (max. 200 MHz)
  - name: spi45_sel_ck
    description: SPI4,5 selected clock
  - name: spi4_ker_ck
    description: SPI4 kernel clock (max. 125 MHz)
  - name: spi5_ker_ck
    description: SPI5 kernel clock (max. 125 MHz)
  - name: spi6_sel_ck
    description: SPI6 selected clock
  - name: spi6_ker_ck
    description: SPI6 kernel clock (max. 125 MHz)
  - name: i2c123_sel_ck
    description: I2C1,2,3 selected clock
  - name: i2c1_ker_ck
    description: I2C1 kernel clock (max. 125 MHz)
  - name: i2c2_ker_ck
    description: I2C2 kernel clock (max. 125 MHz)
  - name: i2c3_ker_ck
    description: I2C3 kernel clock (max. 125 MHz)
  - name: i2c4_sel_ck
    description: I2C4 selected clock
  - name: i2c4_ker_ck
    description: I2C4 kernel clock (max. 125 MHz)
  - name: usart16_sel_ck
    description: USART1,6 selected clock (max. 125 MHz)
  - name: usart234578_sel_ck
    description: USART2,3,4,5,7,8 selected clock (max. 125 MHz)
  - name: usart1_ker_ck
    description: USART1 kernel clock (max. 125 MHz)
  - name: usart2_ker_ck
    description: USART2 kernel clock (max. 125 MHz)
  - name: usart3_ker_ck
    description: USART3 kernel clock (max. 125 MHz)
  - name: uart4_ker_ck
    description: UART4 kernel clock (max. 125 MHz)
  - name: uart5_ker_ck
    description: UART5 kernel clock (max. 125 MHz)
  - name: usart6_ker_ck
    description: USART6 kernel clock (max. 125 MHz)
  - name: uart7_ker_ck
    description: UART7 kernel clock (max. 125 MHz)
  - name: uart8_ker_ck
    description: UART8 kernel clock (max. 125 MHz)
  - name: lpuart_sel_ck
    description: LPUART selected clock
  - name: lpuart_ker_ck
    description: LPUART kernel clock (max. 125 MHz)
  - name: lptim1_sel_ck
    description: LPTIM1 selected clock (max. 125 MHz)
  - name: lptim1_ker_ck
    description: LPTIM1 kernel clock (max. 125 MHz)
  - name: lptim2_sel_ck
    description: LPTIM2 selected clock (max. 125 MHz)
  - name: lptim2_ker_ck
    description: LPTIM2 kernel clock (max. 125 MHz)
  - name: lptim345_sel_ck
    description: LPTIM3,4,5 selected clock (max. 125 MHz)
  - name: lptim3_ker_ck
    description: LPTIM3 kernel clock (max. 125 MHz)
  - name: lptim4_ker_ck
    description: LPTIM4 kernel clock (max. 125 MHz)
  - name: lptim5_ker_ck
    description: LPTIM5 kernel clock (max. 125 MHz)
  - name: ltdc_ker_ck
    description: LTDC kernel clock (max. 150 MHz)
  - name: blclk_sel_ck
    description: DSI BLCLK selected clock
  - name: blclk_ck
    description: BLCLK kernel clock (DSI, max. 133 MHz)
  - name: sdmmc_sel_ck
    description: SDMMC selected clock
  - name: sdmmc1_ker_ck
    description: SDMMC1 kernel clock (max. 250 MHz)
  - name: sdmmc2_ker_ck
    description: SDMMC2 kernel clock (max. 250 MHz)
  - name: quadspi_sel_ck
    description: QUADSPI selected clock
  - name: quadspi_ker_ck
    description: QUADSPI kernel clock (max. 250 MHz)
  - name: fmc_sel_ck
    description: FMC selected clock
  - name: fmc_ker_ck
    description: FMC kernel clock (max. 300 MHz)
  - name: adc_sel_ck
    description: ADC selected clock
  - name: adc3_ker_ck
    description: ADC3 kernel clock (max. 80 MHz)
  - name: adc12_ker_ck
    description: ADC1/2 kernel clock (max. 80 MHz)
  - name: swp_sel_ck
    description: SWPMI selected clock
  - name: swpmi_ker_ck
    description: SWPMI kernel clock (max. 125 MHz)
  - name: rng_sel_ck
    description: RNG selected clock
  - name: rng_ker_ck
    description: RNG kernel clock (max. 250 MHz)
  - name: fdcan_sel_ck
    description: FDCAN selected clock
  - name: fdcan_ker_ck
    description: FDCAN kernel clock (max. 125 MHz)
  - name: csi_122_ck
    description: CEC kernel clock / 122
  - name: cec_sel_ck
    description: CEC selected clock
  - name: cec_ker_ck
    description: CEC kernel clock (HDMI, max. 66 MHz)
generators:
  - name: HSI
    output: hsi_osc
    description: Internal high-speed RC.
    control:
      reg: CR
      field: HSIDIV
      values: [64000000, 32000000, 16000000, 8000000]
      default: 64000000
  - name: CSI
    output: csi_osc
    description: Internal ~4 MHz RC.
    control:
      reg: CR
      field: CSION
      default: 4000000
  - name: HSE
    output: hse_ck
    description: "External/crystal 4..48 MHz."
    control:
      state: freqHSE
      reg: CR
      field: HSEON
  - name: LSE
    output: lse_ck
    description: External 32.768 kHz.
    control:
      state: freqLSE
      reg: BDCR
      field: LSEON
  - name: LSI
    output: lsi_ck
    description: Internal ~32 kHz RC.
    control:
      reg: CSR
      field: LSION
      default: 32000
  - name: HSI48
    output: hsi48_ck
    description: Internal 48 MHz RC.
    control:
      reg: CR
      field: RC48ON
      default: 48000000
  - name: I2S_CKIN
    output: i2s_ckin
    description: I2S_CKIN input pin.
  - name: DSI_PHY_CK
    output: dsi_phy_ck
    description: DSI Phy clock.
plls:
  - name: PLL1
    input: ref1_ck
    output: vco1_ck
    feedback_integer:
      reg: PLL1DIVR
      field: DIVN1
      value_range:
        min: 8
        max: 432
        offset: -1
    feedback_fraction:
      reg: PLL1FRACR
      field: FRACN1
      value_range:
        min: 0
        max: 8191
        scale: 8192
    vco_limits:
      min: 192000000
      max: 960000000
    description: "Main PLL for CPU and high-speed peripherals"  
  - name: PLL2
    input: ref2_ck
    output: vco2_ck
    feedback_integer:
      reg: PLL2DIVR
      field: DIVN2
      value_range:
        min: 8
        max: 432
        offset: -1
    feedback_fraction:
      reg: PLL2FRACR
      field: FRACN2
      value_range:
        min: 0
        max: 8191
        scale: 8192
    vco_limits:
      min: 192000000
      max: 960000000
    description: "Dedicated PLL for peripherals"  
  - name: PLL3
    input: ref3_ck
    output: vco3_ck
    feedback_integer:
      reg: PLL3DIVR
      field: DIVN3
      value_range:
        min: 8
        max: 432
        offset: -1
    feedback_fraction:
      reg: PLL3FRACR
      field: FRACN3
      value_range:
        min: 0
        max: 8191
        scale: 8192
    vco_limits:
      min: 192000000
      max: 960000000
    description: "Dedicated PLL for peripherals"  
dividers:
  - name: HSIDIV
    input: pllsrc_mux_out_ck
    output: ref1_ck
    factor:
      reg: PLLCKSELR
      field: DIVM1
    description: PLL1 pre-divider; ensures 1..16 MHz at ref1_ck.
  - name: DIVM1
    input: pllsrc_mux_out_ck
    output: ref1_ck
    factor:
      reg: PLLCKSELR
      field: DIVM1
    description: PLL1 pre-divider; ensures 1..16 MHz at ref1_ck.
  - name: DIVM2
    input: pllsrc_mux_out_ck
    output: ref2_ck
    factor:
      reg: PLLCKSELR
      field: DIVM2
    description: PLL2 pre-divider; ensures 1..16 MHz at ref2_ck.
  - name: DIVM3
    input: pllsrc_mux_out_ck
    output: ref3_ck
    factor:
      reg: PLLCKSELR
      field: DIVM3
    description: PLL3 pre-divider; ensures 1..16 MHz at ref3_ck.
  - name: PLL1_DIVP
    input: vco1_ck
    output: pll1_p_ck
    factor:
      reg: PLL1DIVR
      field: DIVP1
      notes: Enable with RCC_PLLCFGR.DIVP1EN.
    value: 1
    description: PLL1 P output divider.
  - name: PLL1_DIVQ
    input: vco1_ck
    output: pll1_q_ck
    factor:
      reg: PLL1DIVR
      field: DIVQ1
      notes: Enable with RCC_PLLCFGR.DIVQ1EN.
    value: 1
    description: PLL1 Q output divider.
  - name: PLL1_DIVR
    input: vco1_ck
    output: pll1_r_ck
    factor:
      reg: PLL1DIVR
      field: DIVR1
      notes: Enable with RCC_PLLCFGR.DIVR1EN.
    value: 1
    description: PLL1 R output divider.
  - name: PLL2_DIVP
    input: vco2_ck
    output: pll2_p_ck
    factor:
      reg: PLL2DIVR
      field: DIVP2
      notes: Enable with RCC_PLLCFGR.DIVP2EN.
    value: 1
    description: PLL2 P output divider.
  - name: PLL2_DIVQ
    input: vco2_ck
    output: pll2_q_ck
    factor:
      reg: PLL2DIVR
      field: DIVQ2
      notes: Enable with RCC_PLLCFGR.DIVQ2EN.
    value: 1
    description: PLL2 Q output divider.
  - name: PLL2_DIVR
    input: vco2_ck
    output: pll2_r_ck
    factor:
      reg: PLL2DIVR
      field: DIVR2
      notes: Enable with RCC_PLLCFGR.DIVR2EN.
    value: 1
    description: PLL2 R output divider.
  - name: PLL3_DIVP
    input: vco3_ck
    output: pll3_p_ck
    factor:
      reg: PLL3DIVR
      field: DIVP3
      notes: Enable with RCC_PLLCFGR.DIVP3EN.
    value: 1
    description: PLL3 P output divider.
  - name: PLL3_DIVQ
    input: vco3_ck
    output: pll3_q_ck
    factor:
      reg: PLL3DIVR
      field: DIVQ3
      notes: Enable with RCC_PLLCFGR.DIVQ3EN.
    value: 1
    description: PLL3 Q output divider.
  - name: PLL3_DIVR
    input: vco3_ck
    output: pll3_r_ck
    factor:
      reg: PLL3DIVR
      field: DIVR3
      notes: Enable with RCC_PLLCFGR.DIVR3EN.
    value: 1
    description: PLL3 R output divider.
  - name: RTCPRE
    input: hse_ck
    output: hse_1M_ck
    factor:
      reg: CFGR
      field: RTCPRE
    description: RTC clock prescaler.
  - name: D1CPRE
    input: sys_ck
    output: sys_d1cpre_ck
    factor:
      reg: D1CFGR
      field: D1CPRE
      values: [1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 8, 16, 64, 128, 256, 512]
    description: CPU1 prescaler (D1 domain).
  - name: HPRE
    input: sys_d1cpre_ck
    output: sys_hpre_ck
    factor:
      reg: D1CFGR
      field: HPRE
      values: [1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 8, 16, 64, 128, 256, 512]
    description: AXI/AHB bus matrix prescaler.
  - name: FCLK_C1
    input: rcc_c1_ck
    output: rcc_fclk_c1
    value: 8
    description: CPU1 SysTick prescaler.
  - name: FCLK_C2
    input: rcc_c2_ck
    output: rcc_fclk_c2
    value: 8
    description: CPU2 SysTick prescaler.
  - name: D1PPRE
    input: sys_hpre_ck
    output: rcc_pclk3
    factor:
      reg: D1CFGR
      field: D1PPRE
      values: [1, 1, 1, 1, 2, 4, 8, 16]
    description: APB3 prescaler.
  - name: D2PPRE1
    input: sys_hpre_ck
    output: rcc_pclk1
    factor:
      reg: D2CFGR
      field: D2PPRE1
      values: [1, 1, 1, 1, 2, 4, 8, 16]
    description: APB1 prescaler.
  - name: D2PPRE2
    input: sys_hpre_ck
    output: rcc_pclk2
    factor:
      reg: D2CFGR
      field: D2PPRE2
      values: [1, 1, 1, 1, 2, 4, 8, 16]
    description: APB2 prescaler.
  - name: D3PPRE
    input: sys_hpre_ck
    output: rcc_pclk4
    factor:
      reg: D3CFGR
      field: D3PPRE
      values: [1, 1, 1, 1, 2, 4, 8, 16]
    description: APB4 prescaler (D3 domain).
  - name: MCO1PRE
    input: mco1_sel_ck
    output: mco1_ck
    factor:
      reg: CFGR
      field: MCO1PRE
    description: MCO1 prescaler.
  - name: MCO2PRE
    input: mco2_sel_ck
    output: mco2_ck
    factor:
      reg: CFGR
      field: MCO2PRE
    description: MCO2 prescaler.
  - name: CSI122
    input: csi_ker_ck
    output: csi_122_ck
    value: 122
    description: CSI / 122 divider.
muxes:
  - name: PLLSRC_mux
    output: pllsrc_mux_out_ck
    inputs:
      - hsi_ck
      - csi_ck
      - hse_ck
      - ""
    control:
      reg: PLLCKSELR
      field: PLLSRC
      notes: Set '11' (none) if no PLL is used to save power.
    description: Common PLL source selection feeding DIVM1/2/3.
  - name: SYSCLK_mux
    output: sys_ck
    inputs:
      - hsi_ck
      - csi_ck
      - hse_ck
      - pll1_p_ck
    control:
      reg: CFGR
      field: SW
    description: System clock source selection (status in CFGR.SWS).
  - name: RTCSRC
    output: rtc_sel_ck
    inputs:
      - ""
      - lse_ck
      - lsi_ck
      - hse_1M_ck
    control:
      reg: BDCR
      field: RTCSRC
    description: RTC clock source selection.
  - name: MCO1SEL
    output: mco1_sel_ck
    inputs:
      - hsi_ck
      - lse_ck
      - hse_ck
      - pll1_q_ck
      - hsi48_ck
      - ""
      - ""
      - ""
    control:
      reg: CFGR
      field: MCO1SEL
    description: MCO1 source selection.
  - name: MCO2SEL
    output: mco2_sel_ck
    inputs:
      - sys_ck
      - pll2_p_ck
      - hse_ck
      - pll1_p_ck
      - csi_ck
      - lsi_ck
      - ""
      - ""
    control:
      reg: CFGR
      field: MCO2SEL
    description: MCO2 source selection.
  - name: CKPERSRC
    output: per_ck
    inputs:
      - hsi_ker_ck
      - csi_ker_ck
      - hse_ck
      - ""
    control:
      reg: D1CCIPR
      field: CKPERSRC
    description: Peripheral clock source selection.
  - name: LPTIM1SEL
    output: lptim1_sel_ck
    inputs:
      - rcc_pclk1
      - pll2_p_ck
      - pll3_r_ck
      - lse_ck
      - lsi_ck
      - per_ck
      - ""
      - ""
    control:
      reg: D2CCIP2R
      field: LPTIM1SRC
    description: LPTIM1 kernel clock source selection.
  - name: LPTIM2SEL
    output: lptim2_sel_ck
    inputs:
      - rcc_pclk4
      - pll2_p_ck
      - pll3_r_ck
      - lse_ck
      - lsi_ck
      - per_ck
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: LPTIM2SRC
    description: LPTIM2 kernel clock source selection.
  - name: LPTIM345SEL
    output: lptim345_sel_ck
    inputs:
      - rcc_pclk4
      - pll2_p_ck
      - pll3_r_ck
      - lse_ck
      - lsi_ck
      - per_ck
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: LPTIM345SRC
    description: LPTIM3,4,5 kernel clock source selection.
  - name: USART16SEL
    output: usart16_sel_ck
    inputs:
      - rcc_pclk2
      - pll2_q_ck
      - pll3_q_ck
      - hsi_ker_ck
      - csi_ker_ck
      - lse_ck
      - ""
      - ""
    control:
      reg: D2CCIP2R
      field: USART16SRC
    description: USART1,6 kernel clock source selection.
  - name: USART234578SEL
    output: usart234578_sel_ck
    inputs:
      - rcc_pclk1
      - pll2_q_ck
      - pll3_q_ck
      - hsi_ker_ck
      - csi_ker_ck
      - lse_ck
      - ""
      - ""
    control:
      reg: D2CCIP2R
      field: USART234578SRC
    description: USART2,3,4,5,7,8 kernel clock source selection.
  - name: LPUART1SEL
    output: lpuart_sel_ck
    inputs:
      - rcc_pclk4
      - pll2_q_ck
      - pll3_q_ck
      - hsi_ker_ck
      - csi_ker_ck
      - lse_ck
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: LPUART1SRC
    description: LPUART1 kernel clock source selection.
  - name: QSPISEL
    output: quadspi_sel_ck
    inputs:
      - rcc_hclk3
      - pll1_q_ck
      - pll2_r_ck
      - per_ck
    control:
      reg: D1CCIPR
      field: QSPISRC
    description: QUADSPI clock source selection.
  - name: I2C123SEL
    output: i2c123_sel_ck
    inputs:
      - rcc_pclk1
      - pll3_r_ck
      - hsi_ker_ck
      - csi_ker_ck
    control:
      reg: D2CCIP2R
      field: I2C123SRC
    description: I2C1,2,3 clock source selection.
  - name: I2C4SEL
    output: i2c4_sel_ck
    inputs:
      - rcc_pclk4
      - pll3_r_ck
      - hsi_ker_ck
      - csi_ker_ck
    control:
      reg: D3CCIPR
      field: I2C4SRC
    description: I2C4 clock source selection.
  - name: SAI4ASEL
    output: sai4_a_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_p_ck
      - pll3_p_ck
      - i2s_ckin
      - per_ck
      - ""
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: SAI4ASRC
    description: SAI4A clock source selection.
  - name: SAI4BSEL
    output: sai4_b_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_p_ck
      - pll3_p_ck
      - i2s_ckin
      - per_ck
      - ""
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: SAI4BSRC
    description: SAI4B clock source selection.
  - name: SAI23SEL
    output: sai23_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_p_ck
      - pll3_p_ck
      - i2s_ckin
      - per_ck
      - ""
      - ""
      - ""
    control:
      reg: D2CCIP1R
      field: SAI23SRC
    description: SAI2,3 clock source selection.
  - name: SAI1SEL
    output: sai1_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_p_ck
      - pll3_p_ck
      - i2s_ckin
      - per_ck
      - ""
      - ""
      - ""
    control:
      reg: D2CCIP1R
      field: SAI1SRC
    description: SAI1 clock source selection.
  - name: DFSDM1SEL
    output: dfsdm_sel_ck
    inputs:
      - rcc_pclk2
      - sys_ck
    control:
      reg: D2CCIP1R
      field: DFSDM1SRC
    description: DFSDM1 clock source selection.
  - name: SPDIFSEL
    output: spdif_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_r_ck
      - pll3_r_ck
      - hsi_ker_ck
    control:
      reg: D2CCIP1R
      field: SPDIFSRC
    description: SPDIF clock source selection.
  - name: SPI123SEL
    output: spi123_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_p_ck
      - pll3_p_ck
      - i2s_ckin
      - per_ck
      - ""
      - ""
      - ""
    control:
      reg: D2CCIP1R
      field: SPI123SRC
    description: SPI1,2,3 clock source selection.
  - name: SPI45SEL
    output: spi45_sel_ck
    inputs:
      - rcc_pclk2
      - pll2_q_ck
      - pll3_q_ck
      - hsi_ker_ck
      - csi_ker_ck
      - hse_ck
      - ""
      - ""
    control:
      reg: D2CCIP1R
      field: SPI45SRC
    description: SPI4,5 clock source selection.
  - name: SPI6SEL
    output: spi6_sel_ck
    inputs:
      - rcc_pclk4
      - pll2_q_ck
      - pll3_q_ck
      - hsi_ker_ck
      - csi_ker_ck
      - hse_ck
      - ""
      - ""
    control:
      reg: D3CCIPR
      field: SPI6SRC
    description: SPI6 clock source selection.
  - name: DSISRC
    output: blclk_sel_ck
    inputs:
      - dsi_phy_ck
      - pll2_q_ck
    control:
      reg: D1CCIPR
      field: DSISRC
    description: DSI clock source selection.
  - name: SDMMCSRC
    output: sdmmc_sel_ck
    inputs:
      - pll1_q_ck
      - pll2_r_ck
    control:
      reg: D1CCIPR
      field: SDMMCSRC
    description: SDMMC clock source selection.
  - name: FMCSRC
    output: fmc_sel_ck
    inputs:
      - rcc_hclk3
      - pll1_q_ck
      - pll2_r_ck
      - per_ck
    control:
      reg: D1CCIPR
      field: FMCSRC
    description: FMC clock source selection.
  - name: ADCSEL
    output: adc_sel_ck
    inputs:
      - pll2_p_ck
      - pll3_r_ck
      - per_ck
      - ""
    control:
      reg: D3CCIPR
      field: ADCSRC
    description: ADC clock source selection.
  - name: SWPSEL
    output: swp_sel_ck
    inputs:
      - rcc_pclk1
      - hsi_ker_ck
    control:
      reg: D2CCIP1R
      field: SWPSRC
    description: SWPMI clock source selection.
  - name: RNGSEL
    output: rng_sel_ck
    inputs:
      - hsi48_ck
      - pll1_q_ck
      - lse_ck
      - lsi_ck
    control:
      reg: D2CCIP2R
      field: RNGSRC
    description: RNG clock source selection.
  - name: FDCANSEL
    output: fdcan_sel_ck
    inputs:
      - hse_ck
      - pll1_q_ck
      - pll2_q_ck
      - ""
    control:
      reg: D2CCIP1R
      field: FDCANSRC
    description: FDCAN clock source selection.
  - name: CECSEL
    output: cec_sel_ck
    inputs:
      - lse_ck
      - lsi_ck
      - csi_122_ck
      - ""
    control:
      reg: D2CCIP2R
      field: CECSRC
    description: HDMI-CEC clock source selection.
gates:
  - name: RTCEN
    output: rcc_rtc_ck
    input: rtc_sel_ck
    control:
      reg: BDCR
      field: RTCEN
    description: RTC clock gate.
  - name: HSIEN
    output: hsi_ck
    input: hsi_osc
    description: HSI clock gate.
  - name: HSIKEREN
    output: hsi_ker_ck
    input: hsi_osc
    description: HSI kernel clock gate.
  - name: CSIEN
    output: csi_ck
    input: csi_osc
    description: CSI clock gate.
  - name: CSIKEREN
    output: csi_ker_ck
    input: csi_osc
    description: CSI kernel clock gate.
  - name: RCC_C1EN
    output: rcc_c1_ck
    input: sys_d1cpre_ck
    description: CPU1 clock gate.
  - name: RCC_C2EN
    output: rcc_c2_ck
    input: sys_hpre_ck
    description: CPU2 clock gate.
  - name: RCC_ACLKEN
    output: rcc_aclk
    input: sys_hpre_ck
    description: ACLK clock gate.
  - name: RCC_HCLK3EN
    output: rcc_hclk3
    input: sys_hpre_ck
    description: HCLK3 clock gate.
  - name: RCC_HCLK2EN
    output: rcc_hclk2
    input: sys_hpre_ck
    description: HCLK2 clock gate.
  - name: RCC_HCLK1EN
    output: rcc_hclk1
    input: sys_hpre_ck
    description: HCLK1 clock gate.
  - name: RCC_HCLK4EN
    output: rcc_hclk4
    input: sys_hpre_ck
    description: HCLK4 clock gate.
  - name: DMA1EN
    output: dma1_hclk
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: DMA1EN
    description: DMA1 bus interface clock gate (AHB1).
  - name: ADC12BUSEN
    output: adc12_bus_ck
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: ADC12EN
    description: ADC1/2 bus interface clock gate; ADC kernel clock selected separately.
  - name: USB1OTGEN
    output: usb1otg_bus_ck
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: USB1OTGEN
    description: USB1 OTG HS peripheral bus clock gate.
  - name: ETH1MACEN
    output: eth1mac_bus_ck
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: ETH1MACEN
    description: Ethernet MAC bus interface clock gate.
  - name: ETH1TXEN
    output: eth1tx_ck
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: ETH1TXEN
    description: Ethernet TX clock gate.
  - name: ETH1RXEN
    output: eth1rx_ck
    input: rcc_hclk1
    control:
      reg: C[0].AHB1ENR
      field: ETH1RXEN
    description: Ethernet RX clock gate.
  - name: LPTIM1EN
    output: lptim1_ker_ck
    input: lptim1_sel_ck
    control:
      reg: C[0].APB1LENR
      field: LPTIM1EN
    description: LPTIMER1 clock gate.
  - name: LPTIM2EN
    output: lptim2_ker_ck
    input: lptim2_sel_ck
    control:
      reg: C[0].APB4ENR
      field: LPTIM2EN
    description: LPTIMER2 clock gate.
  - name: LPTIM3EN
    output: lptim3_ker_ck
    input: lptim345_sel_ck
    control:
      reg: C[0].APB4ENR
      field: LPTIM3EN
    description: LPTIMER3 clock gate.
  - name: LPTIM4EN
    output: lptim4_ker_ck
    input: lptim345_sel_ck
    control:
      reg: C[0].APB4ENR
      field: LPTIM4EN
    description: LPTIMER4 clock gate.
  - name: LPTIM5EN
    output: lptim5_ker_ck
    input: lptim345_sel_ck
    control:
      reg: C[0].APB4ENR
      field: LPTIM5EN
    description: LPTIMER5 clock gate.
  - name: USART1EN
    output: usart1_ker_ck
    input: usart16_sel_ck
    control:
      reg: C[0].APB2ENR
      field: USART1EN
    description: USART1 clock gate.
  - name: USART6EN
    output: usart6_ker_ck
    input: usart16_sel_ck
    control:
      reg: C[0].APB2ENR
      field: USART6EN
    description: USART6 clock gate.
  - name: USART2EN
    output: usart2_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: USART2EN
    description: USART2 clock gate.
  - name: USART3EN
    output: usart3_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: USART3EN
    description: USART3 clock gate.
  - name: UART4EN
    output: uart4_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: UART4EN
    description: UART4 clock gate.
  - name: UART5EN
    output: uart5_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: UART5EN
    description: UART5 clock gate.
  - name: UART7EN
    output: uart7_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: USART7EN
    description: UART7 clock gate.
  - name: UART8EN
    output: uart8_ker_ck
    input: usart234578_sel_ck
    control:
      reg: C[0].APB1LENR
      field: USART8EN
    description: UART8 clock gate.
  - name: LPUART1EN
    output: lpuart_ker_ck
    input: lpuart_sel_ck
    control:
      reg: C[0].APB4ENR
      field: LPUART1EN
    description: LPUART1 clock gate.
  - name: QSPIEN
    output: quadspi_ker_ck
    input: quadspi_sel_ck
    control:
      reg: C[0].AHB3ENR
      field: QSPIEN
    description: Quadspi clock gate.
  - name: I2C1EN
    output: i2c1_ker_ck
    input: i2c123_sel_ck
    control:
      reg: C[0].APB1LENR
      field: I2C1EN
    description: I2C1 clock gate.
  - name: I2C2EN
    output: i2c2_ker_ck
    input: i2c123_sel_ck
    control:
      reg: C[0].APB1LENR
      field: I2C2EN
    description: I2C2 clock gate.
  - name: I2C3EN
    output: i2c3_ker_ck
    input: i2c123_sel_ck
    control:
      reg: C[0].APB1LENR
      field: I2C3EN
    description: I2C3 clock gate.
  - name: I2C4EN
    output: i2c4_ker_ck
    input: i2c4_sel_ck
    control:
      reg: C[0].APB4ENR
      field: I2C4EN
    description: I2C4 clock gate.
  - name: SAI4AEN
    output: sai4_a_ker_ck
    input: sai4_a_sel_ck
    control:
      reg: C[0].APB4ENR
      field: SAI4EN
    description: SAI4A clock gate.
  - name: SAI4BEN
    output: sai4_b_ker_ck
    input: sai4_b_sel_ck
    control:
      reg: C[0].APB4ENR
      field: SAI4EN
    description: SAI4B clock gate.
  - name: SAI3EN
    output: sai3_ker_ck
    input: sai23_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SAI3EN
    description: SAI3 clock gate.
  - name: SAI2EN
    output: sai2_ker_ck
    input: sai23_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SAI2EN
    description: SAI2 clock gate.
  - name: SAI1EN
    output: sai1_ker_ck
    input: sai1_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SAI1EN
    description: SAI1 clock gate.
  - name: DFSDMEN
    output: dfsdm_ck
    input: dfsdm_sel_ck
    control:
      instance: DFSDM
      reg: CH[0].CFGR1
      field: DFSDMEN
    description: DFSDM clock gate.
  - name: DFSDMAEN
    output: dfsdm_ack
    input: sai1_sel_ck
    control:
      instance: DFSDM
      reg: CH[0].CFGR1
      field: DFSDMEN
    description: DFSDM A clock gate.
  - name: SPDIFRXEN
    output: spdifrx_ker_ck
    input: spdif_sel_ck
    control:
      reg: C[0].APB1LENR
      field: SPDIFRXEN
    description: SPDIFRX clock gate.
  - name: SPI3EN
    output: spi3_ker_ck
    input: spi123_sel_ck
    control:
      reg: C[0].APB1LENR
      field: SPI3EN
    description: SPI3 clock gate.
  - name: SPI2EN
    output: spi2_ker_ck
    input: spi123_sel_ck
    control:
      reg: C[0].APB1LENR
      field: SPI2EN
    description: SPI2 clock gate.
  - name: SPI1EN
    output: spi1_ker_ck
    input: spi123_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SPI1EN
    description: SPI1 clock gate.
  - name: SPI4EN
    output: spi4_ker_ck
    input: spi45_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SPI4EN
    description: SPI4 clock gate.
  - name: SPI5EN
    output: spi5_ker_ck
    input: spi45_sel_ck
    control:
      reg: C[0].APB2ENR
      field: SPI5EN
    description: SPI5 clock gate.
  - name: SPI6EN
    output: spi6_ker_ck
    input: spi6_sel_ck
    control:
      reg: C[0].APB4ENR
      field: SPI6EN
    description: SPI6 clock gate.
  - name: LTDCEN
    output: ltdc_ker_ck
    input: pll3_r_ck
    control:
      reg: C[0].APB3ENR
      field: LTDCEN
    description: LTDC clock gate.
  - name: DSIEN
    output: blclk_ck
    input: blclk_sel_ck
    control:
      reg: C[0].APB3ENR
      field: DSIEN
    description: DSI clock gate.
  - name: SDMMC1EN
    output: sdmmc1_ker_ck
    input: sdmmc_sel_ck
    control:
      reg: C[0].AHB3ENR
      field: SDMMC1EN
    description: SDMMC1 clock gate.
  - name: SDMMC2EN
    output: sdmmc2_ker_ck
    input: sdmmc_sel_ck
    control:
      reg: C[0].AHB2ENR
      field: SDMMC2EN
    description: SDMMC2 clock gate.
  - name: FMCEN
    output: fmc_ker_ck
    input: fmc_sel_ck
    control:
      reg: C[0].AHB3ENR
      field: FMCEN
    description: FMC clock gate.
  - name: ADC3EN
    output: adc3_ker_ck
    input: adc_sel_ck
    control:
      reg: C[0].AHB4ENR
      field: ADC3EN
    description: ADC3 clock gate.
  - name: ADC12EN
    output: adc12_ker_ck
    input: adc_sel_ck
    control:
      reg: C[0].AHB1ENR
      field: ADC12EN
    description: ADC1,2 clock gate.
  - name: SWPEN
    output: swp_ker_ck
    input: swp_sel_ck
    control:
      reg: C[0].APB1HENR
      field: SWPEN
    description: SWPMI clock gate.
  - name: RNGEN
    output: rng_ker_ck
    input: rng_sel_ck
    control:
      reg: C[0].AHB2ENR
      field: RNGEN
    description: RNG clock gate.
  - name: FDCANEN
    output: fdcan_ker_ck
    input: fdcan_sel_ck
    control:
      reg: C[0].APB1HENR
      field: FDCANEN
    description: FDCAN clock gate.
  - name: CECEN
    output: cec_ker_ck
    input: cec_sel_ck
    control:
      reg: C[0].APB1LENR
      field: HDMICECEN
    description: HDMI-CEC clock gate.
