# Created from RP2350.svd (Rev 0.1)

name: CORESIGHT_TRACE
description: Coresight block - RP specific registers
registers:
  - name: CTRL_STATUS
    addressOffset: 0
    description: Control and status register
    resetValue: 1
    fields:
      - name: TRACE_CAPTURE_FIFO_FLUSH
        description: "Set to 1 to continuously hold the trace FIFO in a flushed state
          and prevent overflow.\n\n                            Before clearing this
          flag, configure and start a DMA channel with the correct DREQ for the TRACE_CAPTURE_FIFO
          register.\n\n                            Clear this flag to begin sampling
          trace data, and set once again once the trace capture buffer is full. You
          must configure the TPIU in order to generate trace packets to be captured,
          as well as components like the ETM further upstream to generate the event
          stream propagated to the TPIU."
        access: read-write
        bitOffset: 0
        bitWidth: 1
      - name: TRACE_CAPTURE_FIFO_OVERFLOW
        description: This status flag is set high when trace data has been 
          dropped due to the FIFO being full at the point trace data was 
          sampled. Write 1 to acknowledge and clear the bit.
        access: read-write
        bitOffset: 1
        bitWidth: 1
  - name: TRACE_CAPTURE_FIFO
    addressOffset: 4
    description: FIFO for trace data captured from the TPIU
    resetValue: 0
    fields:
      - name: RDATA
        description: "Read from an 8 x 32-bit FIFO containing trace data captured
          from the TPIU.\n\n                            Hardware pushes to the FIFO
          on rising edges of clk_sys, when either of the following is true:\n\n  \
          \                          * TPIU TRACECTL output is low (normal trace data)\n\
          \n                            * TPIU TRACETCL output is high, and TPIU TRACEDATA0
          and TRACEDATA1 are both low (trigger packet)\n\n                       \
          \     These conditions are in accordance with Arm Coresight Architecture
          Spec v3.0 section D3.3.3: Decoding requirements for Trace Capture Devices\n\
          \n                            The data captured into the FIFO is the full
          32-bit TRACEDATA bus output by the TPIU. Note that the TPIU is a DDR output
          at half of clk_sys, therefore this interface can capture the full 32-bit
          TPIU DDR output bandwidth as it samples once per active edge of the TPIU
          output clock."
        access: read-only
        readAction: modify
        bitOffset: 0
        bitWidth: 32
addressBlocks:
  - offset: 0
    size: 8
    usage: registers
