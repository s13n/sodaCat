name: SPI
description: SPI address block description
groupName: SPI
registers:
  - name: CR1
    displayName: CR1
    description: SPI control register 1
    addressOffset: 0
    size: 16
    resetValue: 0
    resetMask: 65535
    fields:
      - name: CPHA
        description: "Clock phase \nNote: This bit should not be changed when communication is ongoing.\nNote: This bit is not used in SPI TI mode except the case when CRC is applied at TI mode."
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: The first clock transition is the first data capture edge
            value: 0
          - name: B_0x1
            description: The second clock transition is the first data capture edge
            value: 1
      - name: CPOL
        description: "Clock polarity \nNote: This bit should not be changed when communication is ongoing.\nNote: This bit is not used in SPI TI mode except the case when CRC is applied at TI mode."
        bitOffset: 1
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: CK to 0 when idle
            value: 0
          - name: B_0x1
            description: CK to 1 when idle
            value: 1
      - name: MSTR
        description: "Master selection \nNote: This bit should not be changed when communication is ongoing."
        bitOffset: 2
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Slave configuration
            value: 0
          - name: B_0x1
            description: Master configuration
            value: 1
      - name: BR
        description: "Baud rate control\nNote: These bits should not be changed when communication is ongoing."
        bitOffset: 3
        bitWidth: 3
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: f<sub>PCLK</sub>/2
            value: 0
          - name: B_0x1
            description: f<sub>PCLK</sub>/4
            value: 1
          - name: B_0x2
            description: f<sub>PCLK</sub>/8
            value: 2
          - name: B_0x3
            description: f<sub>PCLK</sub>/16
            value: 3
          - name: B_0x4
            description: f<sub>PCLK</sub>/32
            value: 4
          - name: B_0x5
            description: f<sub>PCLK</sub>/64
            value: 5
          - name: B_0x6
            description: f<sub>PCLK</sub>/128
            value: 6
          - name: B_0x7
            description: f<sub>PCLK</sub>/256
            value: 7
      - name: SPE
        description: "SPI enable\nNote: When disabling the SPI, follow the procedure described in Procedure for disabling the SPI on page1954."
        bitOffset: 6
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Peripheral disabled
            value: 0
          - name: B_0x1
            description: Peripheral enabled
            value: 1
      - name: LSBFIRST
        description: "Frame format\nNote: 1. This bit should not be changed when communication is ongoing.\nNote: 2. This bit is not used in SPI TI mode."
        bitOffset: 7
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: data is transmitted / received with the MSB first
            value: 0
          - name: B_0x1
            description: data is transmitted / received with the LSB first
            value: 1
      - name: SSI
        description: "Internal slave select\nThis bit has an effect only when the SSM bit is set. The value of this bit is forced onto the NSS pin and the I/O value of the NSS pin is ignored.\nNote: This bit is not used in SPI TI mode."
        bitOffset: 8
        bitWidth: 1
        access: read-write
      - name: SSM
        description: "Software slave management\nWhen the SSM bit is set, the NSS pin input is replaced with the value from the SSI bit.\nNote: This bit is not used in SPI TI mode."
        bitOffset: 9
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Software slave management disabled
            value: 0
          - name: B_0x1
            description: Software slave management enabled
            value: 1
      - name: RXONLY
        description: "Receive only mode enabled. \nThis bit enables simplex communication using a single unidirectional line to receive data exclusively. Keep BIDIMODE bit clear when receive only mode is active.This bit is also useful in a multislave system in which this particular slave is not accessed, the output from the accessed slave is not corrupted."
        bitOffset: 10
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Full-duplex (Transmit and receive)
            value: 0
          - name: B_0x1
            description: Output disabled (Receive-only mode)
            value: 1
      - name: CRCL
        description: "CRC length\nThis bit is set and cleared by software to select the CRC length.\nNote: This bit should be written only when SPI is disabled (SPE = 0) for correct operation."
        bitOffset: 11
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: 8-bit CRC length
            value: 0
          - name: B_0x1
            description: 16-bit CRC length
            value: 1
      - name: CRCNEXT
        description: "Transmit CRC next\nNote: This bit has to be written as soon as the last data is written in the SPI_DR register."
        bitOffset: 12
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Next transmit value is from Tx buffer.
            value: 0
          - name: B_0x1
            description: Next transmit value is from Tx CRC register.
            value: 1
      - name: CRCEN
        description: "Hardware CRC calculation enable\nNote: This bit should be written only when SPI is disabled (SPE = 0) for correct operation."
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: CRC calculation disabled
            value: 0
          - name: B_0x1
            description: CRC calculation enabled
            value: 1
      - name: BIDIOE
        description: "Output enable in bidirectional mode\nThis bit combined with the BIDIMODE bit selects the direction of transfer in bidirectional mode.\nNote: In master mode, the MOSI pin is used and in slave mode, the MISO pin is used."
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Output disabled (receive-only mode)
            value: 0
          - name: B_0x1
            description: Output enabled (transmit-only mode)
            value: 1
      - name: BIDIMODE
        description: "Bidirectional data mode enable. \nThis bit enables half-duplex communication using common single bidirectional data line. Keep RXONLY bit clear when bidirectional mode is active."
        bitOffset: 15
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: 2-line unidirectional data mode selected
            value: 0
          - name: B_0x1
            description: 1-line bidirectional data mode selected
            value: 1
  - name: CR2
    displayName: CR2
    description: SPI control register 2
    addressOffset: 4
    size: 16
    resetValue: 1792
    resetMask: 65535
    fields:
      - name: RXDMAEN
        description: "Rx buffer DMA enable\nWhen this bit is set, a DMA request is generated whenever the RXNE flag is set."
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Rx buffer DMA disabled
            value: 0
          - name: B_0x1
            description: Rx buffer DMA enabled
            value: 1
      - name: TXDMAEN
        description: "Tx buffer DMA enable\nWhen this bit is set, a DMA request is generated whenever the TXE flag is set."
        bitOffset: 1
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Tx buffer DMA disabled
            value: 0
          - name: B_0x1
            description: Tx buffer DMA enabled
            value: 1
      - name: SSOE
        description: "SS output enable\nNote: This bit is not used in SPI TI mode."
        bitOffset: 2
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SS output is disabled in master mode and the SPI interface can work in multimaster configuration
            value: 0
          - name: B_0x1
            description: SS output is enabled in master mode and when the SPI interface is enabled. The SPI interface cannot work in a multimaster environment.
            value: 1
      - name: NSSP
        description: "NSS pulse management\nThis bit is used in master mode only. it allows the SPI to generate an NSS pulse between two consecutive data when doing continuous transfers. In the case of a single data transfer, it forces the NSS pin high level after the transfer. \nIt has no meaning if CPHA = 1, or FRF = 1.\nNote: 1. This bit must be written only when the SPI is disabled (SPE=0).\nNote: 2. This bit is not used in SPI TI mode."
        bitOffset: 3
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: No NSS pulse
            value: 0
          - name: B_0x1
            description: NSS pulse generated
            value: 1
      - name: FRF
        description: "Frame format\n1 SPI TI mode\nNote: This bit must be written only when the SPI is disabled (SPE=0)."
        bitOffset: 4
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI Motorola mode
            value: 0
      - name: ERRIE
        description: "Error interrupt enable\nThis bit controls the generation of an interrupt when an error condition occurs (CRCERR, OVR, MODF in SPI mode, FRE at TI mode)."
        bitOffset: 5
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Error interrupt is masked
            value: 0
          - name: B_0x1
            description: Error interrupt is enabled
            value: 1
      - name: RXNEIE
        description: RX buffer not empty interrupt enable
        bitOffset: 6
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: RXNE interrupt masked
            value: 0
          - name: B_0x1
            description: RXNE interrupt not masked. Used to generate an interrupt request when the RXNE flag is set.
            value: 1
      - name: TXEIE
        description: Tx buffer empty interrupt enable
        bitOffset: 7
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: TXE interrupt masked
            value: 0
          - name: B_0x1
            description: TXE interrupt not masked. Used to generate an interrupt request when the TXE flag is set.
            value: 1
      - name: DS
        description: "Data size\nThese bits configure the data length for SPI transfers.\nIf software attempts to write one of the Not used values, they are forced to the value 0111\n(8-bit)"
        bitOffset: 8
        bitWidth: 4
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Not used
            value: 0
          - name: B_0x1
            description: Not used
            value: 1
          - name: B_0x2
            description: Not used
            value: 2
          - name: B_0x3
            description: 4-bit
            value: 3
          - name: B_0x4
            description: 5-bit
            value: 4
          - name: B_0x5
            description: 6-bit
            value: 5
          - name: B_0x6
            description: 7-bit
            value: 6
          - name: B_0x7
            description: 8-bit
            value: 7
          - name: B_0x8
            description: 9-bit
            value: 8
          - name: B_0x9
            description: 10-bit
            value: 9
          - name: B_0xA
            description: 11-bit
            value: 10
          - name: B_0xB
            description: 12-bit
            value: 11
          - name: B_0xC
            description: 13-bit
            value: 12
          - name: B_0xD
            description: 14-bit
            value: 13
          - name: B_0xE
            description: 15-bit
            value: 14
          - name: B_0xF
            description: 16-bit
            value: 15
      - name: FRXTH
        description: "FIFO reception threshold\nThis bit is used to set the threshold of the RXFIFO that triggers an RXNE event"
        bitOffset: 12
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: RXNE event is generated if the FIFO level is greater than or equal to 1/2 (16-bit)
            value: 0
          - name: B_0x1
            description: RXNE event is generated if the FIFO level is greater than or equal to 1/4 (8-bit)
            value: 1
      - name: LDMA_RX
        description: "Last DMA transfer for reception\nThis bit is used in data packing mode, to define if the total number of data to receive by DMA is odd or even. It has significance only if the RXDMAEN bit in the SPI_CR2 register is set and if packing mode is used (data length =< 8-bit and write access to SPI_DR is 16-bit wide). It has to be written when the SPI is disabled (SPE = 0 in the SPI_CR1 register).\nNote: Refer to Procedure for disabling the SPI on page1954 if the CRCEN bit is set."
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Number of data to transfer is even
            value: 0
          - name: B_0x1
            description: Number of data to transfer is odd
            value: 1
      - name: LDMA_TX
        description: "Last DMA transfer for transmission\nThis bit is used in data packing mode, to define if the total number of data to transmit by DMA is odd or even. It has significance only if the TXDMAEN bit in the SPI_CR2 register is set and if packing mode is used (data length =< 8-bit and write access to SPI_DR is 16-bit wide). It has to be written when the SPI is disabled (SPE = 0 in the SPI_CR1 register).\nNote: Refer to Procedure for disabling the SPI on page1954 if the CRCEN bit is set."
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Number of data to transfer is even
            value: 0
          - name: B_0x1
            description: Number of data to transfer is odd
            value: 1
  - name: SR
    displayName: SR
    description: SPI status register
    addressOffset: 8
    size: 16
    resetValue: 2
    resetMask: 65535
    fields:
      - name: RXNE
        description: Receive buffer not empty
        bitOffset: 0
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: Rx buffer empty
            value: 0
          - name: B_0x1
            description: Rx buffer not empty
            value: 1
      - name: TXE
        description: Transmit buffer empty
        bitOffset: 1
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: Tx buffer not empty
            value: 0
          - name: B_0x1
            description: Tx buffer empty
            value: 1
      - name: CRCERR
        description: "CRC error flag\nNote: This flag is set by hardware and cleared by software writing 0."
        bitOffset: 4
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: CRC value received matches the SPI_RXCRCR value
            value: 0
          - name: B_0x1
            description: CRC value received does not match the SPI_RXCRCR value
            value: 1
      - name: MODF
        description: "Mode fault\nThis flag is set by hardware and reset by a software sequence. Refer to Section1: Mode fault (MODF) on page1964 for the software sequence."
        bitOffset: 5
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No mode fault occurred
            value: 0
          - name: B_0x1
            description: Mode fault occurred
            value: 1
      - name: OVR
        description: "Overrun flag\nThis flag is set by hardware and reset by a software sequence."
        bitOffset: 6
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No overrun occurred
            value: 0
          - name: B_0x1
            description: Overrun occurred
            value: 1
      - name: BSY
        description: "Busy flag\nThis flag is set and cleared by hardware.\nNote: The BSY flag must be used with caution: refer to Section133.4.10: SPI status flags and Procedure for disabling the SPI on page1954."
        bitOffset: 7
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: SPI not busy
            value: 0
          - name: B_0x1
            description: SPI is busy in communication or Tx buffer is not empty
            value: 1
      - name: FRE
        description: "Frame format error\nThis flag is used for SPI in TI slave mode. Refer to Section133.4.11: SPI error flags.\nThis flag is set by hardware and reset when SPI_SR is read by software."
        bitOffset: 8
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No frame format error
            value: 0
          - name: B_0x1
            description: A frame format error occurred
            value: 1
      - name: FRLVL
        description: "FIFO reception level\nThese bits are set and cleared by hardware.\nNote: These bits are not used in SPI receive-only mode while CRC calculation is enabled."
        bitOffset: 9
        bitWidth: 2
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: FIFO empty
            value: 0
          - name: B_0x1
            description: 1/4 FIFO
            value: 1
          - name: B_0x2
            description: 1/2 FIFO
            value: 2
          - name: B_0x3
            description: FIFO full
            value: 3
      - name: FTLVL
        description: "FIFO transmission level\nThese bits are set and cleared by hardware."
        bitOffset: 11
        bitWidth: 2
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: FIFO empty
            value: 0
          - name: B_0x1
            description: 1/4 FIFO
            value: 1
          - name: B_0x2
            description: 1/2 FIFO
            value: 2
          - name: B_0x3
            description: FIFO full (considered as FULL when the FIFO threshold is greater than 1/2)
            value: 3
  - name: DR
    displayName: DR
    description: SPI data register
    addressOffset: 12
    size: 16
    resetValue: 0
    resetMask: 65535
    fields:
      - name: DR
        description: "Data register\nData received or to be transmitted\nThe data register serves as an interface between the Rx and Tx FIFOs. When the data register is read, RxFIFO is accessed while the write to data register accesses TxFIFO (See Section133.4.9: Data transmission and reception procedures).\nNote: Data is always right-aligned. Unused bits are ignored when writing to the register, and read as zero when the register is read. The Rx threshold setting must always correspond with the read access currently used."
        bitOffset: 0
        bitWidth: 16
        access: read-write
  - name: CRCPR
    displayName: CRCPR
    description: SPI CRC polynomial register
    addressOffset: 16
    size: 16
    resetValue: 7
    resetMask: 65535
    fields:
      - name: CRCPOLY
        description: "CRC polynomial register\nThis register contains the polynomial for the CRC calculation.\nThe CRC polynomial (0x0007) is the reset value of this register. Another polynomial can be configured as required."
        bitOffset: 0
        bitWidth: 16
        access: read-write
  - name: RXCRCR
    displayName: RXCRCR
    description: SPI Rx CRC register
    addressOffset: 20
    size: 16
    resetValue: 0
    resetMask: 65535
    fields:
      - name: RXCRC
        description: "Rx CRC register\nWhen CRC calculation is enabled, the RXCRC[15:0] bits contain the computed CRC value of the subsequently received bytes. This register is reset when the CRCEN bit in SPI_CR1 register is written to 1. The CRC is calculated serially using the polynomial programmed in the SPI_CRCPR register. \nOnly the 8 LSB bits are considered when the CRC frame format is set to be 8-bit length (CRCL bit in the SPI_CR1 is cleared). CRC calculation is done based on any CRC8 standard.\nThe entire 16-bits of this register are considered when a 16-bit CRC frame format is selected (CRCL bit in the SPI_CR1 register is set). CRC calculation is done based on any CRC16 standard.\nNote: A read to this register when the BSY Flag is set could return an incorrect value."
        bitOffset: 0
        bitWidth: 16
        access: read-only
  - name: TXCRCR
    displayName: TXCRCR
    description: SPI Tx CRC register
    addressOffset: 24
    size: 16
    resetValue: 0
    resetMask: 65535
    fields:
      - name: TXCRC
        description: "Tx CRC register\nWhen CRC calculation is enabled, the TXCRC[7:0] bits contain the computed CRC value of the subsequently transmitted bytes. This register is reset when the CRCEN bit of SPI_CR1 is written to 1. The CRC is calculated serially using the polynomial programmed in the SPI_CRCPR register.\nOnly the 8 LSB bits are considered when the CRC frame format is set to be 8-bit length (CRCL bit in the SPI_CR1 is cleared). CRC calculation is done based on any CRC8 standard.\nThe entire 16-bits of this register are considered when a 16-bit CRC frame format is selected (CRCL bit in the SPI_CR1 register is set). CRC calculation is done based on any CRC16 standard.\nNote: A read to this register when the BSY flag is set could return an incorrect value."
        bitOffset: 0
        bitWidth: 16
        access: read-only
addressBlocks:
  - offset: 0
    size: 1024
    usage: registers
interrupts:
  - name: INTR
    description: SPI1 global interrupt
