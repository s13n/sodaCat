name: QUADSPI
description: QUADSPI
groupName: QUADSPI
registers:
  - name: CR
    displayName: CR
    description: QUADSPI control register
    addressOffset: 0
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: EN
        description: Enable Enable the QUADSPI.
        bitOffset: 0
        bitWidth: 1
      - name: ABORT
        description: "Abort request This bit aborts the\n              on-going command\
          \ sequence. It is automatically reset\n              once the abort is complete.\
          \ This bit stops the\n              current transfer. In polling mode or\
          \ memory-mapped\n              mode, this bit also reset the APM bit or\
          \ the DM\n              bit."
        bitOffset: 1
        bitWidth: 1
      - name: DMAEN
        description: "DMA enable In indirect mode, DMA can be\n              used\
          \ to input or output data via the QUADSPI_DR\n              register. DMA\
          \ transfers are initiated when the FIFO\n              threshold flag, FTF,\
          \ is set."
        bitOffset: 2
        bitWidth: 1
      - name: TCEN
        description: "Timeout counter enable This bit is valid\n              only\
          \ when memory-mapped mode (FMODE = 11) is\n              selected. Activating\
          \ this bit causes the chip select\n              (nCS) to be released (and\
          \ thus reduces consumption)\n              if there has not been an access\
          \ after a certain\n              amount of time, where this time is defined\
          \ by\n              TIMEOUT[15:0] (QUADSPI_LPTR). Enable the timeout\n \
          \             counter. By default, the QUADSPI never stops its\n       \
          \       prefetch operation, keeping the previous read\n              operation\
          \ active with nCS maintained low, even if no\n              access to the\
          \ Flash memory occurs for a long time.\n              Since Flash memories\
          \ tend to consume more when nCS is\n              held low, the application\
          \ might want to activate the\n              timeout counter (TCEN = 1, QUADSPI_CR[3])\
          \ so that nCS\n              is released after a period of TIMEOUT[15:0]\n\
          \              (QUADSPI_LPTR) cycles have elapsed without an access\n  \
          \            since when the FIFO becomes full with prefetch data.\n    \
          \          This bit can be modified only when BUSY =\n              0."
        bitOffset: 3
        bitWidth: 1
      - name: SSHIFT
        description: "Sample shift By default, the QUADSPI\n              samples\
          \ data 1/2 of a CLK cycle after the data is\n              driven by the\
          \ Flash memory. This bit allows the data\n              is to be sampled\
          \ later in order to account for\n              external signal delays. Firmware\
          \ must assure that\n              SSHIFT = 0 when in DDR mode (when DDRM\
          \ = 1). This\n              field can be modified only when BUSY =\n   \
          \           0."
        bitOffset: 4
        bitWidth: 1
      - name: DFM
        description: "Dual-flash mode This bit activates\n              dual-flash\
          \ mode, where two external Flash memories\n              are used simultaneously\
          \ to double throughput and\n              capacity. This bit can be modified\
          \ only when BUSY =\n              0."
        bitOffset: 6
        bitWidth: 1
      - name: FSEL
        description: "Flash memory selection This bit selects\n              the Flash\
          \ memory to be addressed in single flash mode\n              (when DFM =\
          \ 0). This bit can be modified only when\n              BUSY = 0. This bit\
          \ is ignored when DFM =\n              1."
        bitOffset: 7
        bitWidth: 1
      - name: FTHRES
        description: "FIFO threshold level Defines, in\n              indirect mode,\
          \ the threshold number of bytes in the\n              FIFO that will cause\
          \ the FIFO threshold flag (FTF,\n              QUADSPI_SR[2]) to be set.\
          \ In indirect write mode\n              (FMODE = 00): ... In indirect read\
          \ mode (FMODE = 01):\n              ... If DMAEN = 1, then the DMA controller\
          \ for the\n              corresponding channel must be disabled before\n\
          \              changing the FTHRES value."
        bitOffset: 8
        bitWidth: 5
      - name: TEIE
        description: "Transfer error interrupt enable This bit\n              enables\
          \ the transfer error interrupt."
        bitOffset: 16
        bitWidth: 1
      - name: TCIE
        description: "Transfer complete interrupt enable This\n              bit enables\
          \ the transfer complete\n              interrupt."
        bitOffset: 17
        bitWidth: 1
      - name: FTIE
        description: "FIFO threshold interrupt enable This bit\n              enables\
          \ the FIFO threshold interrupt."
        bitOffset: 18
        bitWidth: 1
      - name: SMIE
        description: "Status match interrupt enable This bit\n              enables\
          \ the status match interrupt."
        bitOffset: 19
        bitWidth: 1
      - name: TOIE
        description: "TimeOut interrupt enable This bit\n              enables the\
          \ TimeOut interrupt."
        bitOffset: 20
        bitWidth: 1
      - name: APMS
        description: "Automatic poll mode stop This bit\n              determines\
          \ if automatic polling is stopped after a\n              match. This bit\
          \ can be modified only when BUSY =\n              0."
        bitOffset: 22
        bitWidth: 1
      - name: PMM
        description: "Polling match mode This bit indicates\n              which method\
          \ should be used for determining a match\n              during automatic\
          \ polling mode. This bit can be\n              modified only when BUSY =\
          \ 0."
        bitOffset: 23
        bitWidth: 1
      - name: PRESCALER
        description: clock prescaler
        bitOffset: 24
        bitWidth: 8
  - name: DCR
    displayName: DCR
    description: "QUADSPI device configuration\n          register"
    addressOffset: 4
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: CKMODE
        description: "indicates the level that clk takes\n              between command"
        bitOffset: 0
        bitWidth: 1
      - name: CSHT
        description: "Chip select high time CSHT+1 defines the\n              minimum\
          \ number of CLK cycles which the chip select\n              (nCS) must remain\
          \ high between commands issued to the\n              Flash memory. ... This\
          \ field can be modified only\n              when BUSY = 0."
        bitOffset: 8
        bitWidth: 3
      - name: FSIZE
        description: "Flash memory size This field defines the\n              size\
          \ of external memory using the following formula:\n              Number\
          \ of bytes in Flash memory = 2[FSIZE+1] FSIZE+1\n              is effectively\
          \ the number of address bits required to\n              address the Flash\
          \ memory. The Flash memory capacity\n              can be up to 4GB (addressed\
          \ using 32 bits) in\n              indirect mode, but the addressable space\
          \ in\n              memory-mapped mode is limited to 256MB. If DFM = 1,\n\
          \              FSIZE indicates the total capacity of the two Flash\n   \
          \           memories together. This field can be modified only\n       \
          \       when BUSY = 0."
        bitOffset: 16
        bitWidth: 5
  - name: SR
    displayName: SR
    description: QUADSPI status register
    addressOffset: 8
    size: 32
    access: read-only
    resetValue: 0
    fields:
      - name: TEF
        description: "Transfer error flag This bit is set in\n              indirect\
          \ mode when an invalid address is being\n              accessed in indirect\
          \ mode. It is cleared by writing 1\n              to CTEF."
        bitOffset: 0
        bitWidth: 1
      - name: TCF
        description: "Transfer complete flag This bit is set\n              in indirect\
          \ mode when the programmed number of data\n              has been transferred\
          \ or in any mode when the transfer\n              has been aborted.It is\
          \ cleared by writing 1 to\n              CTCF."
        bitOffset: 1
        bitWidth: 1
      - name: FTF
        description: "FIFO threshold flag In indirect mode,\n              this bit\
          \ is set when the FIFO threshold has been\n              reached, or if\
          \ there is any data left in the FIFO\n              after reads from the\
          \ Flash memory are complete. It is\n              cleared automatically\
          \ as soon as threshold condition\n              is no longer true. In automatic\
          \ polling mode this bit\n              is set every time the status register\
          \ is read, and\n              the bit is cleared when the data register\
          \ is\n              read."
        bitOffset: 2
        bitWidth: 1
      - name: SMF
        description: "Status match flag This bit is set in\n              automatic\
          \ polling mode when the unmasked received\n              data matches the\
          \ corresponding bits in the match\n              register (QUADSPI_PSMAR).\
          \ It is cleared by writing 1\n              to CSMF."
        bitOffset: 3
        bitWidth: 1
      - name: TOF
        description: "Timeout flag This bit is set when\n              timeout occurs.\
          \ It is cleared by writing 1 to\n              CTOF."
        bitOffset: 4
        bitWidth: 1
      - name: BUSY
        description: "Busy This bit is set when an operation\n              is on\
          \ going. This bit clears automatically when the\n              operation\
          \ with the Flash memory is finished and the\n              FIFO is empty."
        bitOffset: 5
        bitWidth: 1
      - name: FLEVEL
        description: "FIFO level This field gives the number\n              of valid\
          \ bytes which are being held in the FIFO.\n              FLEVEL = 0 when\
          \ the FIFO is empty, and 16 when it is\n              full. In memory-mapped\
          \ mode and in automatic status\n              polling mode, FLEVEL is zero."
        bitOffset: 8
        bitWidth: 6
  - name: FCR
    displayName: FCR
    description: QUADSPI flag clear register
    addressOffset: 12
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: CTEF
        description: "Clear transfer error flag Writing 1\n              clears the\
          \ TEF flag in the QUADSPI_SR\n              register"
        bitOffset: 0
        bitWidth: 1
      - name: CTCF
        description: "Clear transfer complete flag Writing 1\n              clears\
          \ the TCF flag in the QUADSPI_SR\n              register"
        bitOffset: 1
        bitWidth: 1
      - name: CSMF
        description: "Clear status match flag Writing 1 clears\n              the\
          \ SMF flag in the QUADSPI_SR register"
        bitOffset: 3
        bitWidth: 1
      - name: CTOF
        description: "Clear timeout flag Writing 1 clears the\n              TOF flag\
          \ in the QUADSPI_SR register"
        bitOffset: 4
        bitWidth: 1
  - name: DLR
    displayName: DLR
    description: QUADSPI data length register
    addressOffset: 16
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: DL
        description: "Data length Number of data to be\n              retrieved (value+1)\
          \ in indirect and status-polling\n              modes. A value no greater\
          \ than 3 (indicating 4 bytes)\n              should be used for status-polling\
          \ mode. All 1s in\n              indirect mode means undefined length, where\
          \ QUADSPI\n              will continue until the end of memory, as defined\
          \ by\n              FSIZE. 0x0000_0000: 1 byte is to be transferred\n  \
          \            0x0000_0001: 2 bytes are to be transferred\n              0x0000_0002:\
          \ 3 bytes are to be transferred\n              0x0000_0003: 4 bytes are\
          \ to be transferred ...\n              0xFFFF_FFFD: 4,294,967,294 (4G-2)\
          \ bytes are to be\n              transferred 0xFFFF_FFFE: 4,294,967,295\
          \ (4G-1) bytes\n              are to be transferred 0xFFFF_FFFF: undefined\
          \ length\n              -- all bytes until the end of Flash memory (as\n\
          \              defined by FSIZE) are to be transferred. Continue\n     \
          \         reading indefinitely if FSIZE = 0x1F. DL[0] is stuck\n       \
          \       at 1 in dual-flash mode (DFM = 1) even when 0 is\n             \
          \ written to this bit, thus assuring that each access\n              transfers\
          \ an even number of bytes. This field has no\n              effect when\
          \ in memory-mapped mode (FMODE = 10). This\n              field can be written\
          \ only when BUSY =\n              0."
        bitOffset: 0
        bitWidth: 32
  - name: CCR
    displayName: CCR
    description: "QUADSPI communication configuration\n          register"
    addressOffset: 20
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: INSTRUCTION
        description: "Instruction Instruction to be send to\n              the external\
          \ SPI device. This field can be written\n              only when BUSY =\
          \ 0."
        bitOffset: 0
        bitWidth: 8
      - name: IMODE
        description: "Instruction mode This field defines the\n              instruction\
          \ phase mode of operation: This field can\n              be written only\
          \ when BUSY = 0."
        bitOffset: 8
        bitWidth: 2
      - name: ADMODE
        description: "Address mode This field defines the\n              address phase\
          \ mode of operation: This field can be\n              written only when\
          \ BUSY = 0."
        bitOffset: 10
        bitWidth: 2
      - name: ADSIZE
        description: "Address size This bit defines address\n              size: This\
          \ field can be written only when BUSY =\n              0."
        bitOffset: 12
        bitWidth: 2
      - name: ABMODE
        description: "Alternate bytes mode This field defines\n              the alternate-bytes\
          \ phase mode of operation: This\n              field can be written only\
          \ when BUSY =\n              0."
        bitOffset: 14
        bitWidth: 2
      - name: ABSIZE
        description: "Alternate bytes size This bit defines\n              alternate\
          \ bytes size: This field can be written only\n              when BUSY =\
          \ 0."
        bitOffset: 16
        bitWidth: 2
      - name: DCYC
        description: "Number of dummy cycles This field\n              defines the\
          \ duration of the dummy phase. In both SDR\n              and DDR modes,\
          \ it specifies a number of CLK cycles\n              (0-31). This field\
          \ can be written only when BUSY =\n              0."
        bitOffset: 18
        bitWidth: 5
      - name: DMODE
        description: "Data mode This field defines the data\n              phases\
          \ mode of operation: This field also determines\n              the dummy\
          \ phase mode of operation. This field can be\n              written only\
          \ when BUSY = 0."
        bitOffset: 24
        bitWidth: 2
      - name: FMODE
        description: "Functional mode This field defines the\n              QUADSPI\
          \ functional mode of operation. If DMAEN = 1\n              already, then\
          \ the DMA controller for the\n              corresponding channel must be\
          \ disabled before\n              changing the FMODE value. This field can\
          \ be written\n              only when BUSY = 0."
        bitOffset: 26
        bitWidth: 2
      - name: SIOO
        description: "Send instruction only once mode See\n              Section15.3.11:\
          \ Sending the instruction only once on\n              page13. This bit has\
          \ no effect when IMODE = 00. This\n              field can be written only\
          \ when BUSY =\n              0."
        bitOffset: 28
        bitWidth: 1
      - name: DHHC
        description: "DDR hold Delay the data output by 1/4 of\n              the\
          \ QUADSPI output clock cycle in DDR mode: This\n              feature is\
          \ only active in DDR mode. This field can be\n              written only\
          \ when BUSY = 0."
        bitOffset: 30
        bitWidth: 1
      - name: DDRM
        description: "Double data rate mode This bit sets the\n              DDR mode\
          \ for the address, alternate byte and data\n              phase: This field\
          \ can be written only when BUSY =\n              0."
        bitOffset: 31
        bitWidth: 1
  - name: AR
    displayName: AR
    description: QUADSPI address register
    addressOffset: 24
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: ADDRESS
        description: "[31 0]: Address Address to be send to\n              the external\
          \ Flash memory Writes to this field are\n              ignored when BUSY\
          \ = 0 or when FMODE = 11\n              (memory-mapped mode). In dual flash\
          \ mode, ADDRESS[0]\n              is automatically stuck to 0 as the address\
          \ should\n              always be even"
        bitOffset: 0
        bitWidth: 32
  - name: ABR
    displayName: ABR
    description: "QUADSPI alternate bytes\n          registers"
    addressOffset: 28
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: ALTERNATE
        description: "Alternate Bytes Optional data to be send\n              to the\
          \ external SPI device right after the address.\n              This field\
          \ can be written only when BUSY =\n              0."
        bitOffset: 0
        bitWidth: 32
  - name: DR
    displayName: DR
    description: QUADSPI data register
    addressOffset: 32
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: DATA
        description: "Data Data to be sent/received to/from\n              the external\
          \ SPI device. In indirect write mode, data\n              written to this\
          \ register is stored on the FIFO before\n              it is sent to the\
          \ Flash memory during the data phase.\n              If the FIFO is too\
          \ full, a write operation is stalled\n              until the FIFO has enough\
          \ space to accept the amount\n              of data being written. In indirect\
          \ read mode, reading\n              this register gives (via the FIFO) the\
          \ data which was\n              received from the Flash memory. If the FIFO\
          \ does not\n              have as many bytes as requested by the read operation\n\
          \              and if BUSY=1, the read operation is stalled until\n    \
          \          enough data is present or until the transfer is\n           \
          \   complete, whichever happens first. In automatic\n              polling\
          \ mode, this register contains the last data\n              read from the\
          \ Flash memory (without masking). Word,\n              halfword, and byte\
          \ accesses to this register are\n              supported. In indirect write\
          \ mode, a byte write adds\n              1 byte to the FIFO, a halfword\
          \ write 2, and a word\n              write 4. Similarly, in indirect read\
          \ mode, a byte\n              read removes 1 byte from the FIFO, a halfword\
          \ read 2,\n              and a word read 4. Accesses in indirect mode must\
          \ be\n              aligned to the bottom of this register: a byte read\n\
          \              must read DATA[7:0] and a halfword read must read\n     \
          \         DATA[15:0]."
        bitOffset: 0
        bitWidth: 32
  - name: PSMKR
    displayName: PSMKR
    description: "QUADSPI polling status mask\n          register"
    addressOffset: 36
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: MASK
        description: "Status mask Mask to be applied to the\n              status\
          \ bytes received in polling mode. For bit n:\n              This field can\
          \ be written only when BUSY =\n              0."
        bitOffset: 0
        bitWidth: 32
  - name: PSMAR
    displayName: PSMAR
    description: "QUADSPI polling status match\n          register"
    addressOffset: 40
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: MATCH
        description: "Status match Value to be compared with\n              the masked\
          \ status register to get a match. This field\n              can be written\
          \ only when BUSY = 0."
        bitOffset: 0
        bitWidth: 32
  - name: PIR
    displayName: PIR
    description: "QUADSPI polling interval\n          register"
    addressOffset: 44
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: INTERVAL
        description: "Polling interval Number of CLK cycles\n              between\
          \ to read during automatic polling phases. This\n              field can\
          \ be written only when BUSY =\n              0."
        bitOffset: 0
        bitWidth: 16
  - name: LPTR
    displayName: LPTR
    description: "QUADSPI low-power timeout\n          register"
    addressOffset: 48
    size: 32
    access: read-write
    resetValue: 0
    fields:
      - name: TIMEOUT
        description: "Timeout period After each access in\n              memory-mapped\
          \ mode, the QUADSPI prefetches the\n              subsequent bytes and holds\
          \ these bytes in the FIFO.\n              This field indicates how many\
          \ CLK cycles the QUADSPI\n              waits after the FIFO becomes full\
          \ until it raises\n              nCS, putting the Flash memory in a lower-consumption\n\
          \              state. This field can be written only when BUSY =\n     \
          \         0."
        bitOffset: 0
        bitWidth: 16
interrupts:
  - name: QUADSPI
    description: QuadSPI global interrupt
addressBlocks:
  - offset: 0
    size: 1024
    usage: registers
