name: SPI
description: Serial peripheral interface
source: STM32H7S SVD v1.3
registers:
  - name: CR1
    displayName: CR1
    description: SPI/I2S control register 1
    addressOffset: 0
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: SPE
        description: "serial peripheral enable\nThis bit is set by and cleared by software.\nWhen SPE = 1, SPI data transfer is enabled, SPI_CFG1 and SPI_CFG2 configuration registers, CRCPOLY, UDRDR, IOLOCK bit in the SPI_CR1 register are write protected. They can be changed only when SPE = 0.\nWhen SPE = 0 any SPI operation is stopped and disabled, all the pending requests of the events with enabled interrupt are blocked except the MODF interrupt request (but their pending still propagates the request of the spi_plck clock), the SS output is deactivated at master, the RDY signal keeps not ready status at slave, the internal state machine is reseted, all the FIFOs content is flushed, CRC calculation initialized, receive data register is read zero.\nSPE is cleared and cannot be set when MODF error flag is active."
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Serial peripheral disabled.
            value: 0
          - name: B_0x1
            description: Serial peripheral enabled
            value: 1
      - name: MASRX
        description: "master automatic suspension in Receive mode \nThis bit is set and cleared by software to control continuous SPI transfer in master receiver mode and automatic management in order to avoid overrun condition. \nWhen SPI communication is suspended by hardware automatically, it may happen that few bits of next frame are already clocked out due to internal synchronization delay. \nThis is why, the automatic suspension is not quite reliable when size of data drops below 8 bits. In this case, a safe suspension can be achieved by combination with delay inserted between data frames applied when MIDI parameter keeps a non zero value; sum of data size and the interleaved SPI cycles should always produce interval at length of 8 SPI clock periods at minimum. After software clearing of the SUSP bit, the communication resumes and continues by subsequent bits transaction without any next constraint. Prior the SUSP bit is cleared, the user must release the RxFIFO space as much as possible by reading out all the data packets available at RxFIFO based on the RXP flag indication to prevent any subsequent suspension."
        bitOffset: 8
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI flow/clock generation is continuous, regardless of overrun condition. (data are lost)
            value: 0
          - name: B_0x1
            description: SPI flow is suspended temporary on RxFIFO full condition, before reaching overrun condition. The SUSP flag is set when the SPI communication is suspended.
            value: 1
      - name: CSTART
        description: "master transfer start\nThis bit can be set by software if SPI is enabled only to start an SPI or I2S/PCM communication. In SPI mode, it is cleared by hardware when end of transfer (EOT) flag is set or when a transaction suspend request is accepted. In I2S/PCM mode, it is also cleared by hardware as described in the Section 80.9.8: Stop sequence.\nIn SPI mode, the bit is taken into account at master mode only. If transmission is enabled, communication starts or continues only if any data is available in the transmission FIFO."
        bitOffset: 9
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: master transfer is at idle
            value: 0
          - name: B_0x1
            description: master transfer is ongoing or temporary suspended by automatic suspend
            value: 1
      - name: CSUSP
        description: "master suspend request \nThis bit reads as zero.\nIn Master mode, when this bit is set by software, the CSTART bit is reset at the end of the current frame and communication is suspended. The user has to check SUSP flag to check end of the frame transaction.\nThe Master mode communication must be suspended (using this bit or keeping TXDR empty) before going to Low-power mode. Can be used in SPI or I2S mode.\nAfter software suspension, SUSP flag must be cleared and SPI disabled and re-enabled before the next transaction starts."
        bitOffset: 10
        bitWidth: 1
        access: write-only
      - name: HDDIR
        description: "Rx/Tx direction at Half-duplex mode\nIn Half-Duplex configuration the HDDIR bit establishes the Rx/Tx direction of the data transfer. This bit is ignored in Full-Duplex or any Simplex configuration."
        bitOffset: 11
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI is receiver
            value: 0
          - name: B_0x1
            description: SPI is transmitter
            value: 1
      - name: SSI
        description: "internal SS signal input level\nThis bit has an effect only when the SSM bit is set. The value of this bit is forced onto the peripheral SS input internally and the I/O value of the SS pin is ignored."
        bitOffset: 12
        bitWidth: 1
        access: read-write
      - name: CRC33_17
        description: 32-bit CRC polynomial configuration
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Full size (33-bit or 17-bit) CRC polynomial is not used
            value: 0
          - name: B_0x1
            description: Full size (33-bit or 17-bit) CRC polynomial is used
            value: 1
      - name: RCRCINI
        description: CRC calculation initialization pattern control for receiver
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: All zero pattern is applied
            value: 0
          - name: B_0x1
            description: All ones pattern is applied
            value: 1
      - name: TCRCINI
        description: CRC calculation initialization pattern control for transmitter
        bitOffset: 15
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: all zero pattern is applied
            value: 0
          - name: B_0x1
            description: all ones pattern is applied
            value: 1
      - name: IOLOCK
        description: "locking the AF configuration of associated I/Os\nThis bit can be changed by software only when SPI is disabled (SPE = 0). It is cleared by hardware if a MODF event occurs\nWhen this bit is set, SPI_CFG2 register content cannot be modified. This bit is write-protected when SPI is enabled (SPE = 1)."
        bitOffset: 16
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: AF configuration is not locked
            value: 0
          - name: B_0x1
            description: AF configuration is locked
            value: 1
  - name: CR2
    displayName: CR2
    description: SPI/I2S control register 2
    addressOffset: 4
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: TSIZE
        description: "number of data at current transfer\nWhen these bits are changed by software, the SPI must be disabled.\nEndless transaction is initialized when CSTART is set while zero value is stored at TSIZE. TSIZE cannot be set to 0xFFFF respective 0x3FFF value when CRC is enabled.\nNote: TSIZE[15:10] bits are reserved at limited feature set instances and must be kept at reset value."
        bitOffset: 0
        bitWidth: 16
        access: read-write
  - name: CFG1
    displayName: CFG1
    description: SPI/I2S configuration register 1
    addressOffset: 8
    size: 32
    resetValue: 458759
    resetMask: 4294967295
    fields:
      - name: DSIZE
        description: "number of bits in at single SPI data frame\n.....\nMaximum data size can be limited up to 16-bits at some instances. At instances with limited set of features, DSIZE[2:0] bits are reserved and must be kept at reset state. DSIZE[4:3] bits then control next settings of data size:\n00xxx: 8-bits\n01xxx: 16-bits\n10xxx: 24-bits\nNote: 11xxx: 32-bits."
        bitOffset: 0
        bitWidth: 5
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: not used
            value: 0
          - name: B_0x1
            description: not used
            value: 1
          - name: B_0x2
            description: not used
            value: 2
          - name: B_0x3
            description: 4 bits
            value: 3
          - name: B_0x4
            description: 5 bits
            value: 4
          - name: B_0x5
            description: 6 bits
            value: 5
          - name: B_0x6
            description: 7 bits
            value: 6
          - name: B_0x7
            description: 8 bits
            value: 7
          - name: B_0x1D
            description: 30 bits
            value: 29
          - name: B_0x1E
            description: 31 bits
            value: 30
          - name: B_0x1F
            description: 32 bits
            value: 31
      - name: FTHLV
        description: "FIFO threshold level\nDefines number of data frames at single data packet. Size of the packet should not exceed 1/2 of FIFO space.\nSPI interface is more efficient if configured packet sizes are aligned with data register access parallelism: \nIf SPI data register is accessed as a 16-bit register and DSIZE UNDER OR EQUAL 8 bit, better to select FTHLV = 2, 4, 6.\nIf SPI data register is accessed as a 32-bit register and DSIZE> 8 bit, better to select FTHLV = 2, 4, 6, while if DSIZE UNDER OR EQUAL 8bit, better to select FTHLV = 4, 8, 12.\nNote: FTHLV[3:2] bits are reserved at instances with limited set of features"
        bitOffset: 5
        bitWidth: 4
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: 1-data
            value: 0
          - name: B_0x1
            description: 2-data
            value: 1
          - name: B_0x2
            description: 3-data
            value: 2
          - name: B_0x3
            description: 4-data
            value: 3
          - name: B_0x4
            description: 5-data
            value: 4
          - name: B_0x5
            description: 6-data
            value: 5
          - name: B_0x6
            description: 7-data
            value: 6
          - name: B_0x7
            description: 8-data
            value: 7
          - name: B_0x8
            description: 9-data
            value: 8
          - name: B_0x9
            description: 10-data
            value: 9
          - name: B_0xA
            description: 11-data
            value: 10
          - name: B_0xB
            description: 12-data
            value: 11
          - name: B_0xC
            description: 13-data
            value: 12
          - name: B_0xD
            description: 14-data
            value: 13
          - name: B_0xE
            description: 15-data
            value: 14
          - name: B_0xF
            description: 16-data
            value: 15
      - name: UDRCFG
        description: "behavior of slave transmitter at underrun condition\nFor more details see Figure 962: Optional configurations of slave detecting underrun condition."
        bitOffset: 9
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: slave sends a constant pattern defined by the user at the SPI_UDRDR register
            value: 0
          - name: B_0x1
            description: Slave repeats lastly received data from master. When slave is configured at transmit only mode (COMM[1:0] = 01), all zeros pattern is repeated.
            value: 1
      - name: RXDMAEN
        description: Rx DMA stream enable
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Rx-DMA disabled
            value: 0
          - name: B_0x1
            description: Rx-DMA enabled
            value: 1
      - name: TXDMAEN
        description: Tx DMA stream enable
        bitOffset: 15
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Tx DMA disabled
            value: 0
          - name: B_0x1
            description: Tx DMA enabled
            value: 1
      - name: CRCSIZE
        description: "length of CRC frame to be transacted and compared\nMost significant bits are taken into account from polynomial calculation when CRC result is transacted or compared. The length of the polynomial is not affected by this setting.\n.....\nThe value must be set equal or multiply of data size (DSIZE[4:0]). Its maximum size corresponds to DSIZE maximum at the instance.\nNote: The most significant bit at CRCSIZE bit field is reserved at the peripheral instances where data size is limited to 16-bit."
        bitOffset: 16
        bitWidth: 5
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: FIELD Reserved
            value: 0
          - name: B_0x1
            description: FIELD Reserved
            value: 1
          - name: B_0x2
            description: FIELD Reserved
            value: 2
          - name: B_0x3
            description: 4-bits
            value: 3
          - name: B_0x4
            description: 5-bits
            value: 4
          - name: B_0x5
            description: 6-bits
            value: 5
          - name: B_0x6
            description: 7-bits
            value: 6
          - name: B_0x7
            description: 8-bits
            value: 7
          - name: B_0x1D
            description: 30-bits
            value: 29
          - name: B_0x1E
            description: 31-bits
            value: 30
          - name: B_0x1F
            description: 32-bits
            value: 31
      - name: CRCEN
        description: hardware CRC computation enable
        bitOffset: 22
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: CRC calculation disabled
            value: 0
          - name: B_0x1
            description: CRC calculation enabled
            value: 1
      - name: MBR
        description: "master baud rate prescaler setting\nNote: MBR setting is considered at slave working at TI mode, too (see Section 80.5.1: TI mode)."
        bitOffset: 28
        bitWidth: 3
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI master clock/2
            value: 0
          - name: B_0x1
            description: SPI master clock/4
            value: 1
          - name: B_0x2
            description: SPI master clock/8
            value: 2
          - name: B_0x3
            description: SPI master clock/16
            value: 3
          - name: B_0x4
            description: SPI master clock/32
            value: 4
          - name: B_0x5
            description: SPI master clock/64
            value: 5
          - name: B_0x6
            description: SPI master clock/128
            value: 6
          - name: B_0x7
            description: SPI master clock/256
            value: 7
      - name: BPASS
        description: bypass of the prescaler at master baud rate clock generator
        bitOffset: 31
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: bypass is disabled
            value: 0
          - name: B_0x1
            description: bypass is enabled
            value: 1
  - name: CFG2
    displayName: CFG2
    description: SPI/I2S configuration register 2
    addressOffset: 12
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: MSSI
        description: "Master SS Idleness\nSpecifies an extra delay, expressed in number of SPI clock cycle periods, inserted additionally between active edge of SS opening a session and the beginning of the first data frame of the session in Master mode when SSOE is enabled.\n...\nThis feature is not supported in TI mode.\nNote: To include the delay, the SPI must be disabled and re-enabled between sessions."
        bitOffset: 0
        bitWidth: 4
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: no extra delay
            value: 0
          - name: B_0x1
            description: 1 clock cycle period delay added
            value: 1
          - name: B_0xF
            description: 15 clock cycle periods delay added
            value: 15
      - name: MIDI
        description: "master Inter-Data Idleness\nSpecifies minimum time delay (expressed in SPI clock cycles periods) inserted between two consecutive data frames in Master mode.\n...\nNote: This feature is not supported in TI mode."
        bitOffset: 4
        bitWidth: 4
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: no delay
            value: 0
          - name: B_0x1
            description: 1 clock cycle period delay
            value: 1
          - name: B_0xF
            description: 15 clock cycle periods delay
            value: 15
      - name: RDIOM
        description: "RDY signal input/output management\nNote: When DSIZE at the SPI_CFG1 register is configured shorter than 8-bit, the RDIOM bit must be kept at zero."
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: RDY signal is defined internally fixed as permanently active (RDIOP setting has no effect)
            value: 0
          - name: B_0x1
            description: RDY signal is overtaken from alternate function input (at master case) or output (at slave case) of the dedicated pin (RDIOP setting takes effect)
            value: 1
      - name: RDIOP
        description: RDY signal input/output polarity
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: high level of the signal means the slave is ready for communication
            value: 0
          - name: B_0x1
            description: low level of the signal means the slave is ready for communication
            value: 1
      - name: IOSWP
        description: "swap functionality of MISO and MOSI pins\nWhen this bit is set, the function of MISO and MOSI pins alternate functions are inverted. \nOriginal MISO pin becomes MOSI and original MOSI pin becomes MISO.\nNote: This bit can be also used in PCM and I2S modes to swap SDO and SDI pins."
        bitOffset: 15
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: no swap
            value: 0
          - name: B_0x1
            description: MOSI and MISO are swapped
            value: 1
      - name: COMM
        description: SPI Communication Mode
        bitOffset: 17
        bitWidth: 2
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: full-duplex
            value: 0
          - name: B_0x1
            description: simplex transmitter
            value: 1
          - name: B_0x2
            description: simplex receiver
            value: 2
          - name: B_0x3
            description: half-duplex
            value: 3
      - name: SP
        description: "serial protocol\nothers: reserved, must not be used"
        bitOffset: 19
        bitWidth: 3
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI Motorola
            value: 0
          - name: B_0x1
            description: SPI TI
            value: 1
      - name: MASTER
        description: SPI Master
        bitOffset: 22
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI Slave
            value: 0
          - name: B_0x1
            description: SPI Master
            value: 1
      - name: LSBFRST
        description: "data frame format\nNote: This bit can be also used in PCM and I2S modes."
        bitOffset: 23
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: MSB transmitted first
            value: 0
          - name: B_0x1
            description: LSB transmitted first
            value: 1
      - name: CPHA
        description: clock phase
        bitOffset: 24
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: the first clock transition is the first data capture edge
            value: 0
          - name: B_0x1
            description: the second clock transition is the first data capture edge
            value: 1
      - name: CPOL
        description: clock polarity
        bitOffset: 25
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SCK signal is at 0 when idle
            value: 0
          - name: B_0x1
            description: SCK signal is at 1 when idle
            value: 1
      - name: SSM
        description: "software management of SS signal input\nWhen master uses hardware SS output (SSM = 0 and SSOE = 1) the SS signal input is forced to not active state internally to prevent master mode fault error."
        bitOffset: 26
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SS input value is determined by the SS PAD
            value: 0
          - name: B_0x1
            description: SS input value is determined by the SSI bit
            value: 1
      - name: SSIOP
        description: SS input/output polarity
        bitOffset: 28
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: low level is active for SS signal
            value: 0
          - name: B_0x1
            description: high level is active for SS signal
            value: 1
      - name: SSOE
        description: "SS output enable\nThis bit is taken into account in Master mode only"
        bitOffset: 29
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SS output is disabled and the SPI can work in multi-master configuration
            value: 0
          - name: B_0x1
            description: SS output is enabled. The SPI cannot work in a multi-master environment. It forces the SS pin at inactive level after the transfer is completed or SPI is disabled with respect to SSOM, MIDI, MSSI, SSIOP bits setting
            value: 1
      - name: SSOM
        description: "SS output management in Master mode\nThis bit is taken into account in Master mode when SSOE is enabled. It allows the SS output to be configured between two consecutive data transfers."
        bitOffset: 30
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SS is kept at active level till data transfer is completed, it becomes inactive with EOT flag
            value: 0
          - name: B_0x1
            description: SPI data frames are interleaved with SS non active pulses when MIDI[3:0]>1
            value: 1
      - name: AFCNTR
        description: "alternate function GPIOs control\nThis bit is taken into account when SPE = 0 only\nWhen SPI must be disabled temporary for a specific configuration reason (for example CRC reset, CPHA or HDDIR change) setting this bit prevents any glitches on the associated outputs configured at alternate function mode by keeping them forced at state corresponding the current SPI configuration.\nNote: This bit can be also used in PCM and I2S modes.\nNote: The bit AFCNTR must not be set, when the block is in slave mode."
        bitOffset: 31
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: The peripheral takes no control of GPIOs while it is disabled
            value: 0
          - name: B_0x1
            description: The peripheral keeps always control of all associated GPIOs
            value: 1
  - name: IER
    displayName: IER
    description: SPI/I2S interrupt enable register
    addressOffset: 16
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: RXPIE
        description: RXP interrupt enable
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: RXP interrupt disabled
            value: 0
          - name: B_0x1
            description: RXP interrupt enabled
            value: 1
      - name: TXPIE
        description: "TXP interrupt enable\nTXPIE is set by software and cleared by TXTF flag set event."
        bitOffset: 1
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: TXP interrupt disabled
            value: 0
          - name: B_0x1
            description: TXP interrupt enabled
            value: 1
      - name: DXPIE
        description: "DXP interrupt enabled\nDXPIE is set by software and cleared by TXTF flag set event."
        bitOffset: 2
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: DXP interrupt disabled
            value: 0
          - name: B_0x1
            description: DXP interrupt enabled
            value: 1
      - name: EOTIE
        description: EOT, SUSP and TXC interrupt enable
        bitOffset: 3
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: EOT/SUSP/TXC interrupt disabled
            value: 0
          - name: B_0x1
            description: EOT/SUSP/TXC interrupt enabled
            value: 1
      - name: TXTFIE
        description: TXTFIE interrupt enable
        bitOffset: 4
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: TXTF interrupt disabled
            value: 0
          - name: B_0x1
            description: TXTF interrupt enabled
            value: 1
      - name: UDRIE
        description: UDR interrupt enable
        bitOffset: 5
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: UDR interrupt disabled
            value: 0
          - name: B_0x1
            description: UDR interrupt enabled
            value: 1
      - name: OVRIE
        description: OVR interrupt enable
        bitOffset: 6
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: OVR interrupt disabled
            value: 0
          - name: B_0x1
            description: OVR interrupt enabled
            value: 1
      - name: CRCEIE
        description: CRC error interrupt enable
        bitOffset: 7
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: CRC interrupt disabled
            value: 0
          - name: B_0x1
            description: CRC interrupt enabled
            value: 1
      - name: TIFREIE
        description: TIFRE interrupt enable
        bitOffset: 8
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: TIFRE interrupt disabled
            value: 0
          - name: B_0x1
            description: TIFRE interrupt enabled
            value: 1
      - name: MODFIE
        description: mode Fault interrupt enable
        bitOffset: 9
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: MODF interrupt disabled
            value: 0
          - name: B_0x1
            description: MODF interrupt enabled
            value: 1
  - name: SR
    displayName: SR
    description: SPI/I2S status register
    addressOffset: 20
    size: 32
    resetValue: 4098
    resetMask: 4294967295
    fields:
      - name: RXP
        description: "Rx-packet available\nThe flag is changed by hardware. It monitors the total number of data currently available at RxFIFO if SPI is enabled. RXP value depends on the FIFO threshold (FTHLV[3:0]), data frame size (DSIZE[4:0] in SPI mode and DATLEN[1:0] in I2S/PCM mode), and actual communication flow. If the data packet is read by performing consecutive read operations from SPI_RXDR, RXP flag must be checked again once a complete data packet is read out from RxFIFO."
        bitOffset: 0
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: RxFIFO is empty or an incomplete data packet is received
            value: 0
          - name: B_0x1
            description: RxFIFO contains at least one data packet
            value: 1
      - name: TXP
        description: "Tx-packet space available\nTXP flag can be changed only by hardware. Its value depends on the physical size of the FIFO and its threshold (FTHLV[3:0]), data frame size (DSIZE[4:0] in SPI mode and respective DATLEN[1:0] in I2S/PCM mode), and actual communication flow. If the data packet is stored by performing consecutive write operations to SPI_TXDR, TXP flag must be checked again once a complete data packet is stored at TxFIFO. TXP is set despite SPI TxFIFO becomes inaccessible when SPI is reset or disabled."
        bitOffset: 1
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: not enough free space at TxFIFO to host next data packet
            value: 0
          - name: B_0x1
            description: enough free space at TxFIFO to host at least one data packet
            value: 1
      - name: DXP
        description: "duplex packet\nDXP flag is set whenever both TXP and RXP flags are set regardless SPI mode."
        bitOffset: 2
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: TxFIFO is Full and/or RxFIFO is Empty
            value: 0
          - name: B_0x1
            description: both TxFIFO has space for write and RxFIFO contains for read a single packet at least
            value: 1
      - name: EOT
        description: "end of transfer\nEOT is set by hardware as soon as a full transfer is complete, that is when SPI is re-enabled or when TSIZE number of data have been transmitted and/or received on the SPI. EOT is cleared when SPI is re-enabled or by writing 1 to EOTC bit of SPI_IFCR optionally.\nEOT flag triggers an interrupt if EOTIE bit is set.\nIf DXP flag is used until TXTF flag is set and DXPIE is cleared, EOT can be used to download the last packets contained into RxFIFO in one-shot.\nIn master, EOT event terminates the data transaction and handles SS output optionally. When CRC is applied, the EOT event is extended over the CRC frame transaction.\nTo restart the internal state machine properly, SPI is strongly suggested to be disabled and re-enabled before next transaction starts despite its setting is not changed."
        bitOffset: 3
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: transfer is ongoing or not started
            value: 0
          - name: B_0x1
            description: transfer complete
            value: 1
      - name: TXTF
        description: "transmission transfer filled\nTXTF is set by hardware as soon as all of the data packets in a transfer have been submitted for transmission by application software or DMA, that is when TSIZE number of data have been pushed into the TxFIFO.\nThis bit is cleared by software write 1 to TXTFC bit of SPI_IFCR exclusively.\nTXTF flag triggers an interrupt if TXTFIE bit is set.\nTXTF setting clears the TXPIE and DXPIE masks so to off-load application software from calculating when to disable TXP and DXP interrupts."
        bitOffset: 4
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: upload of TxFIFO is ongoing or not started
            value: 0
          - name: B_0x1
            description: TxFIFO upload is finished
            value: 1
      - name: UDR
        description: "underrun\nThis bit is cleared when SPI is re-enabled or by writing 1 to UDRC bit of SPI_IFCR optionally.\nNote: In SPI mode, the UDR flag applies to Slave mode only. In I2S/PCM mode, (when available) this flag applies to Master and Slave mode"
        bitOffset: 5
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no underrun
            value: 0
          - name: B_0x1
            description: underrun detected
            value: 1
      - name: OVR
        description: "overrun\nThis bit is cleared when SPI is re-enabled or by writing 1 to OVRC bit of SPI_IFCR optionally."
        bitOffset: 6
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no overrun
            value: 0
          - name: B_0x1
            description: overrun detected
            value: 1
      - name: CRCE
        description: "CRC error\nThis bit is cleared when SPI is re-enabled or by writing 1 to CRCEC bit of SPI_IFCR optionally."
        bitOffset: 7
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no CRC error
            value: 0
          - name: B_0x1
            description: CRC error detected
            value: 1
      - name: TIFRE
        description: "TI frame format error\nThis bit is cleared by writing 1 to TIFREC bit of SPI_IFCR exclusively."
        bitOffset: 8
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no TI Frame Error
            value: 0
          - name: B_0x1
            description: TI frame error detected
            value: 1
      - name: MODF
        description: "mode fault\nWhen MODF is set, SPE and IOLOCK bits of SPI_CR1 register are reset and setting SPE again is blocked until MODF is cleared. \nThis bit is cleared by writing 1 to MODFC bit of SPI_IFCR exclusively."
        bitOffset: 9
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no mode fault
            value: 0
          - name: B_0x1
            description: mode fault detected.
            value: 1
      - name: SUSP
        description: "suspension status \nIn Master mode, SUSP is set by hardware either as soon as the current frame is completed after CSUSP request is done or at master automatic suspend receive mode (MASRX bit is set at SPI_CR1 register) on RxFIFO full condition.\nSUSP generates an interrupt when EOTIE is set.\nThis bit must be cleared prior SPI is disabled and this is done by writing 1 to SUSPC bit of SPI_IFCR exclusively."
        bitOffset: 11
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: SPI not suspended (Master mode active or other mode).
            value: 0
          - name: B_0x1
            description: Master mode is suspended (current frame completed).
            value: 1
      - name: TXC
        description: "TxFIFO transmission complete\nThe flag behavior depends on TSIZE setting.\nWhen TSIZE = 0, the TXC is changed by hardware exclusively and it raises each time the TxFIFO becomes empty and there is no activity on the bus.\nIf TSIZE different from 0 there is no specific reason to monitor TXC as it just copies the EOT flag value including its software clearing. The TXC generates an interrupt when EOTIE is set.\nThis flag is set when SPI is reset or disabled."
        bitOffset: 12
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: current data transaction is still ongoing, data is available in TxFIFO or last frame transmission is on going.
            value: 0
          - name: B_0x1
            description: last TxFIFO frame transmission complete
            value: 1
      - name: RXPLVL
        description: "RxFIFO packing level \nWhen RXWNE = 0 and data size is set up to 16-bit, the value gives number of remaining data frames persisting at RxFIFO.\nNote: (*): Possible value when data size is set up to 8-bit only.\nWhen data size is greater than 16-bit, these bits are always read as 00. In that consequence, the single data frame received at the FIFO cannot be detected neither by RWNE nor by RXPLVL bits if data size is set from 17 to 24 bits. The user must then apply other methods to detect the number of data received, such as monitor the EOT event when TSIZE > 0 or RXP events when FTHLV = 0."
        bitOffset: 13
        bitWidth: 2
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: no next frame is available at RxFIFO
            value: 0
          - name: B_0x1
            description: 1 frame is available
            value: 1
          - name: B_0x2
            description: 2 frames are available*
            value: 2
          - name: B_0x3
            description: 3 frames are available*
            value: 3
      - name: RXWNE
        description: "RxFIFO word not empty \nNote: This bit value does not depend on DSIZE setting and keeps together with RXPLVL[1:0] information about RxFIFO occupancy by residual data."
        bitOffset: 15
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: less than four bytes of RxFIFO space is occupied by data
            value: 0
          - name: B_0x1
            description: at least four bytes of RxFIFO space is occupied by data
            value: 1
      - name: CTSIZE
        description: "number of data frames remaining in current TSIZE session\nThe value is not quite reliable when traffic is ongoing on bus .\nNote: CTSIZE[15:0] bits are not available in instances with limited set of features."
        bitOffset: 16
        bitWidth: 16
        access: read-only
  - name: IFCR
    displayName: IFCR
    description: SPI/I2S interrupt/status flags clear register
    addressOffset: 24
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: EOTC
        description: "end of transfer flag clear\nWriting a 1 into this bit clears EOT flag in the SPI_SR register"
        bitOffset: 3
        bitWidth: 1
        access: write-only
      - name: TXTFC
        description: "transmission transfer filled flag clear\nWriting a 1 into this bit clears TXTF flag in the SPI_SR register"
        bitOffset: 4
        bitWidth: 1
        access: write-only
      - name: UDRC
        description: "underrun flag clear\nWriting a 1 into this bit clears UDR flag in the SPI_SR register"
        bitOffset: 5
        bitWidth: 1
        access: write-only
      - name: OVRC
        description: "overrun flag clear\nWriting a 1 into this bit clears OVR flag in the SPI_SR register"
        bitOffset: 6
        bitWidth: 1
        access: write-only
      - name: CRCEC
        description: "CRC error flag clear\nWriting a 1 into this bit clears CRCE flag in the SPI_SR register"
        bitOffset: 7
        bitWidth: 1
        access: write-only
      - name: TIFREC
        description: "TI frame format error flag clear\nWriting a 1 into this bit clears TIFRE flag in the SPI_SR register"
        bitOffset: 8
        bitWidth: 1
        access: write-only
      - name: MODFC
        description: "mode fault flag clear\nWriting a 1 into this bit clears MODF flag in the SPI_SR register"
        bitOffset: 9
        bitWidth: 1
        access: write-only
      - name: SUSPC
        description: "Suspend flag clear\nWriting a 1 into this bit clears SUSP flag in the SPI_SR register"
        bitOffset: 11
        bitWidth: 1
        access: write-only
  - name: TXDR
    displayName: TXDR
    description: SPI/I2S transmit data register
    addressOffset: 32
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: TXDR
        description: "transmit data register\nThe register serves as an interface with TxFIFO. A write to it accesses TxFIFO.\nNote: In SPI mode, data is always right-aligned. Alignment of data at I2S mode depends on DATLEN and DATFMT setting. Unused bits are ignored when writing to the register, and read as zero when the register is read.\nNote: DR can be accessed byte-wise (8-bit access): in this case only one data-byte is written by single access.\nNote: halfword-wise (16 bit access) in this case 2 data-bytes or 1 halfword-data can be written by single access.\nNote: word-wise (32 bit access). In this case 4 data-bytes or 2 halfword-data or word-data can be written by single access.\nNote: Write access of this register less than the configured data size is forbidden."
        bitOffset: 0
        bitWidth: 32
        access: write-only
  - name: RXDR
    displayName: RXDR
    description: SPI/I2S receive data register
    addressOffset: 48
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: RXDR
        description: "receive data register\nThe register serves as an interface with RxFIFO. When it is read, RxFIFO is accessed.\nNote: In SPI mode, data is always right-aligned. Alignment of data at I2S mode depends on DATLEN and DATFMT setting. Unused bits are read as zero when the register is read. Writing to the register is ignored.\nNote: DR can be accessed byte-wise (8-bit access): in this case only one data-byte is read by single access\nNote: halfword-wise (16 bit access) in this case 2 data-bytes or 1 halfword-data can be read by single access\nNote: word-wise (32 bit access). In this case 4 data-bytes or 2 halfword-data or word-data can be read by single access.\nNote: Read access of this register less than the configured data size is forbidden."
        bitOffset: 0
        bitWidth: 32
        access: read-only
  - name: CRCPOLY
    displayName: CRCPOLY
    description: SPI/I2S polynomial register
    addressOffset: 64
    size: 32
    resetValue: 263
    resetMask: 4294967295
    fields:
      - name: CRCPOLY
        description: "CRC polynomial register\nThis register contains the polynomial for the CRC calculation.\nThe default 9-bit polynomial setting 0x107 corresponds to default 8-bit setting of DSIZE. It is compatible with setting 0x07 used in other ST products with fixed length of the polynomial string, where the most significant bit of the string is always kept hidden.\nLength of the polynomial is given by the most significant bit of the value stored in this register. It must be set greater than DSIZE. CRC33_17 bit must be set additionally with CRCPOLY register when DSIZE is configured to maximum 32-bit or 16-bit size and CRC is enabled (to keep polynomial length grater than data size).\nNote: CRCPOLY[31:16] bits are reserved at instances with data size limited to 16-bit. There is no constrain when 32-bit access is applied at these addresses. Reserved bits 31-16 are always read zero while any write to them is ignored."
        bitOffset: 0
        bitWidth: 32
        access: read-write
  - name: TXCRC
    displayName: TXCRC
    description: SPI/I2S transmitter CRC register
    addressOffset: 68
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: TXCRC
        description: "CRC register for transmitter\nWhen CRC calculation is enabled, the TXCRC[31:0] bits contain the computed CRC value of the subsequently transmitted bytes. CRC calculation is initialized when the CRCEN bit of SPI_CR1 is written to 1 or when a data block is transacted completely. The CRC is calculated serially using the polynomial programmed in the SPI_CRCPOLY register.\nThe number of bits considered at calculation depends on SPI_CRCPOLY register and CRCSIZE bits settings at SPI_CFG1 register.\nNote: A read to this register when the communication is ongoing may return an incorrect value.\nNote: not used for the I<sup>2</sup>S mode.\nNote: TXCRC[31-16] bits are reserved at instances with data size limited to 16-bit. There is no constrain when 32-bit access is applied at these addresses. Reserved bits 31-16 are always read zero while any write to them is ignored.\nNote: The configuration of CRCSIZE bit field is not taken into account when the content of this register is read by software. No masking is applied for unused bits in this case."
        bitOffset: 0
        bitWidth: 32
        access: read-only
  - name: RXCRC
    displayName: RXCRC
    description: SPI/I2S receiver CRC register
    addressOffset: 72
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: RXCRC
        description: "CRC register for receiver\nWhen CRC calculation is enabled, the RXCRC[31:0] bits contain the computed CRC value of the subsequently received bytes. CRC calculation is initialized when the CRCEN bit of SPI_CR1 is written to 1 or when a data block is transacted completely. The CRC is calculated serially using the polynomial programmed in the SPI_CRCPOLY register.\nThe number of bits considered at calculation depends on SPI_CRCPOLY register and CRCSIZE bits settings at SPI_CFG1 register.\nNote: A read to this register when the communication is ongoing may return an incorrect value.\nNote: Not used for the I<sup>2</sup>S mode.\nNote: RXCRC[31-16] bits are reserved at the peripheral instances with data size limited to 16-bit. There is no constrain when 32-bit access is applied at these addresses. Reserved bits 31-16 are always read zero while any write to them is ignored.\nNote: The configuration of CRCSIZE bit field is not taken into account when the content of this register is read by software. No masking is applied for unused bits in this case."
        bitOffset: 0
        bitWidth: 32
        access: read-only
  - name: UDRDR
    displayName: UDRDR
    description: SPI/I2S underrun data register
    addressOffset: 76
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: UDRDR
        description: "data at slave underrun condition\nThe register is taken into account in Slave mode and at underrun condition only. The number of bits considered depends on DSIZE bit settings of the SPI_CFG1 register. Underrun condition handling depends on setting UDRCFG bit at SPI_CFG1 register.\nNote: UDRDR[31-16] bits are reserved at the peripheral instances with data size limited to 16-bit. There is no constraint when 32-bit access is applied at these addresses. Reserved bits 31-16 are always read zero while any write to them is ignored."
        bitOffset: 0
        bitWidth: 32
        access: read-write
  - name: I2SCFGR
    displayName: I2SCFGR
    description: SPI/I2S configuration register
    addressOffset: 80
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: I2SMOD
        description: I2S mode selection
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SPI mode is selected
            value: 0
          - name: B_0x1
            description: I2S/PCM mode is selected
            value: 1
      - name: I2SCFG
        description: "I2S configuration mode\nothers, not used"
        bitOffset: 1
        bitWidth: 3
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: slave - transmit
            value: 0
          - name: B_0x1
            description: slave - receive
            value: 1
          - name: B_0x2
            description: master - transmit
            value: 2
          - name: B_0x3
            description: master - receive
            value: 3
          - name: B_0x4
            description: slave - Full Duplex
            value: 4
          - name: B_0x5
            description: master - Full Duplex
            value: 5
      - name: I2SSTD
        description: "I<sup>2</sup>S standard selection\nFor more details on I<sup>2</sup>S standards, refer to Section 80.9.5: Supported audio protocols"
        bitOffset: 4
        bitWidth: 2
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: I<sup>2</sup>S Philips standard.
            value: 0
          - name: B_0x1
            description: MSB justified standard (left justified)
            value: 1
          - name: B_0x2
            description: LSB justified standard (right justified)
            value: 2
          - name: B_0x3
            description: PCM standard
            value: 3
      - name: PCMSYNC
        description: PCM frame synchronization
        bitOffset: 7
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: short frame synchronization
            value: 0
          - name: B_0x1
            description: long frame synchronization
            value: 1
      - name: DATLEN
        description: 'data length to be transferred. Data width of 24 and 32 bits are not always supported, (DATLEN = 01 or 10), refer to Section 80.3: SPI implementation to check the supported data size.'
        bitOffset: 8
        bitWidth: 2
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: 16-bit data length
            value: 0
          - name: B_0x1
            description: 24-bit data length
            value: 1
          - name: B_0x2
            description: 32-bit data length
            value: 2
          - name: B_0x3
            description: Not allowed
            value: 3
      - name: CHLEN
        description: channel length (number of bits per audio channel)
        bitOffset: 10
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: 16-bit wide
            value: 0
          - name: B_0x1
            description: 32-bit wide
            value: 1
      - name: CKPOL
        description: serial audio clock polarity
        bitOffset: 11
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: the signals generated by the SPI/I2S (i.e. SDO and WS) are changed on the falling edge of CK and the signals received by the SPI/I2S (i.e. SDI and WS) are read of the rising edge of CK.
            value: 0
          - name: B_0x1
            description: the signals generated by the SPI/I2S (i.e. SDO and WS) are changed on the rising edge of CK and the signals received by the SPI/I2S (i.e. SDI and WS) are read of the falling edge of CK.
            value: 1
      - name: FIXCH
        description: fixed channel length in slave
        bitOffset: 12
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: the channel length in Slave mode is different from 16 or 32 bits (CHLEN must be set)
            value: 0
          - name: B_0x1
            description: the channel length in Slave mode is supposed to be 16 or 32 bits (according to CHLEN)
            value: 1
      - name: WSINV
        description: "word select inversion\nThis bit is used to invert the default polarity of WS signal.\nIn MSB or LSB justified mode, the left channel is transferred when WS is HIGH, and the right channel when WS is LOW.\nIn PCM short mode the data transfer starts at the falling edge of WS, while it starts at the rising edge of WS in PCM long mode.\nIn MSB or LSB justified mode, the left channel is transfered when WS is LOW, and right channel when WS is HIGH. \nIn PCM short mode the data transfer starts at the rising edge of WS, while it starts at the falling edge of WS in PCM long mode."
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: In I2S Philips standard, the left channel transfer starts one CK cycle after the WS falling edge, and the right channel one CK cycle after the WS rising edge.
            value: 0
          - name: B_0x1
            description: In I2S Philips standard, the left channel transfer starts one CK cycle after the WS rising edge, and the right channel one CK cycle after the WS falling edge.
            value: 1
      - name: DATFMT
        description: data format
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: The data inside the SPI_RXDR or SPI_TXDR are right aligned
            value: 0
          - name: B_0x1
            description: The data inside the SPI_RXDR or SPI_TXDR are left aligned.
            value: 1
      - name: I2SDIV
        description: "I<sup>2</sup>S linear prescaler\nI2SDIV can take any values except the value 1, when ODD is also equal to 1.\nRefer to Section 80.9.9: Clock generator for details"
        bitOffset: 16
        bitWidth: 8
        access: read-write
      - name: ODD
        description: "odd factor for the prescaler\nRefer to Section 80.9.9: Clock generator for details"
        bitOffset: 24
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Real divider value is = I2SDIV *2
            value: 0
          - name: B_0x1
            description: Real divider value is = (I2SDIV * 2) + 1
            value: 1
      - name: MCKOE
        description: master clock output enable
        bitOffset: 25
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Master clock output is disabled
            value: 0
          - name: B_0x1
            description: Master clock output is enabled
            value: 1
addressBlocks:
  - offset: 0
    size: 1024
    usage: registers
interrupts:
  - name: INTR
    description: SPI1 global interrupt
