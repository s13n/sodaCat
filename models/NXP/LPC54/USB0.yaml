name: USB0
description: LPC5411x USB 2.0 Device Controller
groupName: USB
source: LPC54S018 SVD (MCUX_2.16.100)
registers:
  - name: DEVCMDSTAT
    description: Device Command/Status register
    addressOffset: 0
    size: 32
    access: read-write
    resetValue: 2048
    resetMask: 387709951
    fields:
      - name: DEV_ADDR
        description: USB device address. After bus reset, the address is reset to 0x00. If the enable bit is set, the device will respond on packets for function address DEV_ADDR. When receiving a SetAddress Control Request from the USB host, software must program the new address before completing the status phase of the SetAddress Control Request.
        bitOffset: 0
        bitWidth: 7
        access: read-write
      - name: DEV_EN
        description: USB device enable. If this bit is set, the HW will start responding on packets for function address DEV_ADDR.
        bitOffset: 7
        bitWidth: 1
        access: read-write
      - name: SETUP
        description: SETUP token received. If a SETUP token is received and acknowledged by the device, this bit is set. As long as this bit is set all received IN and OUT tokens will be NAKed by HW. SW must clear this bit by writing a one. If this bit is zero, HW will handle the tokens to the CTRL EP0 as indicated by the CTRL EP0 IN and OUT data information programmed by SW.
        bitOffset: 8
        bitWidth: 1
        access: read-write
      - name: FORCE_NEEDCLK
        description: 'Forces the NEEDCLK output to always be on:'
        bitOffset: 9
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: NORMAL
            description: USB_NEEDCLK has normal function.
            value: 0
          - name: ALWAYS_ON
            description: USB_NEEDCLK always 1. Clock will not be stopped in case of suspend.
            value: 1
      - name: LPM_SUP
        description: 'LPM Supported:'
        bitOffset: 11
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: NO
            description: LPM not supported.
            value: 0
          - name: YES
            description: LPM supported.
            value: 1
      - name: INTONNAK_AO
        description: Interrupt on NAK for interrupt and bulk OUT EP
        bitOffset: 12
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: DISABLED
            description: Only acknowledged packets generate an interrupt
            value: 0
          - name: ENABLED
            description: Both acknowledged and NAKed packets generate interrupts.
            value: 1
      - name: INTONNAK_AI
        description: Interrupt on NAK for interrupt and bulk IN EP
        bitOffset: 13
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: DISABLED
            description: Only acknowledged packets generate an interrupt
            value: 0
          - name: ENABLED
            description: Both acknowledged and NAKed packets generate interrupts.
            value: 1
      - name: INTONNAK_CO
        description: Interrupt on NAK for control OUT EP
        bitOffset: 14
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: DISABLED
            description: Only acknowledged packets generate an interrupt
            value: 0
          - name: ENABLED
            description: Both acknowledged and NAKed packets generate interrupts.
            value: 1
      - name: INTONNAK_CI
        description: Interrupt on NAK for control IN EP
        bitOffset: 15
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: DISABLED
            description: Only acknowledged packets generate an interrupt
            value: 0
          - name: ENABLED
            description: Both acknowledged and NAKed packets generate interrupts.
            value: 1
      - name: DCON
        description: Device status - connect. The connect bit must be set by SW to indicate that the device must signal a connect. The pull-up resistor on USB_DP will be enabled when this bit is set and the VBUSDEBOUNCED bit is one.
        bitOffset: 16
        bitWidth: 1
        access: read-write
      - name: DSUS
        description: Device status - suspend. The suspend bit indicates the current suspend state. It is set to 1 when the device hasn't seen any activity on its upstream port for more than 3 milliseconds. It is reset to 0 on any activity. When the device is suspended (Suspend bit DSUS = 1) and the software writes a 0 to it, the device will generate a remote wake-up. This will only happen when the device is connected (Connect bit = 1). When the device is not connected or not suspended, a writing a 0 has no effect. Writing a 1 never has an effect.
        bitOffset: 17
        bitWidth: 1
        access: read-write
      - name: LPM_SUS
        description: Device status - LPM Suspend. This bit represents the current LPM suspend state. It is set to 1 by HW when the device has acknowledged the LPM request from the USB host and the Token Retry Time of 10 ms has elapsed. When the device is in the LPM suspended state (LPM suspend bit = 1) and the software writes a zero to this bit, the device will generate a remote walk-up. Software can only write a zero to this bit when the LPM_REWP bit is set to 1. HW resets this bit when it receives a host initiated resume. HW only updates the LPM_SUS bit when the LPM_SUPP bit is equal to one.
        bitOffset: 19
        bitWidth: 1
        access: read-write
      - name: LPM_REWP
        description: LPM Remote Wake-up Enabled by USB host. HW sets this bit to one when the bRemoteWake bit in the LPM extended token is set to 1. HW will reset this bit to 0 when it receives the host initiated LPM resume, when a remote wake-up is sent by the device or when a USB bus reset is received. Software can use this bit to check if the remote wake-up feature is enabled by the host for the LPM transaction.
        bitOffset: 20
        bitWidth: 1
        access: read-only
      - name: DCON_C
        description: Device status - connect change. The Connect Change bit is set when the device's pull-up resistor is disconnected because VBus disappeared. The bit is reset by writing a one to it.
        bitOffset: 24
        bitWidth: 1
        access: read-write
      - name: DSUS_C
        description: 'Device status - suspend change. The suspend change bit is set to 1 when the suspend bit toggles. The suspend bit can toggle because: - The device goes in the suspended state - The device is disconnected - The device receives resume signaling on its upstream port. The bit is reset by writing a one to it.'
        bitOffset: 25
        bitWidth: 1
        access: read-write
      - name: DRES_C
        description: Device status - reset change. This bit is set when the device received a bus reset. On a bus reset the device will automatically go to the default state (unconfigured and responding to address 0). The bit is reset by writing a one to it.
        bitOffset: 26
        bitWidth: 1
        access: read-write
      - name: VBUSDEBOUNCED
        description: This bit indicates if Vbus is detected or not. The bit raises immediately when Vbus becomes high. It drops to zero if Vbus is low for at least 3 ms. If this bit is high and the DCon bit is set, the HW will enable the pull-up resistor to signal a connect.
        bitOffset: 28
        bitWidth: 1
        access: read-only
  - name: INFO
    description: Info register
    addressOffset: 4
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 32767
    fields:
      - name: FRAME_NR
        description: Frame number. This contains the frame number of the last successfully received SOF. In case no SOF was received by the device at the beginning of a frame, the frame number returned is that of the last successfully received SOF. In case the SOF frame number contained a CRC error, the frame number returned will be the corrupted frame number as received by the device.
        bitOffset: 0
        bitWidth: 11
        access: read-only
      - name: ERR_CODE
        description: 'The error code which last occurred:'
        bitOffset: 11
        bitWidth: 4
        access: read-write
        enumeratedValues:
          - name: NO_ERROR
            description: No error
            value: 0
          - name: PID_ENCODING_ERROR
            description: PID encoding error
            value: 1
          - name: PID_UNKNOWN
            description: PID unknown
            value: 2
          - name: PACKET_UNEXPECTED
            description: Packet unexpected
            value: 3
          - name: TOKEN_CRC_ERROR
            description: Token CRC error
            value: 4
          - name: DATA_CRC_ERROR
            description: Data CRC error
            value: 5
          - name: TIMEOUT
            description: Time out
            value: 6
          - name: BABBLE
            description: Babble
            value: 7
          - name: TRUNCATED_EOP
            description: Truncated EOP
            value: 8
          - name: SENT_RECEIVED_NAK
            description: Sent/Received NAK
            value: 9
          - name: SENT_STALL
            description: Sent Stall
            value: 10
          - name: OVERRUN
            description: Overrun
            value: 11
          - name: SENT_EMPTY_PACKET
            description: Sent empty packet
            value: 12
          - name: BITSTUFF_ERROR
            description: Bitstuff error
            value: 13
          - name: SYNC_ERROR
            description: Sync error
            value: 14
          - name: WRONG_DATA_TOGGLE
            description: Wrong data toggle
            value: 15
      - name: MINREV
        description: Minor Revision.
        bitOffset: 16
        bitWidth: 8
        access: read-only
      - name: MAJREV
        description: Major Revision.
        bitOffset: 24
        bitWidth: 8
        access: read-only
  - name: EPLISTSTART
    description: EP Command/Status List start address
    addressOffset: 8
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 4294967040
    fields:
      - name: EP_LIST
        description: Start address of the USB EP Command/Status List.
        bitOffset: 8
        bitWidth: 24
        access: read-write
  - name: DATABUFSTART
    description: Data buffer start address
    addressOffset: 12
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 4290772992
    fields:
      - name: DA_BUF
        description: Start address of the buffer pointer page where all endpoint data buffers are located.
        bitOffset: 22
        bitWidth: 10
        access: read-write
  - name: LPM
    description: Link Power Management register
    addressOffset: 16
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 511
    fields:
      - name: HIRD_HW
        description: Host Initiated Resume Duration - HW. This is the HIRD value from the last received LPM token
        bitOffset: 0
        bitWidth: 4
        access: read-only
      - name: HIRD_SW
        description: Host Initiated Resume Duration - SW. This is the time duration required by the USB device system to come out of LPM initiated suspend after receiving the host initiated LPM resume.
        bitOffset: 4
        bitWidth: 4
        access: read-write
      - name: DATA_PENDING
        description: As long as this bit is set to one and LPM supported bit is set to one, HW will return a NYET handshake on every LPM token it receives. If LPM supported bit is set to one and this bit is zero, HW will return an ACK handshake on every LPM token it receives. If SW has still data pending and LPM is supported, it must set this bit to 1.
        bitOffset: 8
        bitWidth: 1
        access: read-write
  - name: EPSKIP
    description: Endpoint skip
    addressOffset: 20
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 1073741823
    fields:
      - name: SKIP
        description: 'Endpoint skip: Writing 1 to one of these bits, will indicate to HW that it must deactivate the buffer assigned to this endpoint and return control back to software. When HW has deactivated the endpoint, it will clear this bit, but it will not modify the EPINUSE bit. An interrupt will be generated when the Active bit goes from 1 to 0. Note: In case of double-buffering, HW will only clear the Active bit of the buffer indicated by the EPINUSE bit.'
        bitOffset: 0
        bitWidth: 10
        access: read-write
  - name: EPINUSE
    description: Endpoint Buffer in use
    addressOffset: 24
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 1020
    fields:
      - name: BUF
        description: 'Buffer in use: This register has one bit per physical endpoint. 0: HW is accessing buffer 0. 1: HW is accessing buffer 1.'
        bitOffset: 2
        bitWidth: 8
        access: read-write
  - name: EPBUFCFG
    description: Endpoint Buffer Configuration register
    addressOffset: 28
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 1020
    fields:
      - name: BUF_SB
        description: 'Buffer usage: This register has one bit per physical endpoint. 0: Single-buffer. 1: Double-buffer. If the bit is set to single-buffer (0), it will not toggle the corresponding EPINUSE bit when it clears the active bit. If the bit is set to double-buffer (1), HW will toggle the EPINUSE bit when it clears the Active bit for the buffer.'
        bitOffset: 2
        bitWidth: 8
        access: read-write
  - name: INTSTAT
    description: Interrupt status register
    addressOffset: 32
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 3221226495
    fields:
      - name: EP0OUT
        description: Interrupt status register bit for the Control EP0 OUT direction. This bit will be set if NBytes transitions to zero or the skip bit is set by software or a SETUP packet is successfully received for the control EP0. If the IntOnNAK_CO is set, this bit will also be set when a NAK is transmitted for the Control EP0 OUT direction. Software can clear this bit by writing a one to it.
        bitOffset: 0
        bitWidth: 1
        access: read-write
      - name: EP0IN
        description: Interrupt status register bit for the Control EP0 IN direction. This bit will be set if NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_CI is set, this bit will also be set when a NAK is transmitted for the Control EP0 IN direction. Software can clear this bit by writing a one to it.
        bitOffset: 1
        bitWidth: 1
        access: read-write
      - name: EP1OUT
        description: Interrupt status register bit for the EP1 OUT direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AO is set, this bit will also be set when a NAK is transmitted for the EP1 OUT direction. Software can clear this bit by writing a one to it.
        bitOffset: 2
        bitWidth: 1
        access: read-write
      - name: EP1IN
        description: Interrupt status register bit for the EP1 IN direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AI is set, this bit will also be set when a NAK is transmitted for the EP1 IN direction. Software can clear this bit by writing a one to it.
        bitOffset: 3
        bitWidth: 1
        access: read-write
      - name: EP2OUT
        description: Interrupt status register bit for the EP2 OUT direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AO is set, this bit will also be set when a NAK is transmitted for the EP2 OUT direction. Software can clear this bit by writing a one to it.
        bitOffset: 4
        bitWidth: 1
        access: read-write
      - name: EP2IN
        description: Interrupt status register bit for the EP2 IN direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AI is set, this bit will also be set when a NAK is transmitted for the EP2 IN direction. Software can clear this bit by writing a one to it.
        bitOffset: 5
        bitWidth: 1
        access: read-write
      - name: EP3OUT
        description: Interrupt status register bit for the EP3 OUT direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AO is set, this bit will also be set when a NAK is transmitted for the EP3 OUT direction. Software can clear this bit by writing a one to it.
        bitOffset: 6
        bitWidth: 1
        access: read-write
      - name: EP3IN
        description: Interrupt status register bit for the EP3 IN direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AI is set, this bit will also be set when a NAK is transmitted for the EP3 IN direction. Software can clear this bit by writing a one to it.
        bitOffset: 7
        bitWidth: 1
        access: read-write
      - name: EP4OUT
        description: Interrupt status register bit for the EP4 OUT direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AO is set, this bit will also be set when a NAK is transmitted for the EP4 OUT direction. Software can clear this bit by writing a one to it.
        bitOffset: 8
        bitWidth: 1
        access: read-write
      - name: EP4IN
        description: Interrupt status register bit for the EP4 IN direction. This bit will be set if the corresponding Active bit is cleared by HW. This is done in case the programmed NBytes transitions to zero or the skip bit is set by software. If the IntOnNAK_AI is set, this bit will also be set when a NAK is transmitted for the EP4 IN direction. Software can clear this bit by writing a one to it.
        bitOffset: 9
        bitWidth: 1
        access: read-write
      - name: FRAME_INT
        description: Frame interrupt. This bit is set to one every millisecond when the VbusDebounced bit and the DCON bit are set. This bit can be used by software when handling isochronous endpoints. Software can clear this bit by writing a one to it.
        bitOffset: 30
        bitWidth: 1
        access: read-write
      - name: DEV_INT
        description: Device status interrupt. This bit is set by HW when one of the bits in the Device Status Change register are set. Software can clear this bit by writing a one to it.
        bitOffset: 31
        bitWidth: 1
        access: read-write
  - name: INTEN
    description: Interrupt enable register
    addressOffset: 36
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 3221226495
    fields:
      - name: EP_INT_EN
        description: If this bit is set and the corresponding USB interrupt status bit is set, a HW interrupt is generated on the interrupt line indicated by the corresponding USB interrupt routing bit.
        bitOffset: 0
        bitWidth: 10
        access: read-write
      - name: FRAME_INT_EN
        description: If this bit is set and the corresponding USB interrupt status bit is set, a HW interrupt is generated on the interrupt line indicated by the corresponding USB interrupt routing bit.
        bitOffset: 30
        bitWidth: 1
        access: read-write
      - name: DEV_INT_EN
        description: If this bit is set and the corresponding USB interrupt status bit is set, a HW interrupt is generated on the interrupt line indicated by the corresponding USB interrupt routing bit.
        bitOffset: 31
        bitWidth: 1
        access: read-write
  - name: INTSETSTAT
    description: Set interrupt status register
    addressOffset: 40
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 3221226495
    fields:
      - name: EP_SET_INT
        description: If software writes a one to one of these bits, the corresponding USB interrupt status bit is set. When this register is read, the same value as the USB interrupt status register is returned.
        bitOffset: 0
        bitWidth: 10
        access: read-write
      - name: FRAME_SET_INT
        description: If software writes a one to one of these bits, the corresponding USB interrupt status bit is set. When this register is read, the same value as the USB interrupt status register is returned.
        bitOffset: 30
        bitWidth: 1
        access: read-write
      - name: DEV_SET_INT
        description: If software writes a one to one of these bits, the corresponding USB interrupt status bit is set. When this register is read, the same value as the USB interrupt status register is returned.
        bitOffset: 31
        bitWidth: 1
        access: read-write
  - name: EPTOGGLE
    description: Endpoint toggle register
    addressOffset: 52
    size: 32
    access: read-write
    resetValue: 0
    resetMask: 1023
    fields:
      - name: TOGGLE
        description: 'Endpoint data toggle: This field indicates the current value of the data toggle for the corresponding endpoint.'
        bitOffset: 0
        bitWidth: 10
        access: read-write
addressBlocks:
  - offset: 0
    size: 56
    usage: registers
interrupts:
  - name: NEEDCLK
  - name: USB
