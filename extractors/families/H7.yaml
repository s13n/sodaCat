families:
  H73x:
    ref_manual: {name: RM0468, url: 'https://www.st.com/resource/en/reference_manual/rm0468-stm32h723733-stm32h725735-and-stm32h730-value-line-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32H723
    - STM32H725
    - STM32H730
    - STM32H733
    - STM32H735
    - STM32H73x
  H742_H753:
    ref_manual: {name: RM0433, url: 'https://www.st.com/resource/en/reference_manual/rm0433-stm32h742-stm32h743753-and-stm32h750-value-line-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32H742
    - STM32H743
    - STM32H750
    - STM32H753
  H745_H757:
    ref_manual: {name: RM0399, url: 'https://www.st.com/resource/en/reference_manual/rm0399-stm32h745755-and-stm32h747757-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32H745_CM4
    - STM32H745_CM7
    - STM32H747_CM4
    - STM32H747_CM7
    - STM32H755_CM4
    - STM32H755_CM7
    - STM32H757_CM4
    - STM32H757_CM7
  H7A3_B:
    ref_manual: {name: RM0455, url: 'https://www.st.com/resource/en/reference_manual/rm0455-stm32h7a37b3-and-stm32h7b0-value-line-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32H7A3
    - STM32H7B0
    - STM32H7B3
blocks:
  ADC:
    from: STM32H723.ADC1
    instances: [ADC1, ADC2, ADC3]
    interrupts:
      ADC1_2: INTR
    transforms:
      - type: patchAddressBlock
        size: 256
  ADC_Common:
    from: STM32H723.ADC12_Common
    instances: [ADC12_Common, ADC3_Common]
    transforms:
      - type: patchAddressBlock
        size: 256
  ART:
    from: STM32H745_CM4.ART
    instances: [ART]
  AXI:
    from: STM32H723.AXI
    instances: [AXI]
  AdvCtrlTimer:
    from: STM32H723.TIM1
    instances: [TIM1, TIM8]
    interrupts:
      TIM1_BRK: BRK
      TIM1_UP: UP
      TIM1_TRG_COM: TRG_COM
      TIM_CC: CC
  BDMA:
    from: STM32H723.BDMA
    instances: [BDMA, BDMA1, BDMA2]
    interrupts:
      BDMA_CH0: CH0
      BDMA_CH1: CH1
      BDMA_CH2: CH2
      BDMA_CH3: CH3
      BDMA_CH4: CH4
      BDMA_CH5: CH5
      BDMA_CH6: CH6
      BDMA_CH7: CH7
  BasicTimer:
    from: STM32H723.TIM6
    instances: [TIM6, TIM7]
    interrupts:
      TIM6_DAC: INTR
  CAN_CCU:
    from: STM32H723.CAN_CCU
    instances: [CAN_CCU]
  CEC:
    from: STM32H723.CEC
    instances: [CEC]
    interrupts:
      CEC: INTR
  COMP:
    from: STM32H723.COMP1
    instances: [COMP1]
    interrupts:
      COMP: INTR
  CORDIC:
    from: STM32H723.CORDIC
    instances: [CORDIC]
    interrupts:
      CORDIC_IT: INTR
  CRC:
    from: STM32H723.CRC
    instances: [CRC]
  CRS:
    from: STM32H723.CRS
    instances: [CRS]
    interrupts:
      CRS: INTR
  CRYP:
    from: STM32H730.CRYP
    instances: [CRYP]
    interrupts:
      CRYP: INTR
  DAC:
    from: STM32H7A3.DAC2
    instances: [DAC, DAC1, DAC2]
    interrupts:
      DAC2: INTR
  DBGMCU:
    instances: [DBGMCU]
    variants:
      H73x:
        from: STM32H723.DBGMCU
      H742_H753:
        from: STM32H743.DBGMCU
      H745_H757:
        from: STM32H745_CM4.DBGMCU
      H7A3_B:
        from: STM32H7A3.DBGMCU
  DCMI:
    from: STM32H723.DCMI
    instances: [DCMI]
    interrupts:
      DCMI: INTR
  DFSDM:
    from: STM32H7A3.DFSDM1
    instances: [DFSDM, DFSDM1, DFSDM2]
    interrupts:
      DFSDM1_FLT0: FLT0
      DFSDM1_FLT1: FLT1
      DFSDM1_FLT2: FLT2
      DFSDM1_FLT3: FLT3
    params:
      filters:
        type: int
        default: 4
        description: Number of digital filter units (4 or 8)
      has_dlyr:
        type: bool
        default: true
        description: CHyDLYR delay register present
    transforms:
      - {type: renameRegisters, pattern: '^DFSDM\d+_', replacement: ''}
      # H7A3 SVD bug: CKOUTDIV/CKOUTSRC/DFSDMEN duplicated in CH1-CH7 (CH0-only per RM)
      - {type: patchFields, register: CH1CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH2CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH3CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH4CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH5CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH6CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
      - {type: patchFields, register: CH7CFGR1, fields: [{name: CKOUTDIV}, {name: CKOUTSRC}, {name: DFSDMEN}]}
  DMA:
    from: STM32H723.DMA1
    instances: [DMA1, DMA2, DMA2D, DMAMUX1, DMAMUX2]
    interrupts:
      DMA_STR0: STR0
      DMA_STR1: STR1
      DMA_STR2: STR2
      DMA_STR3: STR3
      DMA_STR4: STR4
      DMA_STR5: STR5
      DMA_STR6: STR6
      DMA1_STR7: STR7
  DSIHOST:
    from: STM32H745_CM4.DSIHOST
    instances: [DSIHOST]
    transforms:
      - {type: renameRegisters, pattern: '^DSI_', replacement: ''}
  ETH:
    from: STM32H750.ETH
    instances: [ETH]
    interrupts:
      ETH: INTR
      ETH_WKUP: WKUP
  EXTI:
    from: STM32H723.EXTI
    instances: [EXTI]
    interrupts:
      EXTI1: INTR1
      EXTI2: INTR2
      EXTI3: INTR3
      EXTI4: INTR4
      EXTI9_5: INTR9_5
      EXTI15_10: INTR15_10
      WKUP: WKUP
      FPU: FPU
      ECC_DIAG_IT: ECC_DIAG_IT
      TEMP_IT: TEMP_IT
  Ethernet_DMA:
    from: STM32H742.Ethernet_DMA
    instances: [Ethernet_DMA]
  Ethernet_MAC:
    from: STM32H723.Ethernet_MAC
    instances: [Ethernet_MAC]
  Ethernet_MTL:
    from: STM32H742.Ethernet_MTL
    instances: [Ethernet_MTL]
  FDCAN:
    from: STM32H7A3.FDCAN
    instances: [FDCAN, FDCAN1, FDCAN2]
    interrupts:
      FDCAN2_CAL: CAL
      FDCAN2_IT1: IT1
      FDCAN1_IT1: IT1
      FDCAN2_IT0: IT0
      FDCAN1_IT0: IT0
  FDCAN3:
    from: STM32H723.FDCAN3
    instances: [FDCAN3]
    interrupts:
      FDCAN3_IT0: IT0
      FDCAN3_IT1: IT1
  FMAC:
    from: STM32H723.FMAC
    instances: [FMAC]
    interrupts:
      FMAC: INTR
  FMC:
    from: STM32H723.FMC
    instances: [FMC]
    interrupts:
      FMC: INTR
  Flash:
    instances: [FLASH, Flash]
    interrupts:
      FLASH: INTR
    transforms:
      - {type: renameRegisters, pattern: '^FLASH_', replacement: ''}
    variants:
      H73x:
        from: STM32H723.Flash
      H742_H753:
        from: STM32H743.Flash
      H745_H757:
        from: STM32H745_CM4.Flash
      H7A3_B:
        from: STM32H7A3.Flash
  GPIO:
    from: STM32H723.GPIOA
    instances: [GPIOA, GPIOB, GPIOC, GPIOD, GPIOE, GPIOF, GPIOG, GPIOH, GPIOI, GPIOJ, GPIOK]
  GpTimer:
    from: STM32H723.TIM2
    instances: [TIM12, TIM13, TIM14, TIM15, TIM16, TIM17, TIM2, TIM23, TIM24, TIM3, TIM4, TIM5]
    interrupts:
      TIM15: INTR
    params:
      width:
        type: int
        default: 16
        description: Counter width in bits
      channels:
        type: int
        default: 4
        description: Number of capture/compare channels
  HASH:
    from: STM32H753.HASH
    instances: [HASH]
    interrupts:
      HASH_RNG: INTR
    variants:
      H73x:
        from: STM32H730.HASH
  HRTIM_Common:
    from: STM32H742.HRTIM_Common
    instances: [HRTIM_Common]
  HRTIM_Master:
    from: STM32H742.HRTIM_Master
    instances: [HRTIM_Master]
    interrupts:
      HRTIM1_MST: INTR
  HRTIM_Timer:
    from: STM32H742.HRTIM_TIMA
    instances: [HRTIM_TIMA, HRTIM_TIMB, HRTIM_TIMC, HRTIM_TIMD, HRTIM_TIME]
    interrupts:
      HRTIM1_FLT: FLT
      HRTIM1_MST: MST
  HSEM:
    from: STM32H743.HSEM
    instances: [HSEM]
    interrupts:
      HSEM0: INTR
    params:
      semaphores:
        type: int
        default: 32
        description: Number of hardware semaphores (16 or 32)
    transforms:
      # All H7 SVDs except H745: MASTERID field is 8-bit, RM says 4-bit at [11:8]
      - {type: patchFields, register_pattern: '^R\d+$', fields: [{name: MASTERID, bitWidth: 4}]}
      - {type: patchFields, register_pattern: '^RLR\d+$', fields: [{name: MASTERID, bitWidth: 4}]}
      - {type: patchFields, register: CR, fields: [{name: MASTERID, bitWidth: 4}]}
      # All H7 SVDs except H745: CR is read-write, RM says write-only
      - {type: patchRegisters, registers: [{name: CR, access: write-only}]}
    variants:
      H745_H757:
        from: STM32H745_CM4.HSEM
  I2C:
    from: STM32H723.I2C1
    instances: [I2C1, I2C2, I2C3, I2C4, I2C5]
    interrupts:
      I2C1_EV: EV
      I2C1_ER: ER
  IWDG:
    from: STM32H743.IWDG
    instances: [IWDG]
  IWDG1:
    from: STM32H723.IWDG1
    instances: [IWDG1]
  IWDG2:
    from: STM32H745_CM4.IWDG2
    instances: [IWDG2]
  JPEG:
    from: STM32H742.JPEG
    instances: [JPEG]
    interrupts:
      JPEG: INTR
  LPTIM:
    from: STM32H723.LPTIM1
    instances: [LPTIM1, LPTIM2, LPTIM3, LPTIM4, LPTIM5]
    interrupts:
      LPTIM1: INTR
  LPUART:
    from: STM32H723.LPUART1
    instances: [LPUART1]
    interrupts:
      LPUART: INTR
  LTDC:
    from: STM32H723.LTDC
    instances: [LTDC]
    interrupts:
      LTDC: INTR
      LTDC_ER: ER
  MDIOS:
    from: STM32H723.MDIOS
    instances: [MDIOS]
    interrupts:
      MDIOS_WKUP: WKUP
      MDIOS: INTR
  MDMA:
    from: STM32H743.MDMA
    instances: [MDMA]
    interrupts:
      MDMA: INTR
  OCTOSPI:
    from: STM32H723.OCTOSPI1
    instances: [OCTOSPI1, OCTOSPI2]
    interrupts:
      OCTOSPI1: INTR
    variants:
      H7A3_B:
        from: STM32H7A3.OCTOSPI1
  OPAMP:
    from: STM32H723.OPAMP
    instances: [OPAMP]
    transforms:
      - {type: renameRegisters, pattern: '^OPAMP\d+_', replacement: ''}
  OTFDEC:
    from: STM32H725.OTFDEC1
    instances: [OTFDEC1, OTFDEC2]
    interrupts:
      OTFDEC1: INTR
      OTFDEC2: INTR
  OTG_HS_DEVICE:
    from: STM32H723.OTG1_HS_DEVICE
    instances: [OTG1_HS_DEVICE, OTG2_HS_DEVICE]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
    interrupts:
      OTG_HS_EP1_OUT: EP1_OUT
      OTG_HS_EP1_IN: EP1_IN
      OTG_HS_WKUP: WKUP
      OTG_HS: INTR
  OTG_HS_GLOBAL:
    from: STM32H723.OTG1_HS_GLOBAL
    instances: [OTG1_HS_GLOBAL, OTG2_HS_GLOBAL]
    interrupts:
      OTG_HS: INTR
      OTG_HS_WKUP: WKUP
      OTG_HS_EP1_IN: EP1_IN
      OTG_HS_EP1_OUT: EP1_OUT
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
      # H723 SVD bug: DIEPTXF7 at 0x12C, should be 0x11C per RM0468
      - {type: patchRegisters, registers: [{name: DIEPTXF7, addressOffset: 284}]}
      # H723 SVD bug: STSPHST is 4-bit in SVD, should be 1-bit per RM0468
      - {type: patchFields, register: GRXSTSR_Device, fields: [{name: STSPHST, bitWidth: 1}]}
      - {type: patchFields, register: GRXSTSP_Device, fields: [{name: STSPHST, bitWidth: 1}]}
  OTG_HS_HOST:
    from: STM32H723.OTG1_HS_HOST
    instances: [OTG1_HS_HOST, OTG2_HS_HOST]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
    interrupts:
      OTG_FS: INTR
  OTG_HS_PWRCLK:
    from: STM32H723.OTG1_HS_PWRCLK
    instances: [OTG1_HS_PWRCLK, OTG2_HS_PWRCLK]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
  PSSI:
    from: STM32H723.PSSI
    instances: [PSSI]
  PWR:
    from: STM32H723.PWR
    instances: [PWR]
    params:
      has_smps:
        type: bool
        default: true
        description: Has SMPS step-down converter (false for H742/H753 which use SCUEN instead of SDEN)
    transforms:
      # H723/H745 SVDs: USB33DEN marked write-only, RM says read-write
      - type: patchFields
        register: CR3
        fields:
          - {name: USB33DEN, access: read-write}
      # H742/H753 has no SMPS â€” bit 2 is SCUEN (Supply Config Update Enable) not SDEN
      - type: cloneRegister
        source: CR3
        name: CR3_SCUEN
        renameFields:
          - {pattern: '^SDEN$', replacement: SCUEN}
    variants:
      H7A3_B:
        from: STM32H7A3.PWR
        transforms: []
  QUADSPI:
    from: STM32H742.QUADSPI
    instances: [QUADSPI]
    interrupts:
      QUADSPI: INTR
  RAMECC:
    from: STM32H743.RAMECC1
    instances: [RAMECC, RAMECC1, RAMECC2, RAMECC3]
    interrupts:
      ECC_DIAG_IT: INTR
    params:
      monitors:
        type: int
        default: 5
        description: Number of ECC monitoring units in this RAMECC instance
    transforms:
      # All H7 SVDs: M2FECR/M3FECR/M4FECR at wrong offsets (RM says regular 0x20 stride)
      # All H7 SVDs: scattered access bugs on FAR/FDRH/FECR (RM says all read-only)
      - type: patchRegisters
        registers:
          - {name: M1FECR, access: read-only}
          - {name: M2FDRH, access: read-only}
          - {name: M2FECR, addressOffset: 84, access: read-only}
          - {name: M3FECR, addressOffset: 116}
          - {name: M4FECR, addressOffset: 148, alternateRegister: null}
          - {name: M5FAR, access: read-only}
  RCC:
    instances: [RCC]
    interrupts:
      RCC: INTR
    variants:
      H73x:
        from: STM32H723.RCC
      H742_H753:
        from: STM32H743.RCC
      H745_H757:
        from: STM32H745_CM4.RCC
      H7A3_B:
        from: STM32H7A3.RCC
  RNG:
    from: STM32H723.RNG
    instances: [RNG]
    interrupts:
      HASH_RNG: INTR
  RTC:
    from: STM32H723.RTC
    instances: [RTC]
    interrupts:
      RTC_TAMP_STAMP_CSS_LSE: TAMP_STAMP_CSS_LSE
      RTC_WKUP: WKUP
      RTC_ALARM: ALARM
    variants:
      H7A3_B:
        from: STM32H7A3.RTC
  SAI:
    from: STM32H723.SAI1
    instances: [SAI1, SAI2, SAI3, SAI4]
    interrupts:
      SAI1: INTR
  SDMMC:
    from: STM32H743.SDMMC1
    instances: [SDMMC1, SDMMC2]
    interrupts:
      SDMMC1: INTR
  SPDIFRX:
    from: STM32H743.SPDIFRX
    instances: [SPDIFRX]
    interrupts:
      SPDIF: INTR
  SPI:
    from: STM32H743.SPI1
    instances: [SPI1, SPI2, SPI3, SPI4, SPI5, SPI6]
    interrupts:
      SPI1: INTR
  SWPMI:
    from: STM32H723.SWPMI
    instances: [SWPMI]
    interrupts:
      SWPMI1: INTR
  SYSCFG:
    from: STM32H723.SYSCFG
    instances: [SYSCFG]
    interrupts:
      LPUART: INTR
  TAMP:
    from: STM32H7A3.TAMP
    instances: [TAMP]
  TT_FDCAN:
    from: STM32H7A3.TT_FDCAN
    instances: [TT_FDCAN]
  USART:
    from: STM32H723.UART4
    instances: [UART4, UART5, UART7, UART8, UART9, USART1, USART10, USART2, USART3, USART6, USART9]
    interrupts:
      UART4: INTR
    params:
      has_synchronous:
        type: bool
        default: true
        description: Synchronous mode support (CLKEN, CPOL, CPHA, LBCL)
      has_smartcard:
        type: bool
        default: true
        description: Smartcard mode support (SCEN, NACK, SCARCNT)
  VREFBUF:
    from: STM32H723.VREFBUF
    instances: [VREFBUF]
  WWDG:
    from: STM32H743.WWDG
    instances: [WWDG]
    interrupts:
      WWDG1_RST: RST
      WWDG1: INTR1
  WWDG1:
    from: STM32H723.WWDG1
    instances: [WWDG1]
    interrupts:
      WWDG1: INTR
  WWDG2:
    from: STM32H745_CM4.WWDG2
    instances: [WWDG2]
    interrupts:
      WWDG2: INTR
chip_params:
  _all:
    _all:
      UART4: {has_synchronous: false, has_smartcard: false}
      UART5: {has_synchronous: false, has_smartcard: false}
      UART7: {has_synchronous: false, has_smartcard: false}
      UART8: {has_synchronous: false, has_smartcard: false}
      UART9: {has_synchronous: false, has_smartcard: false}
      TIM2: {width: 32}
      TIM5: {width: 32}
      TIM23: {width: 32}
      TIM24: {width: 32}
      TIM12: {channels: 2}
      TIM13: {channels: 1}
      TIM14: {channels: 1}
      TIM15: {channels: 2}
      TIM16: {channels: 1}
      TIM17: {channels: 1}
  H742_H753:
    _all:
      DFSDM: {has_dlyr: false}
      PWR: {has_smps: false}
      RAMECC3: {monitors: 2}
  H745_H757:
    _all:
      DFSDM: {has_dlyr: false}
      RAMECC3: {monitors: 2}
  H73x:
    _all:
      RAMECC2: {monitors: 3}
      RAMECC3: {monitors: 2}
  H7A3_B:
    _all:
      DFSDM: {filters: 8}
      RAMECC: {monitors: 3}
      HSEM: {semaphores: 16}
