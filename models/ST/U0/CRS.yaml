name: CRS
description: CRS address block description
groupName: CRS
registers:
  - name: CRS_CR
    displayName: CRS_CR
    description: CRS control register
    addressOffset: 0
    size: 32
    resetValue: 16384
    resetMask: 4294967295
    fields:
      - name: SYNCOKIE
        description: SYNC event OK interrupt enable
        bitOffset: 0
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SYNC event OK (SYNCOKF) interrupt disabled
            value: 0
          - name: B_0x1
            description: SYNC event OK (SYNCOKF) interrupt enabled
            value: 1
      - name: SYNCWARNIE
        description: SYNC warning interrupt enable
        bitOffset: 1
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SYNC warning (SYNCWARNF) interrupt disabled
            value: 0
          - name: B_0x1
            description: SYNC warning (SYNCWARNF) interrupt enabled
            value: 1
      - name: ERRIE
        description: Synchronization or trimming error interrupt enable
        bitOffset: 2
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Synchronization or trimming error (ERRF) interrupt disabled
            value: 0
          - name: B_0x1
            description: Synchronization or trimming error (ERRF) interrupt enabled
            value: 1
      - name: ESYNCIE
        description: Expected SYNC interrupt enable
        bitOffset: 3
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Expected SYNC (ESYNCF) interrupt disabled
            value: 0
          - name: B_0x1
            description: Expected SYNC (ESYNCF) interrupt enabled
            value: 1
      - name: CEN
        description: "Frequency error counter enable\nThis bit enables the oscillator\
          \ clock for the frequency error counter.\nWhen this bit is set, the CRS_CFGR\
          \ register is write-protected and cannot be modified."
        bitOffset: 5
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Frequency error counter disabled
            value: 0
          - name: B_0x1
            description: Frequency error counter enabled
            value: 1
      - name: AUTOTRIMEN
        description: "Automatic trimming enable\nThis bit enables the automatic hardware\
          \ adjustment of TRIM bits according to the measured frequency error between\
          \ two SYNC events. If this bit is set, the TRIM bits are read-only. The\
          \ TRIM value can be adjusted by hardware by one or two steps at a time,\
          \ depending on the measured frequency error value. Refer to Section15.4.4\
          \ for more details."
        bitOffset: 6
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: Automatic trimming disabled, TRIM bits can be adjusted by
              the user.
            value: 0
          - name: B_0x1
            description: Automatic trimming enabled, TRIM bits are read-only and under
              hardware control.
            value: 1
      - name: SWSYNC
        description: "Generate software SYNC event\nThis bit is set by software in\
          \ order to generate a software SYNC event. It is automatically cleared by\
          \ hardware."
        bitOffset: 7
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: No action
            value: 0
          - name: B_0x1
            description: A software SYNC event is generated.
            value: 1
      - name: TRIM
        description: "HSI48 oscillator smooth trimming\nThe default value of the HSI48\
          \ oscillator smooth trimming is 64, which corresponds to the middle of the\
          \ trimming interval."
        bitOffset: 8
        bitWidth: 7
        access: read-write
  - name: CRS_CFGR
    displayName: CRS_CFGR
    description: CRS configuration register
    addressOffset: 4
    size: 32
    resetValue: 539147135
    resetMask: 4294967295
    fields:
      - name: RELOAD
        description: "Counter reload value\nRELOAD is the value to be loaded in the\
          \ frequency error counter with each SYNC event.\nRefer to Section15.4.3\
          \ for more details about counter behavior."
        bitOffset: 0
        bitWidth: 16
        access: read-write
      - name: FELIM
        description: "Frequency error limit\nFELIM contains the value to be used to\
          \ evaluate the captured frequency error value latched in the FECAP[15:0]\
          \ bits of the CRS_ISR register. Refer to Section15.4.4 for more details\
          \ about FECAP evaluation."
        bitOffset: 16
        bitWidth: 8
        access: read-write
      - name: SYNCDIV
        description: "SYNC divider\nThese bits are set and cleared by software to\
          \ control the division factor of the SYNC signal."
        bitOffset: 24
        bitWidth: 3
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SYNC not divided (default)
            value: 0
          - name: B_0x1
            description: SYNC divided by 2
            value: 1
          - name: B_0x2
            description: SYNC divided by 4
            value: 2
          - name: B_0x3
            description: SYNC divided by 8
            value: 3
          - name: B_0x4
            description: SYNC divided by 16
            value: 4
          - name: B_0x5
            description: SYNC divided by 32
            value: 5
          - name: B_0x6
            description: SYNC divided by 64
            value: 6
          - name: B_0x7
            description: SYNC divided by 128
            value: 7
      - name: SYNCSRC
        description: "SYNC signal source selection\nThese bits are set and cleared\
          \ by software to select the SYNC signal source (see Table122):\nNote: When\
          \ using USB LPM (Link Power Management) and the device is in Sleep mode,\
          \ the periodic USB SOF is not generated by the host. No SYNC signal is therefore\
          \ provided to the CRS to calibrate the HSI48 oscillator on the run. To guarantee\
          \ the required clock precision after waking up from Sleep mode, the LSE\
          \ or reference clock on the GPIOs must be used as SYNC signal."
        bitOffset: 28
        bitWidth: 2
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: crs_sync_in_1 selected as SYNC signal source
            value: 0
          - name: B_0x1
            description: crs_sync_in_2 selected as SYNC signal source
            value: 1
          - name: B_0x2
            description: crs_sync_in_3 selected as SYNC signal source
            value: 2
          - name: B_0x3
            description: crs_sync_in_4 selected as SYNC signal source
            value: 3
      - name: SYNCPOL
        description: "SYNC polarity selection\nThis bit is set and cleared by software\
          \ to select the input polarity for the SYNC signal source."
        bitOffset: 31
        bitWidth: 1
        access: read-write
        enumeratedValues:
          - name: B_0x0
            description: SYNC active on rising edge (default)
            value: 0
          - name: B_0x1
            description: SYNC active on falling edge
            value: 1
  - name: CRS_ISR
    displayName: CRS_ISR
    description: CRS interrupt and status register
    addressOffset: 8
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: SYNCOKF
        description: "SYNC event OK flag\nThis flag is set by hardware when the measured\
          \ frequency error is smaller than FELIM * 3. This means that either no adjustment\
          \ of the TRIM value is needed or that an adjustment by one trimming step\
          \ is enough to compensate the frequency error. An interrupt is generated\
          \ if the SYNCOKIE bit is set in the CRS_CR register. It is cleared by software\
          \ by setting the SYNCOKC bit in the CRS_ICR register."
        bitOffset: 0
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No SYNC event OK signaled
            value: 0
          - name: B_0x1
            description: SYNC event OK signaled
            value: 1
      - name: SYNCWARNF
        description: "SYNC warning flag\nThis flag is set by hardware when the measured\
          \ frequency error is greater than or equal to FELIM * 3, but smaller than\
          \ FELIM * 128. This means that to compensate the frequency error, the TRIM\
          \ value must be adjusted by two steps or more. An interrupt is generated\
          \ if the SYNCWARNIE bit is set in the CRS_CR register. It is cleared by\
          \ software by setting the SYNCWARNC bit in the CRS_ICR register."
        bitOffset: 1
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No SYNC warning signaled
            value: 0
          - name: B_0x1
            description: SYNC warning signaled
            value: 1
      - name: ERRF
        description: "Error flag\nThis flag is set by hardware in case of any synchronization\
          \ or trimming error. It is the logical OR of the TRIMOVF, SYNCMISS and SYNCERR\
          \ bits. An interrupt is generated if the ERRIE bit is set in the CRS_CR\
          \ register. It is cleared by software in reaction to setting the ERRC bit\
          \ in the CRS_ICR register, which clears the TRIMOVF, SYNCMISS and SYNCERR\
          \ bits."
        bitOffset: 2
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No synchronization or trimming error signaled
            value: 0
          - name: B_0x1
            description: Synchronization or trimming error signaled
            value: 1
      - name: ESYNCF
        description: "Expected SYNC flag\nThis flag is set by hardware when the frequency\
          \ error counter reached a zero value. An interrupt is generated if the ESYNCIE\
          \ bit is set in the CRS_CR register. It is cleared by software by setting\
          \ the ESYNCC bit in the CRS_ICR register."
        bitOffset: 3
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No expected SYNC signaled
            value: 0
          - name: B_0x1
            description: Expected SYNC signaled
            value: 1
      - name: SYNCERR
        description: "SYNC error\nThis flag is set by hardware when the SYNC pulse\
          \ arrives before the ESYNC event and the measured frequency error is greater\
          \ than or equal to FELIM * 128. This means that the frequency error is too\
          \ big (internal frequency too low) to be compensated by adjusting the TRIM\
          \ value, and that some other action has to be taken. An interrupt is generated\
          \ if the ERRIE bit is set in the CRS_CR register. It is cleared by software\
          \ by setting the ERRC bit in the CRS_ICR register."
        bitOffset: 8
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No SYNC error signaled
            value: 0
          - name: B_0x1
            description: SYNC error signaled
            value: 1
      - name: SYNCMISS
        description: "SYNC missed\nThis flag is set by hardware when the frequency\
          \ error counter reaches value FELIM * 128 and no SYNC is detected, meaning\
          \ either that a SYNC pulse was missed, or the frequency error is too big\
          \ (internal frequency too high) to be compensated by adjusting the TRIM\
          \ value, hence some other action must be taken. At this point, the frequency\
          \ error counter is stopped (waiting for a next SYNC), and an interrupt is\
          \ generated if the ERRIE bit is set in the CRS_CR register. It is cleared\
          \ by software by setting the ERRC bit in the CRS_ICR register."
        bitOffset: 9
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No SYNC missed error signaled
            value: 0
          - name: B_0x1
            description: SYNC missed error signaled
            value: 1
      - name: TRIMOVF
        description: "Trimming overflow or underflow\nThis flag is set by hardware\
          \ when the automatic trimming tries to over- or under-flow the TRIM value.\
          \ An interrupt is generated if the ERRIE bit is set in the CRS_CR register.\
          \ It is cleared by software by setting the ERRC bit in the CRS_ICR register."
        bitOffset: 10
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: No trimming error signaled
            value: 0
          - name: B_0x1
            description: Trimming error signaled
            value: 1
      - name: FEDIR
        description: "Frequency error direction\nFEDIR is the counting direction of\
          \ the frequency error counter latched in the time of the last SYNC event.\
          \ It shows whether the actual frequency is below or above the target."
        bitOffset: 15
        bitWidth: 1
        access: read-only
        enumeratedValues:
          - name: B_0x0
            description: Up-counting direction, the actual frequency is above the
              target
            value: 0
          - name: B_0x1
            description: Down-counting direction, the actual frequency is below the
              target
            value: 1
      - name: FECAP
        description: "Frequency error capture\nFECAP is the frequency error counter\
          \ value latched in the time of the last SYNC event.\nRefer to Section15.4.4\
          \ for more details about FECAP usage."
        bitOffset: 16
        bitWidth: 16
        access: read-only
  - name: CRS_ICR
    displayName: CRS_ICR
    description: CRS interrupt flag clear register
    addressOffset: 12
    size: 32
    resetValue: 0
    resetMask: 4294967295
    fields:
      - name: SYNCOKC
        description: "SYNC event OK clear flag\nWriting 1 to this bit clears the SYNCOKF\
          \ flag in the CRS_ISR register."
        bitOffset: 0
        bitWidth: 1
        access: read-write
      - name: SYNCWARNC
        description: "SYNC warning clear flag\nWriting 1 to this bit clears the SYNCWARNF\
          \ flag in the CRS_ISR register."
        bitOffset: 1
        bitWidth: 1
        access: read-write
      - name: ERRC
        description: "Error clear flag\nWriting 1 to this bit clears TRIMOVF, SYNCMISS\
          \ and SYNCERR bits and consequently also the ERRF flag in the CRS_ISR register."
        bitOffset: 2
        bitWidth: 1
        access: read-write
      - name: ESYNCC
        description: "Expected SYNC clear flag\nWriting 1 to this bit clears the ESYNCF\
          \ flag in the CRS_ISR register."
        bitOffset: 3
        bitWidth: 1
        access: read-write
addressBlocks:
  - offset: 0
    size: 16
    usage: registers
