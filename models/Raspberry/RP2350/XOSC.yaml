# Created from RP2350.svd (Rev 0.1)

name: XOSC
description: Controls the crystal oscillator
registers:
  - name: CTRL
    addressOffset: 0
    description: Crystal Oscillator Control
    resetValue: 0
    fields:
      - name: FREQ_RANGE
        description: The 12-bit code is intended to give some protection against
          accidental writes. An invalid setting will retain the previous value. 
          The actual value being used can be read from STATUS_FREQ_RANGE
        access: read-write
        enumeratedValues:
          - name: 1_15MHZ
            value: 2720
          - name: 10_30MHZ
            value: 2721
          - name: 25_60MHZ
            value: 2722
          - name: 40_100MHZ
            value: 2723
        bitOffset: 0
        bitWidth: 12
      - name: ENABLE
        description: "On power-up this field is initialised to DISABLE and the chip
          runs from the ROSC. \n                            If the chip has subsequently
          been programmed to run from the XOSC then setting this field to DISABLE
          may lock-up the chip. If  this is a concern then run the clk_ref from the
          ROSC and enable the clk_sys RESUS feature. \n                          \
          \  The 12-bit code is intended to give some protection against accidental
          writes. An invalid setting will retain the previous value. The actual value
          being used can be read from STATUS_ENABLED"
        access: read-write
        enumeratedValues:
          - name: DISABLE
            value: 3358
          - name: ENABLE
            value: 4011
        bitOffset: 12
        bitWidth: 12
  - name: STATUS
    addressOffset: 4
    description: Crystal Oscillator Status
    resetValue: 0
    fields:
      - name: FREQ_RANGE
        description: The current frequency range setting
        access: read-only
        enumeratedValues:
          - name: 1_15MHZ
            value: 0
          - name: 10_30MHZ
            value: 1
          - name: 25_60MHZ
            value: 2
          - name: 40_100MHZ
            value: 3
        bitOffset: 0
        bitWidth: 2
      - name: ENABLED
        description: Oscillator is enabled but not necessarily running and 
          stable, resets to 0
        access: read-only
        bitOffset: 12
        bitWidth: 1
      - name: BADWRITE
        description: An invalid value has been written to CTRL_ENABLE or 
          CTRL_FREQ_RANGE or DORMANT
        access: read-write
        modifiedWriteValues: oneToClear
        bitOffset: 24
        bitWidth: 1
      - name: STABLE
        description: Oscillator is running and stable
        access: read-only
        bitOffset: 31
        bitWidth: 1
  - name: DORMANT
    addressOffset: 8
    description: Crystal Oscillator pause control
    resetMask: 0
    fields:
      - name: DORMANT
        description: "This is used to save power by pausing the XOSC \n          \
          \                  On power-up this field is initialised to WAKE \n    \
          \                        An invalid write will also select WAKE \n     \
          \                       Warning: stop the PLLs before selecting dormant
          mode \n                            Warning: setup the irq before selecting
          dormant mode"
        access: read-write
        enumeratedValues:
          - name: dormant
            value: 1668246881
          - name: WAKE
            value: 2002873189
        bitOffset: 0
        bitWidth: 32
  - name: STARTUP
    addressOffset: 12
    description: Controls the startup delay
    resetValue: 0
    fields:
      - name: DELAY
        description: in multiples of 256*xtal_period. The reset value of 0xc4 
          corresponds to approx 50 000 cycles.
        access: read-write
        bitOffset: 0
        bitWidth: 14
      - name: X4
        description: Multiplies the startup_delay by 4, just in case. The reset 
          value is controlled by a mask-programmable tiecell and is provided in 
          case we are booting from XOSC and the default startup delay is 
          insufficient. The reset value is 0x0.
        access: read-write
        bitOffset: 20
        bitWidth: 1
  - name: COUNT
    addressOffset: 16
    description: "A down counter running at the xosc frequency which counts to zero
      and stops. \n                    Can be used for short software pauses when
      setting up time sensitive hardware. \n                    To start the counter,
      write a non-zero value. Reads will return 1 while the count is running and 0
      when it has finished. \n                    Minimum count value is 4. Count
      values <4 will be treated as count value =4. \n                    Note that
      synchronisation to the register clock domain costs 2 register clock cycles and
      the counter cannot compensate for that."
    resetValue: 0
    fields:
      - name: COUNT
        access: read-write
        bitOffset: 0
        bitWidth: 16
addressBlocks:
  - offset: 0
    size: 20
    usage: registers
