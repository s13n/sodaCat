# Created from RP2040.svd (Rev 0)

name: XIP_CTRL
description: QSPI flash execute-in-place block
registers:
  - name: CTRL
    addressOffset: 0
    description: Cache control
    resetValue: 3
    fields:
      - name: EN
        description: "When 1, enable the cache. When the cache is disabled, all XIP
          accesses \n                            will go straight to the flash, without
          querying the cache. When enabled, \n                            cacheable
          XIP accesses will query the cache, and the flash will \n               \
          \             not be accessed if the tag matches and the valid bit is set.\n\
          \n                            If the cache is enabled, cache-as-SRAM accesses
          have no effect on the \n                            cache data RAM, and
          will produce a bus error response."
        access: read-write
        bitOffset: 0
        bitWidth: 1
      - name: ERR_BADWRITE
        description: "When 1, writes to any alias other than 0x0 (caching, allocating)\
          \ \n                            will produce a bus fault. When 0, these
          writes are silently ignored. \n                            In either case,
          writes to the 0x0 alias will deallocate on tag match, \n               \
          \             as usual."
        access: read-write
        bitOffset: 1
        bitWidth: 1
      - name: POWER_DOWN
        description: "When 1, the cache memories are powered down. They retain state,\
          \ \n                            but can not be accessed. This reduces static
          power dissipation. \n                            Writing 1 to this bit forces
          CTRL_EN to 0, i.e. the cache cannot \n                            be enabled
          when powered down. \n                            Cache-as-SRAM accesses
          will produce a bus error response when \n                            the
          cache is powered down."
        access: read-write
        bitOffset: 3
        bitWidth: 1
  - name: FLUSH
    addressOffset: 4
    description: Cache Flush control
    resetValue: 0
    fields:
      - name: FLUSH
        description: "Write 1 to flush the cache. This clears the tag memory, but\
          \ \n                            the data memory retains its contents. (This
          means cache-as-SRAM \n                            contents is not affected
          by flush or reset.) \n                            Reading will hold the
          bus (stall the processor) until the flush \n                           \
          \ completes. Alternatively STAT can be polled until completion."
        access: write-only
        bitOffset: 0
        bitWidth: 1
  - name: STAT
    addressOffset: 8
    description: Cache Status
    resetValue: 2
    fields:
      - name: FLUSH_READY
        description: "Reads as 0 while a cache flush is in progress, and 1 otherwise.\
          \ \n                            The cache is flushed whenever the XIP block
          is reset, and also \n                            when requested via the
          FLUSH register."
        access: read-only
        bitOffset: 0
        bitWidth: 1
      - name: FIFO_EMPTY
        description: When 1, indicates the XIP streaming FIFO is completely 
          empty.
        access: read-only
        bitOffset: 1
        bitWidth: 1
      - name: FIFO_FULL
        description: "When 1, indicates the XIP streaming FIFO is completely full.\
          \ \n                            The streaming FIFO is 2 entries deep, so
          the full and empty \n                            flag allow its level to
          be ascertained."
        access: read-only
        bitOffset: 2
        bitWidth: 1
  - name: CTR_HIT
    addressOffset: 12
    description: Cache Hit counter
    resetValue: 0
    fields:
      - name: CTR_HIT
        description: "A 32 bit saturating counter that increments upon each cache
          hit, \n                            i.e. when an XIP access is serviced directly
          from cached data. \n                            Write any value to clear."
        access: read-write
        modifiedWriteValues: oneToClear
        bitOffset: 0
        bitWidth: 32
  - name: CTR_ACC
    addressOffset: 16
    description: Cache Access counter
    resetValue: 0
    fields:
      - name: CTR_ACC
        description: "A 32 bit saturating counter that increments upon each XIP access,\
          \ \n                            whether the cache is hit or not. This includes
          noncacheable accesses. \n                            Write any value to
          clear."
        access: read-write
        modifiedWriteValues: oneToClear
        bitOffset: 0
        bitWidth: 32
  - name: STREAM_ADDR
    addressOffset: 20
    description: FIFO stream address
    resetValue: 0
    fields:
      - name: STREAM_ADDR
        description: "The address of the next word to be streamed from flash to the
          streaming FIFO. \n                            Increments automatically after
          each flash access. \n                            Write the initial access
          address here before starting a streaming read."
        access: read-write
        bitOffset: 2
        bitWidth: 30
  - name: STREAM_CTR
    addressOffset: 24
    description: FIFO stream control
    resetValue: 0
    fields:
      - name: STREAM_CTR
        description: "Write a nonzero value to start a streaming read. This will then\
          \ \n                            progress in the background, using flash
          idle cycles to transfer \n                            a linear data block
          from flash to the streaming FIFO. \n                            Decrements
          automatically (1 at a time) as the stream \n                           \
          \ progresses, and halts on reaching 0. \n                            Write
          0 to halt an in-progress stream, and discard any in-flight \n          \
          \                  read, so that a new stream can immediately be started
          (after \n                            draining the FIFO and reinitialising
          STREAM_ADDR)"
        access: read-write
        bitOffset: 0
        bitWidth: 22
  - name: STREAM_FIFO
    addressOffset: 28
    description: FIFO stream data
    resetValue: 0
    fields:
      - name: STREAM_FIFO
        description: "Streamed data is buffered here, for retrieval by the system
          DMA. \n                            This FIFO can also be accessed via the
          XIP_AUX slave, to avoid exposing \n                            the DMA to
          bus stalls caused by other XIP traffic."
        access: read-only
        readAction: modify
        bitOffset: 0
        bitWidth: 32
interrupts:
  - name: XIP_IRQ
addressBlocks:
  - offset: 0
    size: 32
    usage: registers
