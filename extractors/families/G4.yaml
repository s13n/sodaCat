families:
  G4xx:
    ref_manual:
      name: RM0440
      url: https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf
    chips:
    - STM32G431
    - STM32G441
    - STM32GBK1CBT6
    - STM32G471
    - STM32G473
    - STM32G474
    - STM32G483
    - STM32G484
    - STM32G491
    - STM32G4A1
blocks:
  ADC:
    from: STM32G431.ADC1
    instances: [ADC1, ADC2, ADC3, ADC4, ADC5]
    interrupts:
      ADC1_2: INTR
  ADC_Common:
    from: STM32G431.ADC12_Common
    instances: [ADC12_Common, ADC345_Common]
  AES:
    from: STM32G431.AES
    instances: [AES]
    interrupts:
      AES: INTR
  AdvCtrlTimer:
    from: STM32G431.TIM1
    instances: [TIM1, TIM20, TIM8]
    interrupts:
      TIM1_BRK_TIM15: BRK
      TIM1_UP_TIM16: UP
      TIM1_TRG_COM: TRG_COM
      TIM1_CC: CC
  BasicTimer:
    from: STM32G431.TIM6
    instances: [TIM6, TIM7]
    interrupts:
      TIM6_DACUNDER: INTR
  COMP:
    from: STM32G431.COMP
    instances: [COMP]
    interrupts:
      COMP1_2_3: INTR1_2_3
      COMP4_5_6: INTR4_5_6
      COMP7: INTR7
  CORDIC:
    from: STM32G431.CORDIC
    instances: [CORDIC]
    interrupts:
      Cordic: INTR
  CRC:
    from: STM32G431.CRC
    instances: [CRC]
  CRS:
    from: STM32G431.CRS
    instances: [CRS]
    interrupts:
      CRS: INTR
  DAC:
    from: STM32G431.DAC1
    instances: [DAC1, DAC2, DAC3, DAC4]
  DBGMCU:
    from: STM32G431.DBGMCU
    instances: [DBGMCU]
  DMA:
    from: STM32G431.DMA1
    instances: [DMA1, DMA2]
    interrupts:
      DMA1_CH1: CH1
      DMA1_CH2: CH2
      DMA1_CH3: CH3
      DMA1_CH4: CH4
      DMA1_CH5: CH5
      DMA1_CH6: CH6
  DMAMUX:
    from: STM32G431.DMAMUX
    instances: [DMAMUX]
    interrupts:
      DMAMUX_OVR: INTR
  EXTI:
    from: STM32G431.EXTI
    instances: [EXTI]
    interrupts:
      PVD_PVM: PVD_PVM
      EXTI0: INTR0
      EXTI1: INTR1
      EXTI2: INTR2
      EXTI3: INTR3
      EXTI4: INTR4
      EXTI9_5: INTR9_5
      EXTI15_10: INTR15_10
      FPU: FPU
  FDCAN:
    from: STM32G431.FDCAN1
    instances: [FDCAN, FDCAN1, FDCAN2, FDCAN3]
    interrupts:
      FDCAN1_IT0: IT0
      FDCAN1_IT1: IT1
  FMAC:
    from: STM32G431.FMAC
    instances: [FMAC]
    interrupts:
      FMAC: INTR
  FMC:
    from: STM32G473.FMC
    instances: [FMC]
    interrupts:
      FMC: INTR
  Flash:
    from: STM32G474.FLASH
    instances: [FLASH]
    interrupts:
      FLASH: INTR
    params:
      pages:
        type: int
        description: Number of flash memory pages
      dual_bank:
        type: bool
        default: false
        description: Dual-bank flash organization supported
      pb4_pupen:
        type: bool
        default: false
        description: PB4 pull-up enable bit present in PWR_PUCRB
  GPIO:
    from: STM32G431.GPIOC
    instances: [GPIOA, GPIOB, GPIOC, GPIOD, GPIOE, GPIOF, GPIOG]
  GpTimer:
    from: STM32G431.TIM2
    instances: [TIM15, TIM16, TIM17, TIM2, TIM3, TIM4, TIM5]
    interrupts:
      TIM2: INTR
    params:
      width:
        type: int
        default: 16
        description: Counter width in bits
      channels:
        type: int
        default: 4
        description: Number of capture/compare channels
  HRTIM_Common:
    from: STM32G474.HRTIM_Common
    instances: [HRTIM_Common]
    interrupts:
      HRTIM_TIM_FLT_IRQn: INTR
  HRTIM_Master:
    from: STM32G474.HRTIM_Master
    instances: [HRTIM_Master]
    interrupts:
      HRTIM_Master_IRQn: INTR
  HRTIM_Timer:
    from: STM32G474.HRTIM_TIMA
    instances: [HRTIM_TIMA, HRTIM_TIMB, HRTIM_TIMC, HRTIM_TIMD, HRTIM_TIME, HRTIM_TIMF]
    interrupts:
      HRTIM_TIMA_IRQn: INTR
  I2C:
    from: STM32G431.I2C1
    instances: [I2C1, I2C2, I2C3, I2C4]
    interrupts:
      I2C1_EV: EV
      I2C1_ER: ER
  IWDG:
    from: STM32G431.IWDG
    instances: [IWDG]
  LPTIM:
    from: STM32G431.LPTIM1
    instances: [LPTIM1]
    interrupts:
      LPTIM1: INTR
  LPUART:
    from: STM32G431.LPUART1
    instances: [LPUART1]
    interrupts:
      LPUART: INTR
  OPAMP:
    from: STM32G431.OPAMP
    instances: [OPAMP]
    transforms:
      - {type: renameRegisters, pattern: '^OPAMP\d+_', replacement: ''}
  PWR:
    from: STM32G431.PWR
    instances: [PWR]
  QUADSPI:
    from: STM32G473.QUADSPI
    instances: [QUADSPI]
    interrupts:
      QUADSPI: INTR
  RCC:
    from: STM32G431.RCC
    instances: [RCC]
    interrupts:
      RCC: INTR
  RNG:
    from: STM32G431.RNG
    instances: [RNG]
    interrupts:
      RNG: INTR
  RTC:
    from: STM32G431.RTC
    instances: [RTC]
    interrupts:
      RTC_TAMP_CSS_LSE: TAMP_CSS_LSE
      RTC_WKUP: WKUP
      RTC_ALARM: ALARM
  SAI:
    from: STM32G431.SAI
    instances: [SAI]
    interrupts:
      SAI: INTR
  SPI:
    from: STM32G431.SPI1
    instances: [SPI1, SPI2, SPI3, SPI4]
    interrupts:
      SPI1: INTR
  SYSCFG:
    from: STM32G431.SYSCFG
    instances: [SYSCFG]
  TAMP:
    from: STM32G431.TAMP
    instances: [TAMP]
  UCPD:
    from: STM32G431.UCPD1
    instances: [UCPD1]
    interrupts:
      UCPD1: INTR
  USART:
    from: STM32G431.UART4
    instances: [UART4, UART5, USART1, USART2, USART3]
    interrupts:
      UART4: INTR
    params:
      has_synchronous:
        type: bool
        default: true
        description: Synchronous mode support (CLKEN, CPOL, CPHA, LBCL)
      has_smartcard:
        type: bool
        default: true
        description: Smartcard mode support (SCEN, NACK, SCARCNT)
  USB:
    from: STM32G431.USB_FS_device
    instances: [USB_FS_device]
    interrupts:
      USB_HP: HP
      USB_LP: LP
      USBWakeUP: WakeUP
  VREFBUF:
    from: STM32G431.VREFBUF
    instances: [VREFBUF]
  WWDG:
    from: STM32G431.WWDG
    instances: [WWDG]
    interrupts:
      WWDG: INTR
chip_params:
  _all:
    _all:
      UART4: {has_synchronous: false, has_smartcard: false}
      UART5: {has_synchronous: false, has_smartcard: false}
      TIM2: {width: 32}
      TIM5: {width: 32}
      TIM15: {channels: 2}
      TIM16: {channels: 1}
      TIM17: {channels: 1}
  G4xx:
    STM32G431:
      Flash: {pages: 64}
    STM32G441:
      Flash: {pages: 64}
    STM32GBK1CBT6:
      Flash: {pages: 64}
    STM32G471:
      Flash: {pages: 256, dual_bank: true}
    STM32G473:
      Flash: {pages: 256, dual_bank: true}
    STM32G474:
      Flash: {pages: 256, dual_bank: true}
    STM32G483:
      Flash: {pages: 256, dual_bank: true}
    STM32G484:
      Flash: {pages: 256, dual_bank: true}
    STM32G491:
      Flash: {pages: 256, pb4_pupen: true}
    STM32G4A1:
      Flash: {pages: 256, pb4_pupen: true}
