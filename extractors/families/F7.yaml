families:
  F72x_F73x:
    ref_manual: {name: RM0431, url: 'https://www.st.com/resource/en/reference_manual/rm0431-stm32f72xxx-and-stm32f73xxx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32F722
    - STM32F723
    - STM32F730
    - STM32F732
    - STM32F733
  F74x_F75x:
    ref_manual: {name: RM0385, url: 'https://www.st.com/resource/en/reference_manual/rm0385-stm32f75xxx-and-stm32f74xxx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32F745
    - STM32F746
    - STM32F750
    - STM32F756
  F76x_F77x:
    ref_manual: {name: RM0410, url: 'https://www.st.com/resource/en/reference_manual/rm0410-stm32f76xxx-and-stm32f77xxx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf'}
    chips:
    - STM32F765
    - STM32F767
    - STM32F768
    - STM32F769
    - STM32F777
    - STM32F778
    - STM32F779
blocks:
  ADC:
    from: STM32F722.ADC1
    instances: [ADC1, ADC2, ADC3]
    interrupts:
      ADC: INTR
  ADC_Common:
    from: STM32F722.C_ADC
    instances: [ADC_Common, C_ADC]
    interrupts:
      ADC: INTR
    transforms:
      - {type: renameFields, register: CCR, pattern: '^MULT$', replacement: MULTI}
      - {type: patchAddressBlock, size: 12}
  AES:
    from: STM32F730.AES
    instances: [AES]
    interrupts:
      AES: INTR
  AdvCtrlTimer:
    from: STM32F722.TIM1
    instances: [TIM1, TIM8]
    interrupts:
      TIM1_BRK_TIM9: BRK
      TIM1_UP_TIM10: UP
      TIM1_TRG_COM_TIM11: TRG
      TIM1_CC: CC
    transforms:
      - type: patchRegisters
        registers:
          - name: AF1
            displayName: AF1
            description: alternate function option register 1
            addressOffset: 96
            size: 32
            access: read-write
            resetValue: 1
            fields:
              - {name: BKINE, description: BRK BKIN input enable, bitOffset: 0, bitWidth: 1}
              - {name: BKDFBKE, description: "BRK DFSDM_BREAK[0] enable", bitOffset: 8, bitWidth: 1}
              - {name: BKINP, description: BRK BKIN input polarity, bitOffset: 9, bitWidth: 1}
          - name: AF2
            displayName: AF2
            description: alternate function option register 2
            addressOffset: 100
            size: 32
            access: read-write
            resetValue: 1
            fields:
              - {name: BK2INE, description: BRK2 BKIN input enable, bitOffset: 0, bitWidth: 1}
              - {name: BK2DFBKE, description: BRK2 DFSDM_BREAK enable, bitOffset: 8, bitWidth: 1}
              - {name: BK2INP, description: BRK2 BKIN2 input polarity, bitOffset: 9, bitWidth: 1}
  BasicTimer:
    from: STM32F722.TIM6
    instances: [TIM6, TIM7]
    interrupts:
      TIM6_DAC: INTR
  CEC:
    from: STM32F745.CEC
    instances: [CEC]
    interrupts:
      HDMI_CEC: INTR
  CRC:
    from: STM32F722.CRC
    instances: [CRC]
  CRYP:
    from: STM32F745.CRYP
    instances: [CRYP]
  DAC:
    from: STM32F722.DAC
    instances: [DAC]
  DBGMCU:
    from: STM32F745.DBG
    instances: [DBG, DBGMCU]
    interrupts:
      FPU: INTR
    transforms:
      - {type: renameFields, register: APB1_FZ, pattern: '^DBG_J2C', replacement: DBG_I2C}
      - {type: renameFields, register: APB1_FZ, pattern: '^DBG_IWDEG_STOP$', replacement: DBG_IWDG_STOP}
      - {type: renameFields, register: APB1_FZ, pattern: '^DBG_I2C3SMBUS', replacement: DBG_I2C3_SMBUS}
      - type: patchFields
        register: APB1_FZ
        fields:
          - {name: DBG_LPTIM1_STOP, bitOffset: 9, bitWidth: 1}
          - {name: DBG_CAN3_STOP, bitOffset: 13, bitWidth: 1}
          - {name: DBG_I2C4_SMBUS_TIMEOUT, bitOffset: 24, bitWidth: 1}
  DCMI:
    from: STM32F745.DCMI
    instances: [DCMI]
    interrupts:
      DCMI: INTR
  DFSDM:
    from: STM32F767.DFSDM
    instances: [DFSDM]
    transforms:
      - {type: renameRegisters, pattern: '^DFSDM\d+_', replacement: ''}
    interrupts:
      DFSDM1_FLT0: FLT0
      DFSDM1_FLT1: FLT1
      DFSDM1_FLT2: FLT2
      DFSDM1_FLT3: FLT3
  DMA:
    from: STM32F722.DMA1
    instances: [DMA1, DMA2]
    interrupts:
      DMA1_Stream0: Stream0
      DMA1_Stream1: Stream1
      DMA1_Stream2: Stream2
      DMA1_Stream3: Stream3
      DMA1_Stream4: Stream4
      DMA1_Stream5: Stream5
      DMA1_Stream6: Stream6
      DMA1_Stream7: Stream7
    params:
      channel_count: {type: int, description: Number of DMA request channels per stream}
    transforms:
      - {type: patchFields, register: S0CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S1CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S2CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S3CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S4CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S5CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S6CR, fields: [{name: CHSEL, bitWidth: 4}]}
      - {type: patchFields, register: S7CR, fields: [{name: CHSEL, bitWidth: 4}]}
  DMA2D:
    from: STM32F745.DMA2D
    instances: [DMA2D]
    interrupts:
      DMA2D: INTR
  DSI:
    from: STM32F767.DSI
    instances: [DSI]
    interrupts:
      DSIHOST: INTR
  EXTI:
    from: STM32F722.EXTI
    instances: [EXTI]
    interrupts:
      TAMP_STAMP: TAMP_STAMP
      EXTI0: INTR0
      EXTI1: INTR1
      EXTI2: INTR2
      EXTI3: INTR3
    transforms:
      - {type: renameFields, register: IMR, pattern: '^MI9$', replacement: IM9}
  Ethernet_DMA:
    from: STM32F745.Ethernet_DMA
    instances: [Ethernet_DMA]
    interrupts:
      ETH: INTR
      ETH_WKUP: ETH_WKUP
  Ethernet_MAC:
    from: STM32F745.Ethernet_MAC
    instances: [Ethernet_MAC]
    interrupts:
      ETH: INTR
      ETH_WKUP: ETH_WKUP
  Ethernet_MMC:
    from: STM32F745.Ethernet_MMC
    instances: [Ethernet_MMC]
  Ethernet_PTP:
    from: STM32F745.Ethernet_PTP
    instances: [Ethernet_PTP]
  FMC:
    from: STM32F722.FMC
    instances: [FMC]
    interrupts:
      FSMC: INTR
    transforms:
      - type: patchFields
        register: SDSR
        fields:
          - {name: RE, description: Refresh error flag, bitOffset: 0, bitWidth: 1, access: read-only}
  Flash:
    from: STM32F767.FLASH
    instances: [FLASH, Flash]
    interrupts:
      FLASH: INTR
    params:
      has_pcrop: {type: bool, default: false, description: "PCROP protection support (RDERR, RDERRIE, OPTCR2)"}
      has_dual_bank: {type: bool, default: false, description: "Dual-bank Flash support (MER2, nDBOOT, nDBANK)"}
    transforms:
      - {type: renameFields, register: SR, pattern: '^PGSERR$', replacement: ERSERR}
      - {type: renameFields, register: OPTKEYR, pattern: '^OPTKEY$', replacement: OPTKEYR}
      - {type: renameFields, register: CR, pattern: '^MER1$', replacement: MER2}
      - type: patchFields
        register: SR
        fields:
          - {name: RDERR, description: PCROP protection error, bitOffset: 8, bitWidth: 1, access: read-write}
      - type: patchFields
        register: CR
        fields:
          - {name: RDERRIE, description: PCROP error interrupt enable, bitOffset: 26, bitWidth: 1}
      - type: patchRegisters
        registers:
          - name: OPTCR2
            displayName: OPTCR2
            description: Flash option control register 2
            addressOffset: 28
            size: 32
            access: read-write
            resetValue: 2147483903
            fields:
              - {name: PCROPi, description: PCROP protection per sector, bitOffset: 0, bitWidth: 8}
              - {name: PCROP_RDP, description: PCROP zone preserved when RDP level decreased, bitOffset: 31, bitWidth: 1}
  GPIO:
    from: STM32F722.GPIOH
    instances: [GPIOA, GPIOB, GPIOC, GPIOD, GPIOE, GPIOF, GPIOG, GPIOH, GPIOI, GPIOJ, GPIOK]
  GpTimer:
    from: STM32F722.TIM2
    instances: [TIM10, TIM11, TIM12, TIM13, TIM14, TIM2, TIM3, TIM4, TIM5, TIM9]
    interrupts:
      TIM5: INTR
    params:
      width:
        type: int
        default: 16
        description: Counter width in bits
      channels:
        type: int
        default: 4
        description: Number of capture/compare channels
      has_uifremap:
        type: bool
        default: false
        description: UIF status bit remapping (CR1 bit 11)
      has_extended_ocm:
        type: bool
        default: false
        description: Extended output compare mode bits (OCxM_3 in CCMR1/CCMR2)
  HASH:
    from: STM32F745.HASH
    instances: [HASH]
  I2C:
    from: STM32F722.I2C1
    instances: [I2C1, I2C2, I2C3, I2C4]
    interrupts:
      I2C1_EV: EV
      I2C1_ER: ER
  IWDG:
    from: STM32F722.IWDG
    instances: [IWDG]
  JPEG:
    from: STM32F767.JPEG
    instances: [JPEG]
    interrupts:
      JPEG: INTR
  LPTIM:
    from: STM32F722.LPTIM1
    instances: [LPTIM1]
    interrupts:
      LP_Timer1: INTR
  LTDC:
    from: STM32F767.LTCD
    instances: [LTCD, LTDC]
    interrupts:
      LCD_TFT: INTR
      LCD_TFT_1: ERROR
  MDIOS:
    from: STM32F767.MDIOS
    instances: [MDIOS]
    interrupts:
      MDIOS: INTR
  OTG_FS_DEVICE:
    from: STM32F745.OTG_FS_DEVICE
    instances: [OTG_FS_DEVICE]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_FS_', replacement: ''}
    variants:
      F72x_F73x:
        from: STM32F722.OTG_FS_DEVICE
  OTG_FS_GLOBAL:
    from: STM32F722.OTG_FS_GLOBAL
    instances: [OTG_FS_GLOBAL]
    interrupts:
      OTG_FS: INTR
    transforms:
      - {type: renameRegisters, pattern: '^OTG_FS_', replacement: ''}
  OTG_FS_HOST:
    from: STM32F745.OTG_FS_HOST
    instances: [OTG_FS_HOST]
    interrupts:
      OTG_FS_WKUP: INTR
    transforms:
      - {type: renameRegisters, pattern: '^OTG_FS_', replacement: ''}
    variants:
      F72x_F73x:
        from: STM32F722.OTG_FS_HOST
  OTG_FS_PWRCLK:
    from: STM32F722.OTG_FS_PWRCLK
    instances: [OTG_FS_PWRCLK]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_FS_', replacement: ''}
    interrupts:
      OTG_FS_WKUP: INTR
  OTG_HS_DEVICE:
    from: STM32F745.OTG_HS_DEVICE
    instances: [OTG_HS_DEVICE]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
    variants:
      F72x_F73x:
        from: STM32F722.OTG_HS_DEVICE
  OTG_HS_GLOBAL:
    from: STM32F745.OTG_HS_GLOBAL
    instances: [OTG_HS_GLOBAL]
    interrupts:
      OTG_HS_EP1_OUT: EP1_OUT
      OTG_HS_EP1_IN: EP1_IN
      OTG_HS_WKUP: WKUP
      OTG_HS: INTR
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
      - {type: renameRegisters, pattern: '^GNPTXSTS$', replacement: HNPTXSTS}
      - {type: patchRegisters, registers: [{name: DIEPTXF8}]}
  OTG_HS_HOST:
    from: STM32F745.OTG_HS_HOST
    instances: [OTG_HS_HOST]
    interrupts:
      OTG_FS: INTR
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
    variants:
      F72x_F73x:
        from: STM32F722.OTG_HS_HOST
  OTG_HS_PWRCLK:
    from: STM32F722.OTG_HS_PWRCLK
    instances: [OTG_HS_PWRCLK]
    transforms:
      - {type: renameRegisters, pattern: '^OTG_HS_', replacement: ''}
    interrupts:
      OTG_HS_WKUP: INTR
  PWR:
    from: STM32F767.PWR
    instances: [PWR]
    interrupts:
      PVD: INTR
    params:
      has_eiwup: {type: bool, default: true, description: "Internal wakeup line gated by EIWUP bit (false = always enabled)"}
    transforms:
      - type: patchFields
        register: CSR1
        fields:
          - {name: EIWUP, description: Enable internal wakeup, bitOffset: 8, bitWidth: 1, access: read-write}
  QUADSPI:
    from: STM32F722.QUADSPI
    instances: [QUADSPI]
    interrupts:
      QuadSPI: INTR
  RCC:
    instances: [RCC]
    interrupts:
      RCC: INTR
    variants:
      F72x_F73x:
        from: STM32F722.RCC
      F74x_F75x:
        from: STM32F745.RCC
      F76x_F77x:
        from: STM32F767.RCC
  RNG:
    from: STM32F722.RNG
    instances: [RNG]
    interrupts:
      RNG: INTR
  RTC:
    from: STM32F722.RTC
    instances: [RTC]
    interrupts:
      RTC_WKUP: WKUP
      RTC_ALARM: ALARM
    transforms:
      - {type: patchFields, register: OR, fields: [{name: TSINSEL, bitWidth: 2}]}
  SAI:
    from: STM32F722.SAI1
    instances: [SAI1, SAI2]
    interrupts:
      SAI1: INTR
  SDMMC:
    from: STM32F745.SDMMC1
    instances: [SDMMC1, SDMMC2]
    interrupts:
      SDMMC1: INTR
    variants:
      F72x_F73x:
        from: STM32F722.SDMMC1
  SPDIFRX:
    from: STM32F767.SPDIFRX
    instances: [SPDIFRX, SPDIF_RX]
    interrupts:
      SPDIFRX: INTR
  SPI:
    from: STM32F722.SPI1
    instances: [SPI1, SPI2, SPI3, SPI4, SPI5, SPI6]
    interrupts:
      SPI1: INTR
  SYSCFG:
    from: STM32F745.SYSCFG
    instances: [SYSCFG]
    variants:
      F72x_F73x:
        from: STM32F722.SYSCFG
  USART:
    from: STM32F767.USART6
    instances: [UART4, UART5, UART7, UART8, USART1, USART2, USART3, USART6]
    interrupts:
      UART4: INTR
    params:
      has_stop_mode_wakeup:
        type: bool
        default: false
        description: USART wakeup from Stop mode (UESM, WUS, WUFIE, UCESM, WUF, REACK, WUCF)
      has_tcbgt:
        type: bool
        default: false
        description: Transmission complete before guard time (TCBGTIE, TCBGT, TCBGTCF)
      has_synchronous:
        type: bool
        default: true
        description: Synchronous mode support (CLKEN, CPOL, CPHA, LBCL)
      has_smartcard:
        type: bool
        default: true
        description: Smartcard mode support (SCEN, NACK, SCARCNT)
    transforms:
      - type: patchFields
        register: CR3
        fields:
          - {name: UCESM, description: USART clock enable in Stop mode, bitOffset: 23, bitWidth: 1}
          - {name: TCBGTIE, description: Transmission complete before guard time interrupt enable, bitOffset: 24, bitWidth: 1}
      - type: patchFields
        register: ISR
        fields:
          - {name: TCBGT, description: Transmission complete before guard time completion, bitOffset: 25, bitWidth: 1}
      - type: patchFields
        register: ICR
        fields:
          - {name: TCBGTCF, description: Transmission complete before guard time clear flag, bitOffset: 7, bitWidth: 1}
      - type: patchFields
        register: BRR
        fields:
          - {name: DIV_Fraction}
          - {name: DIV_Mantissa}
          - {name: BRR, description: USART baud rate, bitOffset: 0, bitWidth: 16}
  USBPHYC:
    from: STM32F730.USBPHYC
    instances: [USBPHYC]
  WWDG:
    from: STM32F722.WWDG
    instances: [WWDG]
    interrupts:
      WWDG: INTR
  bxCAN:
    from: STM32F745.CAN1
    instances: [CAN1, CAN2, CAN3]
    interrupts:
      CAN1_TX: TX
      CAN1_RX0: RX0
      CAN1_RX1: RX1
      CAN1_SCE: SCE
    params:
      linked_to_slave:
        type: string
        default: ''
        description: Instance name of slave CAN sharing this master's filter banks
      linked_to_master:
        type: string
        default: ''
        description: Instance name of master CAN whose filter banks this slave uses
chip_params:
  _all:
    _all:
      UART4: {has_synchronous: false, has_smartcard: false}
      UART5: {has_synchronous: false, has_smartcard: false}
      UART7: {has_synchronous: false, has_smartcard: false}
      UART8: {has_synchronous: false, has_smartcard: false}
      TIM2: {width: 32}
      TIM5: {width: 32}
      TIM9: {channels: 2}
      TIM10: {channels: 1}
      TIM11: {channels: 1}
      TIM12: {channels: 2}
      TIM13: {channels: 1}
      TIM14: {channels: 1}
  F72x_F73x:
    _all:
      DMA: {channel_count: 8}
      Flash: {has_pcrop: true}
      USART: {has_tcbgt: true}
      GpTimer: {has_uifremap: true, has_extended_ocm: true}
  F74x_F75x:
    _all:
      DMA: {channel_count: 8}
      CAN1: {linked_to_slave: CAN2}
      CAN2: {linked_to_master: CAN1}
  F76x_F77x:
    _all:
      DMA: {channel_count: 16}
      Flash: {has_dual_bank: true}
      PWR: {has_eiwup: false}
      USART: {has_stop_mode_wakeup: true, has_tcbgt: true}
      CAN1: {linked_to_slave: CAN2}
      CAN2: {linked_to_master: CAN1}
